{"version":3,"file":"index-CcJzAk-zfURQRAuy.js","sources":["../../../orbit-city-final-dev/src/components/VenteCherCartPage/index.jsx"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\n/* eslint-disable react/prop-types */\r\nimport { useContext, useState } from \"react\"\r\nimport { Link, useNavigate } from \"react-router-dom\"\r\n\r\nimport BreadcrumbCom from \"../BreadcrumbCom\"\r\nimport Layout from \"../Partials/Layout\"\r\nimport PageTitle from \"../Helpers/PageTitle\"\r\nimport { CartContext } from \"../../contexts/CartContext\"\r\nimport formatPrice from \"../../utils/formatPrice\"\r\nimport SEOHeader from \"../Partials/Headers/HeaderOne/SEOHeader\"\r\nimport CommandeService from \"../../services/commandeService\"\r\nimport { useAuthContext } from \"../../contexts/useAuthContext\"\r\nimport { toast } from \"react-toastify\"\r\nimport { Button } from \"flowbite-react\"\r\nimport { Loader2 } from \"lucide-react\"\r\n\r\nexport default function VenteCherCartPage() {\r\n  const { venteCherCart, getVenteCherCartTotal, removeFromVenteCherCart, clearVenteCherCart } =\r\n    useContext(CartContext)\r\n  const { user } = useAuthContext()\r\n  const navigate = useNavigate()\r\n  const [isLoading, setIsLoading] = useState(false)\r\n\r\n  const handleRemove = (e, product) => {\r\n    e.preventDefault()\r\n    removeFromVenteCherCart(product)\r\n  }\r\n\r\n  const hasItems = Array.isArray(venteCherCart) && venteCherCart.length > 0\r\n\r\n  const handleValidateVenteCherOrder = async () => {\r\n    if (!user) {\r\n      toast.dismiss()\r\n      toast.warning(\"Merci de vous connecter pour valider votre panier Vente en cher\", {\r\n        position: \"top-center\",\r\n        autoClose: 3000,\r\n      })\r\n      navigate(\"/login\")\r\n      return\r\n    }\r\n\r\n    if (!hasItems) {\r\n      toast.dismiss()\r\n      toast.error(\"Votre panier Vente en cher est vide\", {\r\n        position: \"top-center\",\r\n        autoClose: 3000,\r\n      })\r\n      return\r\n    }\r\n\r\n    try {\r\n      setIsLoading(true)\r\n\r\n      const modelData = {\r\n        partner_id: user.id,\r\n        payment_mode: \"online\",\r\n        order_lines: venteCherCart.map((item) => ({\r\n          id: item.id,\r\n          quantity: item.quantity,\r\n          list_price: item.list_price,\r\n        })),\r\n      }\r\n\r\n      const response = await CommandeService.createCommandeVenteCher(modelData)\r\n\r\n      toast.dismiss()\r\n      toast.success(\"Commande Vente en cher créée avec succès\", {\r\n        position: \"top-center\",\r\n        autoClose: 4000,\r\n      })\r\n\r\n      clearVenteCherCart()\r\n      navigate(\"/vente-en-cher\")\r\n    } catch (error) {\r\n      toast.dismiss()\r\n      toast.error(\"La commande Vente en cher n'a pas pu être créée\", {\r\n        position: \"top-center\",\r\n        autoClose: 5000,\r\n      })\r\n      // eslint-disable-next-line no-console\r\n      console.error(\"Erreur lors de la création de la commande Vente en cher\", error)\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <SEOHeader\r\n        title=\"CCBM Shop | Panier Vente en cher\"\r\n        description=\"Retrouvez ici les produits ajoutés à votre panier Vente en cher. Produits en très bon état, à vider rapidement.\"\r\n        keywords=\"vente en cher, panier, ccbm shop, électroménager, bonnes affaires\"\r\n      />\r\n      <Layout childrenClasses=\"pt-0 pb-0\">\r\n        <div className=\"cart-page-wrapper w-full bg-white pb-[60px]\">\r\n          <div className=\"w-full\">\r\n            <PageTitle\r\n              title=\"Panier Vente en cher\"\r\n              breadcrumb={[\r\n                { name: \"Accueil\", path: \"/\" },\r\n                { name: \"Panier Vente en cher\", path: \"/vente-cher-cart\" },\r\n              ]}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"w-full mt-[23px]\">\r\n            <div className=\"container-x mx-auto\">\r\n              <BreadcrumbCom\r\n                paths={[\r\n                  { name: \"Accueil\", path: \"/\" },\r\n                  { name: \"Panier Vente en cher\", path: \"/vente-cher-cart\" },\r\n                ]}\r\n              />\r\n\r\n              {!hasItems ? (\r\n                <div className=\"w-full mt-10 flex flex-col items-center justify-center text-center\">\r\n                  <p className=\"text-lg font-medium text-qblack mb-3\">\r\n                    Aucun produit dans votre panier Vente en cher.\r\n                  </p>\r\n                  <Link to=\"/vente-en-cher\" className=\"text-bleu-logo underline text-sm\">\r\n                    Voir les produits en Vente en cher\r\n                  </Link>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <div className=\"w-full mt-6 overflow-x-auto\">\r\n                    <table className=\"min-w-full text-sm\">\r\n                      <thead>\r\n                        <tr className=\"border-b border-gray-200 bg-gray-50\">\r\n                          <th className=\"px-3 py-2 text-left font-semibold text-gray-700\">Produit</th>\r\n                          <th className=\"px-3 py-2 text-left font-semibold text-gray-700\">Prix (list_price)</th>\r\n                          <th className=\"px-3 py-2 text-left font-semibold text-gray-700\">Quantité</th>\r\n                          <th className=\"px-3 py-2 text-left font-semibold text-gray-700\">Total</th>\r\n                          <th className=\"px-3 py-2 text-center font-semibold text-gray-700\">Action</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {venteCherCart.map((item) => (\r\n                          <tr key={item.id} className=\"border-b border-gray-100\">\r\n                            <td className=\"px-3 py-2 align-top\">\r\n                              <div className=\"flex items-center space-x-3\">\r\n                                <div className=\"w-[50px] h-[50px] flex-shrink-0\">\r\n                                  <img\r\n                                    src={\r\n                                      item.image_256\r\n                                        ? `data:image/png;base64,${item.image_256}`\r\n                                        : \"https://readymadeui.com/images/coffee1.webp\"\r\n                                    }\r\n                                    alt={item.name || \"Produit vente en cher\"}\r\n                                    className=\"w-full h-full object-contain\"\r\n                                  />\r\n                                </div>\r\n                                <div>\r\n                                  <p className=\"text-[13px] font-600 text-qblack leading-4 line-clamp-2 hover:text-blue-600\">\r\n                                    {item.name}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                            </td>\r\n                            <td className=\"px-3 py-2 align-top text-qred font-semibold\">\r\n                              {formatPrice(item.list_price || 0)}\r\n                            </td>\r\n                            <td className=\"px-3 py-2 align-top\">{item.quantity}</td>\r\n                            <td className=\"px-3 py-2 align-top font-semibold text-qblack\">\r\n                              {formatPrice((item.list_price || 0) * item.quantity)}\r\n                            </td>\r\n                            <td className=\"px-3 py-2 align-top text-center\">\r\n                              <button\r\n                                type=\"button\"\r\n                                onClick={(e) => handleRemove(e, item)}\r\n                                className=\"text-xs text-red-500 hover:underline\"\r\n                              >\r\n                                Retirer\r\n                              </button>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n\r\n                  <div className=\"w-full mt-[30px] flex sm:justify-end\">\r\n                    <div className=\"sm:w-[370px] w-full border border-[#EDEDED] px-[30px] py-[26px]\">\r\n                      <div className=\"total mb-6\">\r\n                        <div className=\"flex justify-between\">\r\n                          <p className=\"text-[18px] font-medium text-qblack\">Total panier</p>\r\n                          <p className=\"text-[18px] font-medium text-qred\">\r\n                            {formatPrice(getVenteCherCartTotal())}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"space-y-3\">\r\n                        {getVenteCherCartTotal() !== 0 && (\r\n                          <Button\r\n                            type=\"button\"\r\n                            onClick={handleValidateVenteCherOrder}\r\n                            className=\"hover:bg-red-500 w-full bg-bleu-logo\"\r\n                            disabled={isLoading}\r\n                          >\r\n                            {isLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                            Valider le Panier Vente en cher\r\n                          </Button>\r\n                        )}\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={clearVenteCherCart}\r\n                          className=\"w-full h-[44px] border border-red-500 text-red-500 text-sm font-semibold rounded hover:bg-red-50 transition\"\r\n                        >\r\n                          Vider le panier\r\n                        </button>\r\n                        <Link to=\"/vente-en-cher\">\r\n                          <div className=\"w-full h-[44px] bg-[#F6F6F6] flex justify-center items-center rounded\">\r\n                            <span className=\"text-sm font-semibold\">Continuer vos achats Vente en cher</span>\r\n                          </div>\r\n                        </Link>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Layout>\r\n    </>\r\n  )\r\n}\r\n\r\n"],"names":["VenteCherCartPage","venteCherCart","getVenteCherCartTotal","removeFromVenteCherCart","clearVenteCherCart","useContext","CartContext","user","useAuthContext","navigate","useNavigate","isLoading","setIsLoading","useState","handleRemove","e","product","hasItems","handleValidateVenteCherOrder","toast","modelData","item","response","CommandeService","error","jsxs","Fragment","jsx","SEOHeader","Layout","PageTitle","BreadcrumbCom","formatPrice","Button","Loader2","Link"],"mappings":"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"}
{"version":3,"file":"index-qNahCRfn1ZIWU4CZ.js","sources":["../../../orbit-city-final-dev/src/components/VenteCherPage/index.jsx"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport { useCallback, useContext, useEffect } from \"react\"\r\nimport { useLocation, useNavigate } from \"react-router-dom\"\r\nimport BreadcrumbCom from \"../BreadcrumbCom\"\r\nimport ProductCardStyleOne from \"../Helpers/Cards/ProductCardStyleOne\"\r\nimport Layout from \"../Partials/Layout\"\r\nimport { Loader } from \"lucide-react\"\r\nimport SEOHeader from \"../Partials/Headers/HeaderOne/SEOHeader\"\r\nimport Pagination from \"../AllProductPage/Pagination\"\r\nimport { VenteCherContext } from \"../../Provider/VenteCherContext\"\r\n\r\nexport default function VenteCherPage() {\r\n  const { currentProductsVenteCher, totalProductsVenteCher, isLoadingProductVenteCher, fetchProductsVenteCher, updateFilters, resetFilters, filters } =\r\n    useContext(VenteCherContext)\r\n\r\n  const location = useLocation()\r\n  const navigate = useNavigate()\r\n\r\n\r\n  useEffect(() => {\r\n    resetFilters()\r\n    const params = new URLSearchParams(location.search)\r\n    const newFilters = {\r\n      page: Number.parseInt(params.get(\"page\")) || 1,\r\n      category: params.get(\"category\") || \"All\",\r\n      search: params.get(\"search\") || \"\",\r\n      min: Number.parseInt(params.get(\"min\")) || 1000,\r\n      max: Number.parseInt(params.get(\"max\")) || 5000000,\r\n      limit: 9,\r\n      productType: params.get(\"productType\") || \"All\",\r\n      tag: params.get(\"tag\") || \"All\",\r\n    }\r\n\r\n    updateFilters(newFilters)\r\n    window.scrollTo({\r\n      top: 0,\r\n      left: 100,\r\n      behavior: \"smooth\",\r\n    })\r\n  }, [location.pathname, location.search, resetFilters, updateFilters])\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    fetchProductsVenteCher()\r\n  }, [fetchProductsVenteCher])\r\n\r\n\r\n  const startIndex = (filters.page - 1) * filters.limit + 1\r\n  const endIndex = Math.min(filters.page * filters.limit, totalProductsVenteCher)\r\n\r\n  const handlePageChange = (pageNumber) => {\r\n    updateUrlParams({ ...filters, page: pageNumber })\r\n    window.scrollTo({\r\n      top: 0,\r\n      left: 100,\r\n      behavior: \"smooth\",\r\n    })\r\n  }\r\n\r\n  const handleSearchChange = (e) => {\r\n    const value = e.target.value\r\n    updateUrlParams({ ...filters, search: value, page: 1 })\r\n    window.scrollTo({\r\n      top: 0,\r\n      left: 100,\r\n      behavior: \"smooth\",\r\n    })\r\n  }\r\n\r\n\r\n  const handleCategoryChange = (categoryId) => {\r\n    updateUrlParams({ category: categoryId || \"All\", page: 1 })\r\n    window.scrollTo({\r\n      top: 0,\r\n      left: 100,\r\n      behavior: \"smooth\",\r\n    })\r\n  }\r\n\r\n\r\n  const updateUrlParams = useCallback(\r\n    (newFilters) => {\r\n      const params = new URLSearchParams(location.search)\r\n      Object.entries(newFilters).forEach(([key, value]) => {\r\n        if (value !== undefined && value !== null && value !== \"\") {\r\n          params.set(key, value.toString())\r\n        } else {\r\n          params.delete(key)\r\n        }\r\n      })\r\n      navigate({ search: params.toString() }, { replace: true })\r\n    },\r\n    [location.search, navigate],\r\n  )\r\n\r\n  // Si aucun produit, ne pas afficher la page\r\n  if (!isLoadingProductVenteCher && currentProductsVenteCher.length === 0 && totalProductsVenteCher === 0) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <SEOHeader\r\n        title=\"CCBM Shop | Vente en Cher - Produits à Vider\"\r\n        description=\"Découvrez nos produits en vente en cher sur CCBM Shop. Profitez de nos meilleures offres pour vider le stock.\"\r\n        keywords=\"vente en cher, produits à vider, électroménager, CCBM Shop, ccbme, offres spéciales\"\r\n      />\r\n      <Layout>\r\n        <div className=\"products-page-wrapper w-full\">\r\n          <div className=\"container-x mx-auto\">\r\n            <BreadcrumbCom />\r\n            <div className=\"w-full\">\r\n              {/* Bloc d'explication sur la vente en cher */}\r\n              <div className=\"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-md\">\r\n                <h1 className=\"text-xl md:text-2xl font-semibold text-blue-900 mb-2\">\r\n                  Vente en cher : des produits en très bon état, à vider rapidement\r\n                </h1>\r\n                <p className=\"text-sm md:text-base text-blue-900 mb-2\">\r\n                  Les produits listés ici proviennent principalement de fins de séries, de retours clients contrôlés ou de\r\n                  modèles d’exposition. Ils sont en <span className=\"font-semibold\">bon état de fonctionnement</span> et ont été\r\n                  vérifiés par nos équipes techniques avant d’être remis en ligne.\r\n                </p>\r\n                <ul className=\"list-disc pl-5 space-y-1 text-sm md:text-base text-blue-900\">\r\n                  <li>Quantités <span className=\"font-semibold\">très limitées</span> : premier arrivé, premier servi.</li>\r\n                  <li>Prix ajustés en fonction de l’état cosmétique et des accessoires fournis.</li>\r\n                  <li>Photos et descriptions représentatives de l’état réel du produit.</li>\r\n                  <li>Les conditions de garantie et de retour sont précisées sur chaque fiche produit.</li>\r\n                </ul>\r\n              </div>\r\n\r\n              <div className=\"products-sorting w-full bg-white flex flex-col md:flex-row justify-between p-[30px] mb-[40px]\">\r\n                <p className=\"font-400 text-[13px]\">\r\n                  <span className=\"text-qgray\">Affichage</span>{\" \"}\r\n                  {totalProductsVenteCher > 0 ? `${startIndex}–${endIndex} sur ${totalProductsVenteCher} résultats` : \"0 résultat\"}\r\n                </p>\r\n\r\n              </div>\r\n              {isLoadingProductVenteCher ? (\r\n                <div className=\"flex justify-center items-center\">\r\n                  <Loader className=\"animate-spin\" /> Chargement\r\n                </div>\r\n              ) : currentProductsVenteCher.length === 0 ? (\r\n                <div className=\"flex justify-center items-center\">Pas de produits en vente en cher disponible pour le moment</div>\r\n              ) : (\r\n                <div className=\"grid xl:grid-cols-2 grid-cols-1 gap-[30px]\">\r\n                  {currentProductsVenteCher.map((product) => (\r\n                    <ProductCardStyleOne key={product.id} datas={product} mode=\"vente-cher\" />\r\n                  ))}\r\n                </div>\r\n              )}\r\n              <Pagination\r\n                currentPage={filters.page}\r\n                totalPages={Math.ceil(totalProductsVenteCher / filters.limit)}\r\n                onPageChange={handlePageChange}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Layout>\r\n    </>\r\n  )\r\n}\r\n"],"names":["VenteCherPage","currentProductsVenteCher","totalProductsVenteCher","isLoadingProductVenteCher","fetchProductsVenteCher","updateFilters","resetFilters","filters","useContext","VenteCherContext","location","useLocation","navigate","useNavigate","useEffect","params","newFilters","startIndex","endIndex","handlePageChange","pageNumber","updateUrlParams","__spreadProps","__spreadValues","useCallback","key","value","jsxs","Fragment","jsx","SEOHeader","Layout","BreadcrumbCom","Loader","product","ProductCardStyleOne","Pagination"],"mappings":"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"}
{"version":3,"file":"UserContext-Bgxd_yKBjDGSgAOg.js","sources":["../../../orbit-city-final-dev/src/contexts/UserContext.jsx"],"sourcesContent":["/* eslint-disable react/prop-types */\nimport { createContext, useState } from \"react\";\nimport { useEffect } from \"react\";\n\nconst getInitialState = () => {\n  const storedUser = localStorage.getItem(\"user\");\n  const storedToken = localStorage.getItem(\"accessToken\");\n  const storedUid = localStorage.getItem(\"uid\");\n  const storedExpiresIn = localStorage.getItem(\"expires_in\");\n  const is_verified = localStorage.getItem(\"is_verified\");\n  const storedRefreshExpiresIn = localStorage.getItem(\"refresh_expires_in\");\n  const storedRefreshToken = localStorage.getItem(\"refresh_token\");\n  return {\n    user: storedUser ? JSON.parse(storedUser) : null,\n    token: storedToken || null,\n    uid: storedUid || null,\n    expiresIn: storedExpiresIn || null,\n    refreshExpiresIn: storedRefreshExpiresIn || null,\n    refreshToken: storedRefreshToken || null,\n    is_verified: is_verified || null,\n  };\n};\n\nexport const UserContext = createContext();\n\nexport const UserProvider = ({ children }) => {\n  const [userContext, setUserContext] = useState(getInitialState());\n\n  const [user, setUser] = useState(getInitialState().user);\n  const [token, setToken] = useState(getInitialState().token);\n  const [uid, setUid] = useState(getInitialState().uid);\n  const [is_verified, setIsVerified] = useState(getInitialState().is_verified);\n\n  const [expiresIn, setExpiresIn] = useState(getInitialState().expiresIn);\n  const [refreshToken, setRefreshToken] = useState(\n    getInitialState().refreshToken\n  );\n  const [refreshExpiresIn, setRefreshExpiresIn] = useState(\n    getInitialState().refreshExpiresIn\n  );\n\n  useEffect(() => {\n    localStorage.setItem(\"user\", JSON.stringify(userContext.user));\n    localStorage.setItem(\"accessToken\", userContext.token);\n    localStorage.setItem(\"uid\", userContext.uid);\n    localStorage.setItem(\"expires_in\", userContext.expiresIn);\n    localStorage.setItem(\"refresh_expires_in\", userContext.refreshExpiresIn);\n    localStorage.setItem(\"refresh_token\", userContext.refreshToken);\n    localStorage.setItem(\"is_verified\", userContext.is_verified);\n    localStorage.setItem(\"token\", userContext.token);\n  }, [userContext]);\n\n  const logout = () => {\n    localStorage.removeItem(\"user\");\n    localStorage.removeItem(\"accessToken\");\n    localStorage.removeItem(\"uid\");\n    localStorage.removeItem(\"expires_in\");\n    localStorage.removeItem(\"refresh_expires_in\");\n    localStorage.removeItem(\"refresh_token\");\n    localStorage.removeItem(\"is_verified\");\n    localStorage.removeItem(\"token\");\n\n    setUser(null);\n    setToken(null);\n    setUid(null);\n    setExpiresIn(null);\n    setRefreshToken(null);\n    setRefreshExpiresIn(null);\n    setUserContext(getInitialState());\n    setIsVerified(null);\n  };\n  const value = {\n    user,\n    token,\n    uid,\n    expiresIn,\n    refreshToken,\n    refreshExpiresIn,\n    userContext,\n    is_verified,\n    setUid,\n    setUser,\n    setToken,\n    setExpiresIn,\n    setRefreshToken,\n    setRefreshExpiresIn,\n    setUserContext,\n    setIsVerified,\n    logout,\n  };\n  return <UserContext.Provider value={value}>{children}</UserContext.Provider>;\n};\n"],"names":["createContext"],"mappings":"uDAuB2BA,EAAAA,cAAA"}
{"version":3,"file":"index-bziLYeQGVzcmaC7Q.js","sources":["../../../orbit-city-final-dev/src/services/PaydunyaModalService.jsx","../../../orbit-city-final-dev/src/components/PreOrder/index.jsx"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\n/* eslint-disable react/prop-types */\r\n/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable react/prop-types */\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\n\r\nimport { Button, Modal } from \"flowbite-react\";\r\nimport formatPrice from \"../utils/formatPrice\";\r\nimport { toast } from \"react-toastify\";\r\nimport { CircleX, Loader2 } from \"lucide-react\";\r\n\r\nimport paydunya from \"paydunya\";\r\nimport CheckoutInvoice from \"paydunya/lib/checkout-invoice\";\r\nimport PaymentContext from \"../contexts/PaymentContext\";\r\nimport { UserContext } from \"../contexts/UserContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport PaiementService from \"./paimentService\";\r\nimport { useAuthContext } from \"../contexts/useAuthContext\";\r\nimport { trackPurchase } from \"../utils/tracking\";\r\n\r\nconst PaydunyaModalService = ({\r\n  handlePay,\r\n  totalAmount,\r\n  onClose,\r\n  order,\r\n  idOrder,\r\n}) => {\r\n\r\n  console.log(order)\r\n  localStorage.setItem(\"idOrderPayment\", null);\r\n  localStorage.setItem(\"montant\", null);\r\n  localStorage.setItem(\"tokenOrderPayment\", null);\r\n  localStorage.setItem(\"statusOrderPayment\", null);\r\n  const navigate = useNavigate();\r\n  const {\r\n    payment,\r\n    setUserPayment,\r\n    setOrder,\r\n    setPaymentDetails,\r\n    setTotalAmount,\r\n  } = useContext(PaymentContext);\r\n\r\n  const { user } = useAuthContext();\r\n\r\n  const [isLoading, setIsloading] = useState(false);\r\n  const [openModal, setOpenModal] = useState(true);\r\n  const [setup, setSetup] = useState(null);\r\n  const [store, setStore] = useState(null);\r\n  const [facture, setFacture] = useState(null)\r\n\r\n  useEffect(() => {\r\n    setUserPayment(user);\r\n    setOrder(order);\r\n    console.log(\"order \" + idOrder);\r\n    console.log(\"motant \" + totalAmount);\r\n    console.log(\"user\");\r\n    console.log(user);\r\n\r\n    const paydunyaSetup = new paydunya.Setup({\r\n      // masterKey: \"voFGVcul-uCsd-1sw5-wfGz-ukqScIQoOyDu\",\r\n      // privateKey: \"test_private_LJfJe2zAiwndwRq6ZF4qIDIoApZ\",\r\n      // publicKey: \"test_public_Cg2nELkXvHleRmby9NfaKWofWQS\",\r\n      // token: \"VaZUkYb6b1JOpZfxUe3R\",\r\n      // mode: \"test\",\r\n\r\n      masterKey: \"voFGVcul-uCsd-1sw5-wfGz-ukqScIQoOyDu\",\r\n      privateKey: \"live_private_KvbXuQU1IJ4z68hQOU9YeEtrUjW\",\r\n      publicKey: \"live_public_wgK4JebXd3SfGDWN64sEIffD5XR\",\r\n      token: \"cjTGi71WL8xOTCrsJisR\",\r\n      mode: \"live\",\r\n\r\n      // Paydunya pour odoo entreprise\r\n      // ********************** test ************************\r\n      // masterKey: \"voFGVcul-uCsd-1sw5-wfGz-ukqScIQoOyDu\",\r\n      // privateKey: \"test_private_A4sJMbHe94bU4ueGEDdfkcmVorE\",\r\n      // publicKey: \"test_public_1sPEH8M2FaqF7B15zi39mxrpSZd\",\r\n      // token: \"gCUWIfjZUXPzmoxnnIrD\",\r\n      // mode: \"test\",\r\n      // ***********************prod **********************\r\n      // masterKey: \"voFGVcul-uCsd-1sw5-wfGz-ukqScIQoOyDu\",\r\n      // privateKey: \"live_private_yqP67XhEMdpNXpVEyLRK89NIdtu\",\r\n      // publicKey: \"live_public_sYdpPZoUymU8JifcDXG3j59YSqK\",\r\n      // token: \"f6t45WLceOFTVIQFjVw8\",\r\n      // mode: \"live\",\r\n    });\r\n    setSetup(paydunyaSetup);\r\n    const store = new paydunya.Store({\r\n      name: \"CCBM SHOP\",\r\n      email: \"shop@ccbm.sn\",\r\n      tagline: \"Votre boutique pour vos matériels électroménéger\",\r\n      phoneNumber: \"+221 70 922 17 75\",\r\n      postalAddress: \"Avenue Lamine Gueye,x Rue Marchand,Dakar-Senegal\",\r\n      logoURL: \"https://www.ccbmshop.com/logo_192.png\",\r\n      websiteURL: \"https://www.ccbmshop.com/\",\r\n    });\r\n    setStore(store);\r\n  }, []);\r\n\r\n\r\n  const handleSubmit = (event) => {\r\n    console.log(\"arrivé\");\r\n    setIsloading(true);\r\n    event.preventDefault();\r\n    if (setup && store && totalAmount > 0) {\r\n      const invoice = new CheckoutInvoice(setup, store);\r\n      console.log(invoice);\r\n\r\n      order.order_lines.forEach((article) => {\r\n        invoice.addItem(\r\n          article.product_name,\r\n          article.product_uom_qty,\r\n          article.price_unit,\r\n          article.price_subtotal\r\n        );\r\n      });\r\n      console.log(invoice);\r\n\r\n      invoice.totalAmount = Math.ceil(totalAmount);\r\n      if (order.type_sale === \"order\") {\r\n\r\n        if (order.payment_mode == \"echelonne\") {\r\n          invoice.description = `Paiement d'avance de ${formatPrice(Math.ceil(totalAmount))} pour la commande ${order.name}`;\r\n        } else if (order.payment_mode == \"online\") {\r\n          invoice.description = `Paiement de ${formatPrice(Math.ceil(totalAmount))} pour la commande ${order.name}`;\r\n        }\r\n\r\n      } else if (order.type_sale === \"preorder\") {\r\n        if (order.amount_residual > 0) {\r\n          invoice.description = `Paiement de ${formatPrice(Math.ceil(totalAmount))} pour la précommande ${order.name} avec un montant total restant de ${order.amount_total - totalAmount}`;\r\n        } else {\r\n          invoice.description = `Paiement de ${formatPrice(Math.ceil(totalAmount))} pour la précommande ${order.name}`;\r\n        }\r\n      } else if (order.type_sale === \"creditorder\") {\r\n        if (order.amount_residual > 0) {\r\n          invoice.description = `Paiement de ${formatPrice(Math.ceil(totalAmount))} pour le crédit ${order.name} avec un montant total restant de ${order.amount_total - totalAmount}`;\r\n        } else {\r\n          invoice.description = `Paiement de ${formatPrice(Math.ceil(totalAmount))} pour le crédit ${order.name}`;\r\n        }\r\n      }\r\n\r\n      // invoice.callbackURL = \"https://orbitcity.sn/api/facture/paydunya\";\r\n      // invoice.callbackURL = \"https://localhost:8016/api/facture/paydunya\";\r\n      invoice.callbackURL = \"https://orbitcity.odoo.com/api/facture/paydunya\";\r\n\r\n      if (order.type_sale === \"order\") {\r\n        // invoice.cancelURL = `https://www.ccbmshop.sn/commandes/${idOrder}/détails`;\r\n        invoice.returnURL = `http://localhost:5173/commandes/${idOrder}/détails`;\r\n\r\n      } else if (order.type_sale === \"creditorder\") {\r\n        // invoice.cancelURL = `https://www.ccbmshop.sn/credit-commandes/${idOrder}/détails`;\r\n        invoice.returnURL = `http://localhost:5173/credit-commandes/${idOrder}/détails`;\r\n\r\n      } else if (order.type_sale === \"preorder\") {\r\n        // invoice.cancelURL = `https://www.ccbmshop.sn/pre-commandes/${idOrder}/détails`;\r\n        invoice.returnURL = `http://localhost:5173/pre-commandes/${idOrder}/détails`;\r\n      }\r\n      // invoice.returnURL = `https://www.ccbmshop.sn/payment-state`;\r\n      invoice.returnURL = `http://localhost:5173/payment-state`;\r\n\r\n\r\n      console.log(\"invoice\", invoice);\r\n      console.log(order)\r\n      setPaymentDetails(invoice);\r\n      setTotalAmount(invoice.totalAmount);\r\n      console.log(invoice);\r\n      invoice\r\n        .create()\r\n        .then(async function () {\r\n          setFacture(invoice);\r\n\r\n          console.log(invoice);\r\n\r\n          const r = trackPurchase(\r\n            idOrder,\r\n            totalAmount,\r\n            order.order_lines.map(item => ({\r\n              name: item.product_name,\r\n              price: item.price_unit,\r\n              quantity: item.product_uom_qty,\r\n            }))\r\n          );\r\n\r\n          let transaction = null;\r\n\r\n          if (order.type_sale === \"order\") {\r\n\r\n            if (order.payment_mode == \"echelonne\") {\r\n              transaction = `${user.id}-${idOrder}-${totalAmount}-${order.name}-${order.type_sale}-${new Date().getTime().toString()}`;\r\n            } else {\r\n              transaction = `${user.id}-${idOrder}-${totalAmount}-${order.name}-${order.type_sale}`;\r\n            }\r\n\r\n          } else if (order.type_sale === \"preorder\") {\r\n            if (!order.first_payment_state && !order.second_payment_state && !order.third_payment_state) {\r\n              transaction = `${user.id}-${idOrder}-${totalAmount}-${order.name}-${order.type_sale}-1`;\r\n            } else if (order.first_payment_state && !order.second_payment_state && !order.third_payment_state) {\r\n              transaction = `${user.id}-${idOrder}-${totalAmount}-${order.name}-${order.type_sale}-2`;\r\n            } else {\r\n              transaction = `${user.id}-${idOrder}-${totalAmount}-${order.name}-${order.type_sale}-3`;\r\n            }\r\n          }\r\n          else if (order.type_sale === \"creditorder\") {\r\n\r\n            if (!order.first_payment_state && !order.second_payment_state && !order.third_payment_state && !order.fourth_payment_state) {\r\n              transaction = `${user.id}-${idOrder}-${totalAmount}-${order.name}-${order.type_sale}-1`;\r\n            } else if (order.first_payment_state && !order.second_payment_state && !order.third_payment_state && !order.fourth_payment_state) {\r\n              transaction = `${user.id}-${idOrder}-${totalAmount}-${order.name}-${order.type_sale}-2`;\r\n            } else if (order.first_payment_state && order.second_payment_state && order.third_payment_state && !order.fourth_payment_state) {\r\n              transaction = `${user.id}-${idOrder}-${totalAmount}-${order.name}-${order.type_sale}-3`;\r\n            } else {\r\n              transaction = `${user.id}-${idOrder}-${totalAmount}-${order.name}-${order.type_sale}-4`;\r\n            }\r\n\r\n          } else {\r\n            transaction = `${user.id}-${idOrder}-${totalAmount}-${order.name}-${order.type_sale}`;\r\n          }\r\n          const data = {\r\n            transaction_id: transaction,\r\n            amount: totalAmount,\r\n            order_id: idOrder,\r\n            order_type: order.type_sale,\r\n            order_name: order.name,\r\n            partner_id: user.id,\r\n            payment_token: invoice.token,\r\n            payment_state: invoice.status,\r\n          };\r\n\r\n          console.log(\"data payment\", data);\r\n          console.log(data);\r\n          try {\r\n            const response = await PaiementService.setPaymentDetails(data);\r\n\r\n            if (response.order_type === \"order\") {\r\n              toast.success(\"Merci de passer au paiement sur paydunya\", {\r\n                position: \"top-center\",\r\n                autoClose: 2000,\r\n              });\r\n              navigate(`/commandes/${idOrder}/détails`);\r\n            }\r\n\r\n            else if (response.order_type === \"preorder\") {\r\n              console.log(\"precommande\");\r\n              toast.success(\"Merci de passer au paiement sur paydunya\", {\r\n                position: \"top-center\",\r\n                autoClose: 2000,\r\n              });\r\n              navigate(`/pre-commandes/${idOrder}/détails`);\r\n            } else if (response.order_type === \"creditorder\") {\r\n              console.log(\"commande\");\r\n              toast.success(\"Merci de passer au paiement sur paydunya\", {\r\n                position: \"top-center\",\r\n                autoClose: 2000,\r\n              });\r\n              navigate(`/credit-commandes/${idOrder}/détails`);\r\n            } else {\r\n              if (response.payment_state === \"completed\") {\r\n                toast.success(\"Paiement effectif\", {\r\n                  position: \"top-center\",\r\n                  autoClose: 2000,\r\n                });\r\n                navigate(`/commandes/${idOrder}/détails`);\r\n              }\r\n            }\r\n\r\n            localStorage.setItem(\"urlOrderPayment\", invoice.url);\r\n            localStorage.setItem(\"statusOrderPayment\", invoice.status);\r\n            localStorage.setItem(\"tokenOrderPayment\", invoice.token);\r\n            localStorage.setItem(\"idDataPayment\", response.id);\r\n            localStorage.setItem(\"idOrderPayment\", idOrder);\r\n            localStorage.setItem(\"montant\", totalAmount);\r\n\r\n            localStorage.setItem(\r\n              \"responseTextOrderPayment\",\r\n              invoice.responseText\r\n            );\r\n\r\n          } catch (error) {\r\n            console.error(\"erreur lors de l'enregistrement details payment\");\r\n            console.error(error);\r\n            toast.error(\"Payment non effectif \" + error.message, {\r\n              position: \"top-center\",\r\n              autoClose: 5000,\r\n            });\r\n          }\r\n        })\r\n        .catch(function (e) {\r\n          console.log(e);\r\n          toast.error(\"Payment non effectif \" + e, {\r\n            position: \"top-center\",\r\n            autoClose: 5000,\r\n          });\r\n        }).finally(() => {\r\n          setIsloading(false);\r\n        });\r\n    }\r\n  };\r\n\r\n  const handleClick = (e) => {\r\n    e.preventDefault()\r\n    openInNewTab(facture.url);\r\n    setOpenModal(false)\r\n    // navigate('/profile')\r\n    if (order.type_sale === \"order\") {\r\n      navigate(`/commandes/${idOrder}/détails`);\r\n      navigate(`/profile#order`);\r\n    } else if (order.type_sale === \"preorder\") {\r\n      // navigate(`/pre-commandes/${idOrder}/détails`);\r\n      navigate(`/profile#preorder`);\r\n    } else if (order.type_sale === \"creditorder\") {\r\n      // navigate(`/credit-commandes/${idOrder}/détails`);\r\n      navigate(`/profile#commandes-a-credit`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      size=\"xl\"\r\n      className=\"h-auto\"\r\n      show={openModal}\r\n      popup\r\n      onClose={onClose}\r\n    >\r\n      <Modal.Header />\r\n      <Modal.Body>\r\n        <div className=\"fixed inset-0 p-4 flex flex-wrap justify-center items-center w-full h-full z-[1000] before:fixed before:inset-0 before:w-full before:h-full before:bg-[rgba(0,0,0,0.5)] overflow-auto font-[sans-serif]\">\r\n          <div className=\"w-full max-w-lg bg-white shadow-lg rounded-lg p-8 relative\">\r\n            <div className=\"flex items-start border-b border-gray-300 pb-4\">\r\n              <div className=\"flex-1\">\r\n                <h3 className=\"text-gray-800 text-xl font-bold\">\r\n                  Paiement{\" \"}\r\n                  {order.type_sale == \"order\" ? \"Commande\" : order.type_sale == \"preorder\" ? \"Pré Commande\" : \"Commande à crédit\"}{\" \"}\r\n                </h3>\r\n                <p className=\"text-gray-600 text-sm mt-1\">\r\n                  Résumé détaillé de votre commande.\r\n                </p>\r\n              </div>\r\n\r\n              <p>\r\n                <CircleX\r\n                  onClick={onClose}\r\n                  className={`cursor-pointer hover:text-red-500 hover:scale-150 duration-300`}\r\n                />\r\n              </p>\r\n            </div>\r\n            {/* {facture && (\r\n              <div className=\"flex flex-wrap justify-center items-center\" >\r\n                <p> token de payment:  <span> {facture.token}  </span>  </p>\r\n              </div>\r\n            )} */}\r\n            {order && (\r\n\r\n              <>\r\n                <div className=\"my-8\">\r\n\r\n\r\n\r\n                  <table className=\"w-full\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th className=\"text-left text-gray-800 text-sm py-2\">Nom de la commande :</th>\r\n                        <th className=\"text-right text-gray-800 text-sm py-2\">{order.name}</th>\r\n                      </tr>\r\n                    </thead>\r\n                  </table>\r\n                  <table className=\"w-full\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th className=\"text-left text-gray-800 text-sm py-2\">Nom produit</th>\r\n                        <th className=\"text-right text-gray-800 text-sm py-2\">Prix total</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {order &&\r\n                        order.order_lines.map((article, index) => (\r\n                          <tr key={index}>\r\n                            <td className=\"text-left text-gray-800 text-sm py-2\">{article.product_name} ({article.product_uom_qty})  </td>\r\n                            <td className=\"text-right text-gray-800 text-sm py-2 font-medium\">{formatPrice(article.price_total)}</td>\r\n                          </tr>\r\n                        ))}\r\n                    </tbody>\r\n                  </table>\r\n\r\n\r\n                  <table className=\"w-full\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th className=\"text-left text-gray-800 text-sm py-2\">Total Commande (en FCFA) :</th>\r\n                        <th className=\"text-right text-gray-800 text-sm py-2\">{formatPrice(Math.ceil(order.amount_total))}</th>\r\n                      </tr>\r\n                      {order.payment_mode == \"echelonne\" && <>\r\n                        <tr>\r\n                          <th className=\"text-left text-gray-800 text-sm py-2\">Total à payer  (en FCFA) :</th>\r\n                          <th className=\"text-right text-gray-800 text-sm py-2\">{formatPrice(Math.ceil(totalAmount))}</th>\r\n                        </tr>\r\n                      </>}\r\n                    </thead>\r\n                  </table>\r\n\r\n\r\n                  <br />\r\n                  <div className=\"flex max-sm:flex-col items-center gap-4 mt-8\">\r\n                    {setup && store && !facture && (\r\n                      <Button\r\n                        onClick={handleSubmit}\r\n                        disabled={isLoading}\r\n                        pill\r\n                        className=\"rounded-lg px-5 py-2.5 font-medium w-full hover:bg-red-500 hover:text-white text-xl\"\r\n                      >\r\n                        {\" \"}\r\n                        {isLoading && (\r\n                          <>\r\n                            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                            <p>Validation</p>\r\n                          </>\r\n                        )}\r\n                        {!isLoading && \"Valider\"}\r\n\r\n                      </Button>\r\n                    )}\r\n                    {setup && store && facture && (\r\n                      <Button\r\n                        disabled={!facture}\r\n                        onClick={(e) => handleClick(e)}\r\n                        color=\"success\"\r\n                        pill\r\n                        className=\"rounded-lg px-5 py-2.5 font-medium w-full hover:bg-red-500 hover:text-white text-xl\"\r\n                      >\r\n                        Passer au paiement\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Modal.Body>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nfunction openInNewTab(url) {\r\n  const newWindow = window.open(url, '_blank', 'noopener,noreferrer');\r\n  if (newWindow) newWindow.opener = null;\r\n}\r\n\r\n\r\nexport default PaydunyaModalService;\r\n\r\n// \"use client\"\r\n\r\n// import { useEffect, useState, useCallback } from \"react\"\r\n// import { Button, Modal } from \"flowbite-react\"\r\n// import { CircleX, Loader2 } from \"lucide-react\"\r\n// import { toast } from \"react-toastify\"\r\n// import { useNavigate } from \"react-router-dom\"\r\n// import paydunya from \"paydunya\"\r\n// import CheckoutInvoice from \"paydunya/lib/checkout-invoice\"\r\n\r\n// import formatPrice from \"../utils/formatPrice\"\r\n// import { useAuthContext } from \"../contexts/useAuthContext\"\r\n// import { trackPurchase } from \"../utils/tracking\"\r\n// import PaymentService from \"./paimentService\";\r\n// const PaydunyaModalService = ({ handlePay, totalAmount, onClose, order, idOrder }) => {\r\n//   const navigate = useNavigate()\r\n//   const { user } = useAuthContext()\r\n\r\n//   const [state, setState] = useState({\r\n//     isLoading: false,\r\n//     openModal: true,\r\n//     setup: null,\r\n//     store: null,\r\n//     facture: null,\r\n//     error: null,\r\n//   })\r\n\r\n//   // Initialiser Paydunya\r\n//   useEffect(() => {\r\n//     try {\r\n//       const paydunyaSetup = new paydunya.Setup({\r\n//         masterKey: \"voFGVcul-uCsd-1sw5-wfGz-ukqScIQoOyDu\",\r\n//         privateKey: \"test_private_LJfJe2zAiwndwRq6ZF4qIDIoApZ\",\r\n//         publicKey: \"test_public_Cg2nELkXvHleRmby9NfaKWofWQS\",\r\n//         token: \"VaZUkYb6b1JOpZfxUe3R\",\r\n//         mode: \"test\",\r\n//       })\r\n\r\n//       const store = new paydunya.Store({\r\n//         name: \"CCBM SHOP\",\r\n//         email: \"shop@ccbm.sn\",\r\n//         tagline: \"Votre boutique pour vos matériels électroménéger\",\r\n//         phoneNumber: \"+221 70 922 17 75\",\r\n//         postalAddress: \"Avenue Lamine Gueye,x Rue Marchand,Dakar-Senegal\",\r\n//         logoURL: \"https://www.ccbmshop.sn/logo_192.png\",\r\n//         websiteURL: \"https://www.ccbmshop.sn/\",\r\n//       })\r\n\r\n//       setState((prev) => ({\r\n//         ...prev,\r\n//         setup: paydunyaSetup,\r\n//         store: store,\r\n//       }))\r\n//     } catch (error) {\r\n//       console.error(\"Erreur d'initialisation Paydunya:\", error)\r\n//       setState((prev) => ({\r\n//         ...prev,\r\n//         error: \"Erreur d'initialisation du service de paiement\",\r\n//       }))\r\n//       toast.error(\"Erreur d'initialisation du service de paiement\")\r\n//     }\r\n//   }, [])\r\n\r\n//   // Générer un ID de transaction unique\r\n//   const generateTransactionId = useCallback(() => {\r\n//     const { type_sale } = order\r\n//     let transactionId = `${user.id}-${idOrder}-${totalAmount}-${order.name}-${type_sale}`\r\n\r\n//     if (type_sale === \"order\" && order.payment_mode === \"echelonne\") {\r\n//       transactionId += `-${new Date().getTime().toString()}`\r\n//     } else if (type_sale === \"preorder\") {\r\n//       const paymentStep = !order.first_payment_state ? \"1\" : !order.second_payment_state ? \"2\" : \"3\"\r\n//       transactionId += `-${paymentStep}`\r\n//     } else if (type_sale === \"creditorder\") {\r\n//       const paymentStep = !order.first_payment_state\r\n//         ? \"1\"\r\n//         : !order.second_payment_state\r\n//           ? \"2\"\r\n//           : !order.third_payment_state\r\n//             ? \"3\"\r\n//             : \"4\"\r\n//       transactionId += `-${paymentStep}`\r\n//     }\r\n\r\n//     return transactionId\r\n//   }, [order, user.id, idOrder, totalAmount])\r\n\r\n//   // Créer la facture Paydunya\r\n//   const createInvoice = useCallback(() => {\r\n//     const { setup, store } = state\r\n//     if (!setup || !store) return null\r\n\r\n//     const invoice = new CheckoutInvoice(setup, store)\r\n\r\n//     // Ajouter les articles\r\n//     order.order_lines.forEach((article) => {\r\n//       invoice.addItem(article.product_name, article.product_uom_qty, article.price_unit, article.price_subtotal)\r\n//     })\r\n\r\n//     // Configurer le montant et la description\r\n//     invoice.totalAmount = Math.ceil(totalAmount)\r\n\r\n//     // Description selon le type de commande\r\n//     if (order.type_sale === \"order\") {\r\n//       if (order.payment_mode === \"echelonne\") {\r\n//         invoice.description = `Paiement d'avance de ${formatPrice(Math.ceil(totalAmount))} pour la commande ${order.name}`\r\n//       } else {\r\n//         invoice.description = `Paiement de ${formatPrice(Math.ceil(totalAmount))} pour la commande ${order.name}`\r\n//       }\r\n//     } else if (order.type_sale === \"preorder\") {\r\n//       if (order.amount_residual > 0) {\r\n//         invoice.description = `Paiement de ${formatPrice(Math.ceil(totalAmount))} pour la précommande ${order.name} avec un montant total restant de ${order.amount_total - totalAmount}`\r\n//       } else {\r\n//         invoice.description = `Paiement de ${formatPrice(Math.ceil(totalAmount))} pour la précommande ${order.name}`\r\n//       }\r\n//     } else if (order.type_sale === \"creditorder\") {\r\n//       if (order.amount_residual > 0) {\r\n//         invoice.description = `Paiement de ${formatPrice(Math.ceil(totalAmount))} pour le crédit ${order.name} avec un montant total restant de ${order.amount_total - totalAmount}`\r\n//       } else {\r\n//         invoice.description = `Paiement de ${formatPrice(Math.ceil(totalAmount))} pour le crédit ${order.name}`\r\n//       }\r\n//     }\r\n\r\n//     // URLs de callback\r\n//     invoice.callbackURL = \"https://orbitcity.odoo.com/api/facture/paydunya\"\r\n//     invoice.returnURL = `http://localhost:5173/payment-state`\r\n\r\n//     return invoice\r\n//   }, [state, order, totalAmount])\r\n\r\n//   // Soumettre le paiement\r\n//   const handleSubmit = async (event) => {\r\n//     event.preventDefault()\r\n\r\n//     setState((prev) => ({ ...prev, isLoading: true, error: null }))\r\n\r\n//     try {\r\n//       if (state.setup && state.store && totalAmount > 0) {\r\n//         const invoice = createInvoice()\r\n//         if (!invoice) {\r\n//           throw new Error(\"Impossible de créer la facture\")\r\n//         }\r\n\r\n//         // Créer la facture sur Paydunya\r\n//         await invoice.create()\r\n\r\n//         // Tracking analytics\r\n//         trackPurchase(\r\n//           idOrder,\r\n//           totalAmount,\r\n//           order.order_lines.map((item) => ({\r\n//             name: item.product_name,\r\n//             price: item.price_unit,\r\n//             quantity: item.product_uom_qty,\r\n//           })),\r\n//         )\r\n\r\n//         // Générer l'ID de transaction\r\n//         const transactionId = generateTransactionId()\r\n\r\n//         // Préparer les données de paiement\r\n//         const paymentData = {\r\n//           transaction_id: transactionId,\r\n//           amount: totalAmount,\r\n//           order_id: idOrder,\r\n//           order_type: order.type_sale,\r\n//           order_name: order.name,\r\n//           partner_id: user.id,\r\n//           payment_token: invoice.token,\r\n//           payment_state: invoice.status,\r\n//         }\r\n\r\n//         // Enregistrer les détails du paiement\r\n//         const response = await PaymentService.setPaymentDetails(paymentData)\r\n\r\n//         // Stocker les informations dans localStorage\r\n//         localStorage.setItem(\"urlOrderPayment\", invoice.url)\r\n//         localStorage.setItem(\"statusOrderPayment\", invoice.status)\r\n//         localStorage.setItem(\"tokenOrderPayment\", invoice.token)\r\n//         localStorage.setItem(\"idDataPayment\", response.id)\r\n//         localStorage.setItem(\"idOrderPayment\", idOrder)\r\n//         localStorage.setItem(\"montant\", totalAmount)\r\n//         localStorage.setItem(\"responseTextOrderPayment\", invoice.responseText)\r\n\r\n//         // Mettre à jour l'état avec la facture\r\n//         setState((prev) => ({ ...prev, facture: invoice }))\r\n\r\n//         // Afficher un message de succès\r\n//         toast.success(\"Merci de passer au paiement sur Paydunya\", {\r\n//           position: \"top-center\",\r\n//           autoClose: 2000,\r\n//         })\r\n//       } else {\r\n//         throw new Error(\"Configuration de paiement incomplète\")\r\n//       }\r\n//     } catch (error) {\r\n//       console.error(\"Erreur de paiement:\", error)\r\n//       setState((prev) => ({ ...prev, error: error.message }))\r\n//       toast.error(`Erreur de paiement: ${error.message}`, {\r\n//         position: \"top-center\",\r\n//         autoClose: 5000,\r\n//       })\r\n//     } finally {\r\n//       setState((prev) => ({ ...prev, isLoading: false }))\r\n//     }\r\n//   }\r\n\r\n//   // Ouvrir la page de paiement Paydunya\r\n//   const handleOpenPayment = (e) => {\r\n//     e.preventDefault()\r\n\r\n//     if (state.facture?.url) {\r\n//       // Ouvrir l'URL de paiement dans un nouvel onglet\r\n//       window.open(state.facture.url, \"_blank\", \"noopener,noreferrer\")\r\n\r\n//       // Fermer la modal\r\n//       setState((prev) => ({ ...prev, openModal: false }))\r\n\r\n//       // Rediriger vers la page appropriée\r\n//       if (order.type_sale === \"order\") {\r\n//         navigate(`/commandes/${idOrder}/détails`)\r\n//       } else if (order.type_sale === \"preorder\") {\r\n//         navigate(`/profile#preorder`)\r\n//       } else if (order.type_sale === \"creditorder\") {\r\n//         navigate(`/profile#commandes-a-credit`)\r\n//       }\r\n//     }\r\n//   }\r\n\r\n//   return (\r\n//     <Modal size=\"xl\" className=\"h-auto\" show={state.openModal} popup onClose={onClose}>\r\n//       <Modal.Header />\r\n//       <Modal.Body>\r\n//         <div className=\"fixed inset-0 p-4 flex flex-wrap justify-center items-center w-full h-full z-[1000] before:fixed before:inset-0 before:w-full before:h-full before:bg-[rgba(0,0,0,0.5)] overflow-auto font-[sans-serif]\">\r\n//           <div className=\"w-full max-w-lg bg-white shadow-lg rounded-lg p-8 relative\">\r\n//             <div className=\"flex items-start border-b border-gray-300 pb-4\">\r\n//               <div className=\"flex-1\">\r\n//                 <h3 className=\"text-gray-800 text-xl font-bold\">\r\n//                   Paiement{\" \"}\r\n//                   {order.type_sale === \"order\"\r\n//                     ? \"Commande\"\r\n//                     : order.type_sale === \"preorder\"\r\n//                       ? \"Pré Commande\"\r\n//                       : \"Commande à crédit\"}{\" \"}\r\n//                 </h3>\r\n//                 <p className=\"text-gray-600 text-sm mt-1\">Résumé détaillé de votre commande.</p>\r\n//               </div>\r\n\r\n//               <CircleX onClick={onClose} className=\"cursor-pointer hover:text-red-500 hover:scale-150 duration-300\" />\r\n//             </div>\r\n\r\n//             {state.error && (\r\n//               <div className=\"my-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md\">{state.error}</div>\r\n//             )}\r\n\r\n//             {order && (\r\n//               <div className=\"my-8\">\r\n//                 <table className=\"w-full\">\r\n//                   <thead>\r\n//                     <tr>\r\n//                       <th className=\"text-left text-gray-800 text-sm py-2\">Nom de la commande :</th>\r\n//                       <th className=\"text-right text-gray-800 text-sm py-2\">{order.name}</th>\r\n//                     </tr>\r\n//                   </thead>\r\n//                 </table>\r\n\r\n//                 <table className=\"w-full\">\r\n//                   <thead>\r\n//                     <tr>\r\n//                       <th className=\"text-left text-gray-800 text-sm py-2\">Nom produit</th>\r\n//                       <th className=\"text-right text-gray-800 text-sm py-2\">Prix total</th>\r\n//                     </tr>\r\n//                   </thead>\r\n//                   <tbody>\r\n//                     {order.order_lines.map((article, index) => (\r\n//                       <tr key={index}>\r\n//                         <td className=\"text-left text-gray-800 text-sm py-2\">\r\n//                           {article.product_name} ({article.product_uom_qty})\r\n//                         </td>\r\n//                         <td className=\"text-right text-gray-800 text-sm py-2 font-medium\">\r\n//                           {formatPrice(article.price_total)}\r\n//                         </td>\r\n//                       </tr>\r\n//                     ))}\r\n//                   </tbody>\r\n//                 </table>\r\n\r\n//                 <table className=\"w-full mt-4\">\r\n//                   <thead>\r\n//                     <tr>\r\n//                       <th className=\"text-left text-gray-800 text-sm py-2\">Total Commande (en FCFA) :</th>\r\n//                       <th className=\"text-right text-gray-800 text-sm py-2\">\r\n//                         {formatPrice(Math.ceil(order.amount_total))}\r\n//                       </th>\r\n//                     </tr>\r\n//                     {order.payment_mode === \"echelonne\" && (\r\n//                       <tr>\r\n//                         <th className=\"text-left text-gray-800 text-sm py-2\">Total à payer (en FCFA) :</th>\r\n//                         <th className=\"text-right text-gray-800 text-sm py-2\">{formatPrice(Math.ceil(totalAmount))}</th>\r\n//                       </tr>\r\n//                     )}\r\n//                   </thead>\r\n//                 </table>\r\n\r\n//                 <div className=\"flex max-sm:flex-col items-center gap-4 mt-8\">\r\n//                   {!state.facture ? (\r\n//                     <Button\r\n//                       onClick={handleSubmit}\r\n//                       disabled={state.isLoading}\r\n//                       pill\r\n//                       className=\"rounded-lg px-5 py-2.5 font-medium w-full hover:bg-red-500 hover:text-white text-xl\"\r\n//                     >\r\n//                       {state.isLoading ? (\r\n//                         <>\r\n//                           <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n//                           <p>Validation</p>\r\n//                         </>\r\n//                       ) : (\r\n//                         \"Valider\"\r\n//                       )}\r\n//                     </Button>\r\n//                   ) : (\r\n//                     <Button\r\n//                       onClick={handleOpenPayment}\r\n//                       color=\"success\"\r\n//                       pill\r\n//                       className=\"rounded-lg px-5 py-2.5 font-medium w-full hover:bg-green-600 hover:text-white text-xl\"\r\n//                     >\r\n//                       Passer au paiement\r\n//                     </Button>\r\n//                   )}\r\n//                 </div>\r\n//               </div>\r\n//             )}\r\n//           </div>\r\n//         </div>\r\n//       </Modal.Body>\r\n//     </Modal>\r\n//   )\r\n// }\r\n\r\n// export default PaydunyaModalService\r\n","/* eslint-disable no-unused-vars */\nimport { useNavigate, useParams } from \"react-router-dom\";\n\nimport PageTitle from \"../Helpers/PageTitle\";\nimport Layout from \"../Partials/Layout\";\nimport { useEffect, useState } from \"react\";\nimport PaiementService from \"../../services/paimentService\";\n\nimport formatDate from \"../../utils/date-format\";\nimport formatPrice from \"../../utils/formatPrice\";\nimport PrecommandeService from \"../../services/precommandeService\";\nimport { Button, Label, TextInput } from \"flowbite-react\";\nimport { Loader, Loader2 } from \"lucide-react\";\nimport { toast } from \"react-toastify\";\nimport PaydunyaModalService from \"../../services/PaydunyaModalService\";\nimport SEOHeader from \"../Partials/Headers/HeaderOne/SEOHeader\";\nimport { useAuthContext } from \"../../contexts/useAuthContext\";\nexport default function PreOrderPage() {\n  // const { state } = useLocation();\n  const { id } = useParams();\n  const { user } = useAuthContext();\n  const navigate = useNavigate();\n  const [precommande, setPrecommande] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [numpayment, setNumPayment] = useState(0);\n  const [pricepayment, setPricePayment] = useState(null);\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\n  const [montantAPayer, setMontantAPayer] = useState(0);\n  const [errorMontantAPayer, setErrorMontantAPayer] = useState(\"\");\n  const [paymentDetails, setPaymentDetails] = useState(null);\n  const [stateButton, setStateButton] = useState(false);\n  console.log(id);\n  useEffect(() => {\n    let isMounted = true;\n    const fetchModels = async () => {\n      setIsLoading(true);\n      try {\n        const data = await PrecommandeService.getPreCommandeById(user.id, id);\n        if (isMounted) {\n          setPrecommande(data);\n          console.log(data)\n          const responsePaymentDetails =\n            await PaiementService.getPaymentDetailsByIdOrder(data.id);\n          setPaymentDetails(responsePaymentDetails);\n        }\n      } catch (error) {\n        console.error(\"Erreur lors de la récupération des modèles\", error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchModels();\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    if (precommande) {\n      const shouldDisableButton =\n        (precommande.first_payment_state && montantAPayer < 1000) ||\n        (!precommande.first_payment_state &&\n          montantAPayer < precommande.first_payment_amount) ||\n        isLoading;\n\n      setStateButton(shouldDisableButton);\n    }\n  }, [precommande, montantAPayer, isLoading]);\n\n  const handleOpenInvoice = (url) => {\n    if (url) {\n      window.open(url, \"_blank\", 'noopener,noreferrer');\n    }\n  };\n\n  const handleVerifyPayment = async (e, payment) => {\n    console.log(payment)\n\n    try {\n      const resultaPayment = await PaiementService.confirmInvoice(payment.payment_token);\n\n      if (resultaPayment.response_code === \"00\" && resultaPayment.status === \"completed\") {\n        const url_facture = resultaPayment.receipt_url;\n        let name = resultaPayment.customer.name;\n        let email = resultaPayment.customer.email;\n        let phone = resultaPayment.customer.phone;\n        let token_status = true\n        const responsePaymentDetails =\n          await PaiementService.updatePaymentDetails(\n            payment.id, resultaPayment.status, url_facture,\n            name, email, phone, token_status);\n        if (responsePaymentDetails) {\n\n          try {\n\n            const reponse = await PaiementService.createPrecommandePaimentMontant(\n              payment.order_id,\n              payment.amount,\n              payment.payment_token\n            );\n            if (reponse) {\n\n              toast.success(\"Paiement validé avec succès\", {\n                position: \"top-center\",\n                autoClose: 5000,\n                hideProgressBar: false,\n                closeOnClick: true,\n                pauseOnHover: true,\n                draggable: true,\n                progress: undefined,\n              });\n            }\n          } catch (error) {\n            console.log(error)\n          } finally {\n            setIsLoading(false);\n          }\n        }\n      } else {\n        toast.error(\"Vérification du paiement echouée\", {\n          position: \"top-center\",\n          autoClose: 5000,\n        });\n      }\n    } catch (error) {\n      console.error(\n        \"Erreur lors de la confirmation de l'invoice :\",\n        error.message\n      );\n    } finally {\n      setIsLoading(false);\n    }\n  }\n  const validerPaimentMontant = async (e, montantAPayer) => {\n    e.preventDefault();\n    if (montantAPayer < 1000) {\n      toast.warning(\"Le Montant doit être strictement supérieur à 1000 F CFA\", {\n        position: \"top-center\",\n        autoClose: 5000,\n      });\n    } else {\n      setShowPaymentModal(true);\n      // console.log(\"show modal\");\n    }\n    console.log(montantAPayer, precommande.id);\n  };\n\n\n  const handlePay = async () => {\n    console.log(numpayment, pricepayment);\n  };\n\n  return (\n\n    <>\n      <SEOHeader\n        title=\"CCBM Shop | Détails Précommande\"\n        description=\"Découvrez les meilleures offres sur CCBM Shop, votre destination privilégiée pour l'électroménager de qualité. Explorez nos produits allant des réfrigérateurs aux téléviseurs intelligents, et profitez de promotions exclusives !\"\n        keywords=\"électroménager, boutique en ligne d'électroménager, CCBM Shop, ccbme, appareils électroménagers à prix réduits, smart TV, réfrigérateurs modernes, climatiseurs efficaces, promotions électroménager\"\n      />\n      <Layout childrenClasses=\"pt-0 pb-0\">\n        <div className=\"checkout-page-wrapper w-full bg-white pb-[60px]\">\n          <div className=\"w-full mb-5\">\n            <PageTitle\n              title=\"Détails Pré Commande\"\n              breadcrumb={[\n                { name: \"Accueil\", path: \"/\" },\n                // { name: \"Précommandes\", path: \"/profile#preorder\" },\n                { name: \"Précommandes\", path: \"/profile#preorder\" },\n                { name: \"Détails Précommande \" },\n              ]}\n            />\n          </div>\n          {isLoading && (\n            <div className=\"flex justify-center items-center w-full h-full\">\n              <Loader size={60} className=\"animate-spin\" />\n            </div>\n          )}\n          {precommande && (\n            <div className=\"checkout-main-content w-full\">\n              <div className=\"container-x mx-auto\">\n                <div className=\"w-full sm:mb-10 mb-5\">\n\n                  <div className=\"sm:flex sm:space-x-[18px] s\">\n                    <div className=\"sm:w-1/3 w-full mb-5 h-[70px]\">\n\n                      <div className=\"w-full h-full bg-[#F6F6F6] text-qblack flex justify-center items-center\">\n                        <span className=\"text-[15px] font-medium\">\n                          N°Précommande <span>{precommande.name}</span>\n                        </span>\n                      </div>\n\n                    </div>\n                    <div className=\" sm:w-1/3  flex-1 h-[70px]\">\n                      <div className=\"w-full h-full bg-[#F6F6F6] text-qblack flex justify-center items-center\">\n                        <span className=\"text-[15px] font-medium\">\n                          Paiement :{\" \"}\n                          {precommande.advance_payment_status === \"not_paid\" && (\n                            <span className=\"text-red-500\">Non Payé</span>\n                          )}\n                          {precommande.advance_payment_status === \"paid\" && (\n                            <span className=\"text-green-500\"> Payé </span>\n                          )}\n                          {precommande.advance_payment_status === \"partial\" && (\n                            <span className=\"text-yellow-500\">\n                              {\" \"}\n                              Partiellement Payé\n                            </span>\n                          )}\n                        </span>\n                      </div>\n                    </div>\n\n                    <div className=\"sm:w-1/3 flex-1 h-[70px]\">\n                      <div className=\"w-full h-full bg-[#F6F6F6] text-qblack flex justify-center items-center\">\n                        <span className=\"text-[15px] font-medium\">\n                          Statut :{\" \"}\n                          {precommande.state == \"sale\" && <span className=\"text-green-500\" > Validée </span>}\n                          {precommande.state == \"to_delivered\" && <span className=\"text-yellow-500\" > En cours de livraison </span>}\n                          {precommande.state == \"delivered\" && <span className=\"text-green-600\" > Livrée </span>}\n                          {precommande.state != \"delivered\" && precommande.state != \"sale\" && precommande.state != \"to_delivered\" && <span className=\"text-gray-500\" > Non validé </span>}\n                        </span>\n                      </div>\n                    </div>\n\n                  </div>\n                  <div className=\"flex flex-col sm:flex-row sm:space-x-[18px] space-y-5 sm:space-y-0 mb-5\">\n                    <div className=\"w-full sm:w-1/2 h-auto sm:h-[70px]\">\n                      <div className=\"w-full h-full bg-[#F6F6F6] text-qblack flex flex-col sm:flex-row justify-center items-center p-3 sm:p-0\">\n                        <strong> Date Précommande </strong>\n                        <div className=\"flex flex-col sm:flex-row items-center mt-2 sm:mt-0 sm:ml-2\">\n                          <span className=\"mt-1 sm:mt-0 sm:ml-2 capitalize\">{formatDate(precommande.date_order)}</span>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"w-full sm:w-1/2 h-auto sm:h-[70px]\">\n                      <div className=\"w-full h-full bg-[#F6F6F6] text-qblack flex flex-col sm:flex-row justify-center items-center p-3 sm:p-0\">\n                        <strong>Date de livraison</strong>\n                        <div className=\"flex flex-col sm:flex-row items-center mt-2 sm:mt-0 sm:ml-2\">\n\n                          <span className=\"mt-1 sm:mt-0 sm:ml-2 capitalize\">{formatDate(precommande.commitment_date)}</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"sm:flex sm:space-x-[18px] s\">\n                    <div className=\"sm:w-1/2 w-full mb-5 h-[70px]\">\n\n                      <div className=\"w-full h-full bg-[#F6F6F6] text-qblack flex flex-col sm:flex-row justify-center items-center p-3 sm:p-0\">\n                        <strong>  Total Payé &nbsp; </strong>\n                        <div className=\"flex flex-col sm:flex-row items-center mt-2 sm:mt-0 sm:ml-2\">\n                          <span className=\"mt-1 sm:mt-0 sm:ml-2 capitalize\">\n                            {formatPrice(\n                              precommande.amount_total - precommande.amount_residual\n                            )}\n                          </span>\n                        </div>\n                      </div>\n\n                    </div>\n                    <div className=\"flex-1 h-[70px]\">\n\n\n                      <div className=\"w-full h-full bg-[#F6F6F6] text-qblack flex flex-col sm:flex-row justify-center items-center p-3 sm:p-0\">\n                        <strong>     Total Restant &nbsp; </strong>\n                        <div className=\"flex flex-col sm:flex-row items-center mt-2 sm:mt-0 sm:ml-2\">\n                          <span className=\"mt-1 sm:mt-0 sm:ml-2 capitalize\">\n                            {formatPrice(precommande.amount_residual)}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n\n\n                  {paymentDetails && paymentDetails.length > 0 && (\n                    <>\n\n                      <div className=\"w-full max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n                        <h1 className=\"text-2xl sm:text-3xl text-qblack font-medium mb-5 text-center\">\n                          Récapitulatif Paiement\n                        </h1>\n                        <div className=\"w-full px-4 sm:px-10 py-6 sm:py-[30px] border border-[#EDEDED] rounded-lg\">\n                          <div className=\"mb-6\">\n                            <p className=\"text-sm sm:text-base font-medium text-qblack uppercase mb-2\">\n                              Détails Paiements\n                            </p>\n                            <div className=\"w-full h-[1px] bg-[#EDEDED]\"></div>\n                          </div>\n                          <div className=\"overflow-x-auto\">\n                            <table className=\"min-w-full bg-white\">\n                              <thead className=\"hidden sm:table-header-group\">\n                                <tr>\n                                  <th className=\"px-4 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider\">\n                                    Prénom & Nom\n                                  </th>\n                                  <th className=\"px-4 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider\">\n                                    Téléphone\n                                  </th>\n                                  <th className=\"px-4 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider\">\n                                    Email\n                                  </th>\n                                  <th className=\"px-4 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider\">\n                                    Montant Payé\n                                  </th>\n                                  <th className=\"px-4 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider\">\n                                    Facture\n                                  </th>\n                                </tr>\n                              </thead>\n                              <tbody>\n                                {paymentDetails.map((payment, index) =>\n                                  payment.payment_state === 'completed' && (\n                                    <tr key={index} className=\"sm:bg-white flex flex-col sm:table-row mb-6 sm:mb-0\">\n                                      <td className=\"px-4 py-3 sm:border-b border-gray-200\">\n                                        <div className=\"flex items-center justify-between sm:table-cell\">\n                                          <span className=\"sm:hidden font-medium\">Prénom & Nom:</span>\n                                          <span className=\"text-sm leading-5 text-gray-900\">{payment.customer_name}</span>\n                                        </div>\n                                      </td>\n                                      <td className=\"px-4 py-3 sm:border-b border-gray-200\">\n                                        <div className=\"flex items-center justify-between sm:table-cell\">\n                                          <span className=\"sm:hidden font-medium\">Téléphone:</span>\n                                          <span className=\"text-sm leading-5 text-gray-900\">{payment.customer_phone}</span>\n                                        </div>\n                                      </td>\n                                      <td className=\"px-4 py-3 sm:border-b border-gray-200\">\n                                        <div className=\"flex items-center justify-between sm:table-cell\">\n                                          <span className=\"sm:hidden font-medium\">Email:</span>\n                                          <span className=\"text-sm leading-5 text-gray-900\">{payment.customer_email}</span>\n                                        </div>\n                                      </td>\n                                      <td className=\"px-4 py-3 sm:border-b border-gray-200\">\n                                        <div className=\"flex items-center justify-between sm:table-cell\">\n                                          <span className=\"sm:hidden font-medium\">Montant Payé:</span>\n                                          <span className=\"text-sm leading-5 text-gray-900\">{formatPrice(payment.amount)}</span>\n                                        </div>\n                                      </td>\n                                      <td className=\"px-4 py-3 sm:border-b border-gray-200\">\n                                        <div className=\"flex items-center justify-between sm:table-cell\">\n                                          <span className=\"sm:hidden font-medium\">Facture:</span>\n                                          {!payment.token_status ? (\n                                            <button\n                                              className=\"text-sm leading-5 text-blue-600 underline\"\n                                              onClick={(e) => handleVerifyPayment(e, payment)}\n                                            >\n                                              Vérifier le paiement\n                                            </button>\n                                          ) : (\n                                            <button\n                                              className=\"text-sm leading-5 text-blue-600 underline\"\n                                              onClick={() => handleOpenInvoice(payment.url_facture)}\n                                            >\n                                              Ouvrir la facture\n                                            </button>\n                                          )}\n                                        </div>\n                                      </td>\n                                    </tr>\n                                  )\n                                )}\n                              </tbody>\n                            </table>\n                          </div>\n                        </div>\n                      </div>\n                    </>\n                  )}\n                </div>\n\n\n                <div className=\"w-full max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n                  <h1 className=\"text-2xl sm:text-3xl text-qblack font-medium mb-5 text-center\">\n                    Récapitulatif de la commande\n                  </h1>\n                  <div className=\"w-full p-4 sm:p-6 border border-[#EDEDED] rounded-lg shadow-sm\">\n                    <div className=\"sub-total mb-6\">\n                      <div className=\" flex justify-between mb-5\">\n                        <p className=\"text-[13px] font-medium text-qblack uppercase\">\n                          Produit\n                        </p>\n                        <p className=\"text-[13px] font-medium text-qblack uppercase\">\n                          total\n                        </p>\n                      </div>\n                      <div className=\"w-full h-[1px] bg-[#EDEDED]\"></div>\n                    </div>\n                    <div className=\"product-list w-full mb-[30px]\">\n                      <ul className=\"flex flex-col space-y-5\">\n                        {precommande.order_lines.map((produit, index) => (\n                          <>\n                            <li key={index}>\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"text-[15px] text-qblack mb-2.5\">\n                                    {produit.product_name}\n                                    <sup className=\"text-[13px] text-qgray ml-2 mt-2\">\n                                      x {produit.product_uom_qty}\n                                    </sup>\n                                  </h4>\n                                  <p className=\"text-[13px] text-qgray\">\n                                    {produit.description}\n                                  </p>\n                                </div>\n                                <div>\n                                  <span className=\"text-[15px] text-qblack font-medium\">\n                                    {formatPrice(produit.price_total)}\n                                  </span>\n                                </div>\n                              </div>\n                            </li>\n                          </>\n                        ))}\n                      </ul>\n                    </div>\n                    <div className=\"w-full h-[1px] bg-[#EDEDED]\"></div>\n\n                    <div className=\"space-y-4\">\n\n                      <div className=\"border-t pt-4 space-y-2\">\n                        {[\n                          { label: \"Montant Total\", value: formatPrice(precommande.amount_total) },\n                          { label: \"Premier Tranche\", value: formatPrice(precommande.first_payment_amount), date: precommande.first_payment_date, state: precommande.first_payment_state },\n                          { label: \"Deuxieme Tranche\", value: formatPrice(precommande.second_payment_amount), date: precommande.second_payment_date, state: precommande.second_payment_state },\n                          { label: \"Troisieme Tranche\", value: formatPrice(precommande.third_payment_amount), date: precommande.third_payment_date, state: precommande.third_payment_state },\n                        ].map((item, index) => (\n                          <dl key={index} className=\"flex flex-wrap items-center justify-between gap-2\">\n                            <dt className=\"text-sm text-gray-500\">{item.label}</dt>\n                            {item.date && (\n                              <dd className={`text-xs sm:text-sm font-medium ${item.state ? \"text-green-500\" : \"text-red-500\"}`}>\n                                {item.date}\n                              </dd>\n                            )}\n                            <dd className={`text-sm sm:text-base font-medium ${item.state ? \"text-green-500\" : (item.date ? \"text-red-500\" : \"text-gray-900\")}`}>\n                              {item.value}\n                            </dd>\n                          </dl>\n                        ))}\n                      </div>\n                      <dl className=\"flex items-center justify-between gap-4 border-t border-gray-200 pt-2 dark:border-gray-700\">\n                        <dt className=\"text-lg font-bold text-gray-900 dark:text-white\">\n                          Total à payer\n                        </dt>\n                        <dd className=\"text-lg font-bold text-gray-900 dark:text-white\">\n                          {formatPrice(precommande.amount_total)}\n                        </dd>\n                      </dl>\n                      {precommande.amount_residual >= 0 && (\n                        <dl className=\"flex items-center justify-between gap-4 border-t border-gray-200 pt-2 dark:border-gray-700\">\n                          <dt className=\"text-lg font-bold text-gray-900 dark:text-white\">\n                            Total Payé\n                          </dt>\n                          <dd className=\"text-lg font-bold text-green-500 dark:text-white\">\n                            {formatPrice(\n                              precommande.amount_total -\n                              precommande.amount_residual\n                            )}\n                          </dd>\n                        </dl>\n                      )}\n                      {precommande.amount_residual >= 0 && (\n                        <dl className=\"flex items-center justify-between gap-4 border-t border-gray-200 pt-2 dark:border-gray-700\">\n                          <dt className=\"text-lg font-bold text-gray-900 dark:text-white\">\n                            Total Restant\n                          </dt>\n                          <dd className=\"text-lg font-bold text-gray-900 dark:text-white\">\n                            {formatPrice(precommande.amount_residual)}\n                          </dd>\n                        </dl>\n                      )}\n                    </div>\n\n                    <div className=\"w-full\" >\n\n                      {(precommande.advance_payment_status === \"not_paid\" ||\n                        precommande.advance_payment_status === \"partial\") && (\n                          <>\n                            <div className=\"input-item mb-5\">\n                              <div className=\"mb-2 inline-block\">\n                                <Label\n                                  htmlFor=\"montant\"\n                                  value=\"Montant à payer\"\n                                />\n                              </div>\n\n                              <TextInput\n                                id=\"montant\"\n                                placeholder=\"1000\"\n                                label=\"Montant*\"\n                                name=\"montantAPayer\"\n                                type=\"number\"\n                                value={montantAPayer}\n                                max={precommande.amount_residual}\n                                min={\n                                  !precommande.first_payment_state\n                                    ? precommande.first_payment_amount\n                                    : 1000\n                                }\n                                onChange={(e) => {\n                                  const value = e.target.value;\n                                  if (value <= precommande.amount_residual) {\n                                    setMontantAPayer(value);\n                                  }\n                                  if (\n                                    !precommande.first_payment_state &&\n                                    value < precommande.first_payment_amount\n                                  ) {\n                                    setErrorMontantAPayer(\n                                      `Le montant entré doit être supérieur ou égal à la première tranche de ${formatPrice(\n                                        precommande.first_payment_amount\n                                      )}.`\n                                    );\n                                  } else {\n                                    setErrorMontantAPayer(\"\");\n                                  }\n                                }}\n                                required\n                                className=\"invalid:border-red-500 invalid:text-red-600 focus:invalid:border-red-500 focus:invalid:ring-red-500\"\n                              />\n                              {errorMontantAPayer && (\n                                <p className=\"text-red-600\">\n                                  {errorMontantAPayer}\n                                </p>\n                              )}\n                            </div>\n\n                            {precommande && (\n                              <>\n                                {precommande.state !== \"sale\" &&\n                                  precommande.state !== \"draft\" ? (\n                                  <div className=\"flex justify-center items-center mt-2\">\n                                    <span className=\"text-lg font-medium text-red-500 dark:text-white\">\n                                      La précommande est annulée, vous ne pouvez\n                                      pas passer à la caisse.\n                                    </span>\n                                  </div>\n                                ) : (\n                                  <Button\n                                    type=\"submit\"\n                                    onClick={(e) =>\n                                      validerPaimentMontant(e, montantAPayer)\n                                    }\n                                    className=\"rounded-lg px-5 py-2.5 font-medium w-full hover:bg-red-500 hover:text-white text-xl\"\n                                    disabled={stateButton}\n                                  >\n                                    {isLoading && (\n                                      <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                                    )}\n                                    Passer à la caisse (\n                                    {formatPrice(montantAPayer)})\n                                  </Button>\n                                )}\n                              </>\n                            )}\n\n                            {showPaymentModal && precommande && (\n                              <PaydunyaModalService\n                                handlePay={handlePay}\n                                totalAmount={montantAPayer}\n                                onClose={() => setShowPaymentModal(false)}\n                                order={precommande}\n                                idOrder={precommande.id}\n                              />\n                            )}\n                          </>\n                        )}\n                      {precommande.advance_payment_status === \"paid\" && (\n                        <div className=\"flex justify-center items-center mt-2\">\n                          <span className=\"text-lg font-medium text-green-500 dark:text-white\">\n                            Votre paiement est déjà réglé\n                          </span>\n                        </div>\n                      )}\n                    </div>\n\n\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          )}\n          {!precommande && (\n            <>\n              <div className=\"flex justify-center items-center \">\n                <Loader className=\"animate-spin\"></Loader> Précommande non trouvée\n              </div>\n            </>\n          )}\n        </div>\n      </Layout></>\n  );\n}\n"],"names":["PaydunyaModalService","handlePay","totalAmount","onClose","order","idOrder","navigate","useNavigate","payment","setUserPayment","setOrder","setPaymentDetails","setTotalAmount","useContext","PaymentContext","user","useAuthContext","isLoading","setIsloading","useState","openModal","setOpenModal","setup","setSetup","store","setStore","facture","setFacture","useEffect","paydunyaSetup","paydunya","handleSubmit","event","invoice","CheckoutInvoice","article","formatPrice","trackPurchase","item","transaction","data","response","PaiementService","toast","error","e","handleClick","openInNewTab","jsxs","Modal","jsx","CircleX","Fragment","index","Button","Loader2","url","newWindow","PreOrderPage","id","useParams","precommande","setPrecommande","setIsLoading","numpayment","setNumPayment","pricepayment","setPricePayment","showPaymentModal","setShowPaymentModal","montantAPayer","setMontantAPayer","errorMontantAPayer","setErrorMontantAPayer","paymentDetails","stateButton","setStateButton","isMounted","PrecommandeService","responsePaymentDetails","shouldDisableButton","handleOpenInvoice","handleVerifyPayment","resultaPayment","url_facture","name","email","phone","validerPaimentMontant","SEOHeader","Layout","PageTitle","Loader","formatDate","produit","Label","TextInput","value"],"mappings":"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"}
var S=Object.defineProperty,F=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var y=(t,s,a)=>s in t?S(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,h=(t,s)=>{for(var a in s||(s={}))M.call(s,a)&&y(t,a,s[a]);if(N)for(var a of N(s))L.call(s,a)&&y(t,a,s[a]);return t},u=(t,s)=>F(t,k(s));import{b as c,j as e,I as q,J as I,e as E,f as R,u as $,k as A}from"./react-vendor-oXU13CxVON7vKjIB.js";import{c as w,S as B,L as P,B as O,h as U}from"./index-DxAeoNi_vcMUlDbs.js";import"./vendor-CztfEaG7C0izJ0f1.js";import"./ui-libs-DW48STyta0ayNJBW.js";import"./redux-BZdFRlKmMnL7MBoD.js";function z({className:t,filterToggle:s,updateUrlParams:a}){const{filters:i,updateFilters:o}=c.useContext(w),[l,n]=c.useState(i),[d,g]=c.useState({}),f=x=>{n(u(h({},l),{min:x[0],max:x[1]})),a(u(h({},l),{min:x[0],max:x[1]}))};return e.jsx("div",{className:`filter-widget w-full fixed lg:relative left-0 top-0 h-screen z-10 lg:h-auto overflow-y-scroll lg:overflow-y-auto bg-white px-6 pt-10 ${t||""} ${s?"block":"hidden lg:block"}`,children:e.jsxs("div",{className:"filter-subject-item pb-10 border-b border-qgray-border mt-10",children:[e.jsx("div",{className:"subject-title mb-[30px]",children:e.jsx("h1",{className:"text-black text-base font-500",children:"Échelle des prix"})}),e.jsx("div",{className:"price-range mb-5",children:e.jsx(q,{value:[i.min,i.max],onInput:f,min:1e3,max:5e6})}),e.jsxs("p",{className:"text-xs text-qblack font-400",children:["Prix (FCFA): ",i.min," - ",i.max]})]})})}const D=({currentPage:t,totalPages:s,onPageChange:a})=>{const i=()=>{const l=[];for(let n=Math.max(2,t-2);n<=Math.min(s-1,t+2);n++)l.push(n);return t-2>2&&l.unshift("..."),t+2<s-1&&l.push("..."),l.unshift(1),s!==1&&l.push(s),l};return e.jsx("nav",{className:"flex justify-center items-center mt-8 px-4","aria-label":"Pagination",children:e.jsxs("ul",{className:"flex flex-wrap justify-center items-center space-x-1 md:space-x-2",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>a(Math.max(1,t-1)),disabled:t===1,className:"p-2 rounded-full bg-gray-200 text-gray-700 hover:bg-qyellow disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Previous page",children:e.jsx(I,{className:"w-5 h-5"})})}),i().map((o,l)=>e.jsx("li",{children:typeof o=="number"?e.jsx("button",{onClick:()=>a(o),className:`hidden sm:block px-3 py-2 rounded ${t===o?"bg-bleu-logo text-white":"bg-gray-200 text-gray-700 hover:bg-qyellow"}`,"aria-current":t===o?"page":void 0,children:o}):e.jsx("span",{className:"hidden sm:block px-3 py-2",children:o})},l)),e.jsx("li",{className:"sm:hidden",children:e.jsxs("span",{className:"px-3 py-2 text-gray-700",children:[t," / ",s]})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>a(Math.min(s,t+1)),disabled:t===s,className:"p-2 rounded-full bg-gray-200 text-gray-700 hover:bg-qyellow disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Next page",children:e.jsx(E,{className:"w-5 h-5"})})})]})})};function Q(){const{updateFilters:t,filters:s,resetFilters:a,fetchProdcutsFlash:i,isLoadingProductFlash:o,currentProductsFlash:l,totalProductsFlash:n}=c.useContext(w),d=R(),g=$();c.useEffect(()=>{a();const r=new URLSearchParams(d.search),m={page:Number.parseInt(r.get("page"))||1,category:r.get("category")||"All",search:r.get("search")||"",min:Number.parseInt(r.get("min"))||1e3,max:Number.parseInt(r.get("max"))||5e6,limit:9};t(m),console.log(s),window.scrollTo({top:0,left:100,behavior:"smooth"})},[d.search,d.pathname,a,t]),c.useEffect(()=>{i()},[i]);const f=r=>{j(u(h({},s),{page:r}))},x=r=>{j({category:r||"All",page:1})},j=c.useCallback(r=>{const m=new URLSearchParams(d.search);Object.entries(r).forEach(([b,p])=>{p!=null&&p!==""?m.set(b,p.toString()):m.delete(b)}),g({search:m.toString()},{replace:!0})},[d.search,g]),v=(s.page-1)*s.limit+1,C=Math.min(s.page*s.limit,n);return e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"CCBM Shop | Promo Ramadan",description:"Découvrez les meilleures offres promotionnelles sur CCBM Shop, votre destination privilégiée pour l'électroménager de qualité à prix réduits.",keywords:"électroménager, promotions, offres spéciales, CCBM Shop, ccbme, appareils électroménagers à prix réduits"}),e.jsx(P,{children:e.jsx("div",{className:"products-page-wrapper w-full",children:e.jsxs("div",{className:"container-x mx-auto",children:[e.jsx(O,{}),e.jsxs("div",{className:"w-full lg:flex lg:space-x-[30px]",children:[e.jsx("div",{className:"lg:w-[270px]",children:e.jsx(z,{updateUrlParams:j,handleCategoryChange:x})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"products-sorting w-full bg-white flex flex-col md:flex-row justify-between p-[30px] mb-[40px]",children:e.jsxs("p",{className:"font-400 text-[13px]",children:[e.jsx("span",{className:"text-qgray",children:"Affichage"})," ",n>0?`${v}–${C} sur ${n} résultats`:"0 résultat"]})}),o?e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx(A,{className:"animate-spin"})," Chargement"]}):l.length===0?e.jsx("div",{className:"flex justify-center items-center",children:"Aucun produit en promotion trouvé"}):e.jsx("div",{className:"grid xl:grid-cols-3 grid-cols-2 gap-[30px]",children:l.map(r=>e.jsx(U,{datas:r},r.id))}),e.jsx(D,{currentPage:s.page,totalPages:Math.ceil(n/s.limit),onPageChange:f})]})]})]})})})]})}export{Q as default};

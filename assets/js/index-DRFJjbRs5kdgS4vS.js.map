{"version":3,"file":"index-DRFJjbRs5kdgS4vS.js","sources":["../../../orbit-city-final-dev/src/components/AllProductPage/ProductsFilter.jsx","../../../orbit-city-final-dev/src/components/AllProductPage/index.jsx"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\n/* eslint-disable react/prop-types */\r\n\r\nimport { useContext, useEffect, useState } from \"react\"\r\nimport RangeSlider from \"react-range-slider-input\"\r\nimport \"react-range-slider-input/dist/style.css\"\r\nimport { ProductContext } from \"../../Provider/ProductContext\"\r\nimport Categorieservice from \"../../services/CategorieService\"\r\nimport { useAuthContext } from \"../../contexts/useAuthContext\"\r\n\r\nexport default function ProductsFilter({ className, filterToggle, updateUrlParams, type = 3 }) {\r\n  const { filters, updateFilters } = useContext(ProductContext)\r\n\r\n  const { user } = useAuthContext()\r\n\r\n  const handleVolumeChange = (value) => {\r\n    updateFilters({ ...filters, min: value[0], max: value[1], page: 1 })\r\n    updateUrlParams({ ...filters, min: value[0], max: value[1], page: 1 })\r\n  }\r\n\r\n  const handleTypeFilterChange = (event) => {\r\n    const newType = event.target.value\r\n    updateFilters({ ...filters, productType: newType, page: 1 })\r\n    updateUrlParams({ ...filters, productType: newType, page: 1 })\r\n  }\r\n\r\n  const handleTagFilterChange = (event) => {\r\n    const newTag = event.target.value\r\n    updateFilters({ ...filters, tag: newTag, page: 1 })\r\n    updateUrlParams({ ...filters, tag: newTag, page: 1 })\r\n  }\r\n\r\n  const [tags, setTags] = useState([])\r\n  useEffect(() => {\r\n    const fetchTags = async () => {\r\n      try {\r\n        const data = await Categorieservice.getTags()\r\n        setTags(data)\r\n        console.log(data)\r\n      } catch (error) {\r\n        console.error(\"Erreur lors de la récupération des catégories\", error)\r\n      }\r\n    }\r\n    fetchTags()\r\n  }, [])\r\n\r\n  return (\r\n    <div\r\n      className={`filter-widget w-full fixed lg:relative left-0 top-0 h-screen z-10 lg:h-auto overflow-y-scroll lg:overflow-y-auto bg-white px-[30px] pt-[40px] ${className || \"\"\r\n        } ${filterToggle ? \"block\" : \"hidden lg:block\"}`}\r\n    >\r\n      {/* Filtre par type de produit */}\r\n      <div className=\"filter-subject-item pb-10 border-b border-qgray-border\">\r\n        <div className=\"subject-title mb-[20px]\">\r\n          <h1 className=\"text-black text-base font-500\">Type de produits</h1>\r\n        </div>\r\n        <div className=\"flex flex-col gap-3 text-sm text-qgray\">\r\n          <label className=\"flex items-center gap-2\">\r\n            <input\r\n              type=\"radio\"\r\n              value=\"All\"\r\n              name=\"productType\"\r\n              checked={filters.productType === \"All\"}\r\n              onChange={handleTypeFilterChange}\r\n            />\r\n            Tous les produits\r\n          </label>\r\n          <label className=\"flex items-center gap-2\">\r\n            <input\r\n              type=\"radio\"\r\n              value=\"promo\"\r\n              name=\"productType\"\r\n              checked={filters.productType === \"promo\"}\r\n              onChange={handleTypeFilterChange}\r\n            />\r\n            Produits en promo\r\n          </label>\r\n          {user && (\r\n\r\n            <label className=\"flex items-center gap-2\">\r\n              <input\r\n                type=\"radio\"\r\n                value=\"credit\"\r\n                name=\"productType\"\r\n                checked={filters.productType === \"credit\"}\r\n                onChange={handleTypeFilterChange}\r\n              />\r\n              Produits à crédit\r\n            </label>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n\r\n       <div className=\"filter-subject-item pb-10 border-b border-qgray-border mt-10\">\r\n        <div className=\"subject-title mb-[20px]\">\r\n          <h1 className=\"text-black text-base font-500\">Filtrer par tags</h1>\r\n        </div>\r\n        <div className=\"text-sm text-qgray\">\r\n          <select\r\n            className=\"w-full border border-qgray-border px-3 py-2 rounded\"\r\n            value={filters.tag || \"\"}\r\n            onChange={handleTagFilterChange}\r\n          >\r\n            <option value=\"\">Tous les tags</option>\r\n            {tags.map((tag) => (\r\n              <option key={tag.id} value={tag.slug || tag.name}>\r\n                {tag.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div> \r\n\r\n\r\n      {/* Échelle des prix */}\r\n      <div className=\"filter-subject-item pb-10 border-b border-qgray-border mt-10\">\r\n        <div className=\"subject-title mb-[30px]\">\r\n          <h1 className=\"text-black text-base font-500\">Échelle des prix</h1>\r\n        </div>\r\n        <div className=\"price-range mb-5\">\r\n          <RangeSlider value={[filters.min, filters.max]} onInput={handleVolumeChange} min={4000} max={5000000} />\r\n        </div>\r\n        <p className=\"text-xs text-qblack font-400\">\r\n          Prix (FCFA): {filters.min} - {filters.max}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n","/* eslint-disable no-unused-vars */\r\nimport { useCallback, useContext, useEffect } from \"react\"\r\nimport { useLocation, useNavigate } from \"react-router-dom\"\r\nimport BreadcrumbCom from \"../BreadcrumbCom\"\r\nimport ProductCardStyleOne from \"../Helpers/Cards/ProductCardStyleOne\"\r\nimport Layout from \"../Partials/Layout\"\r\nimport ProductsFilter from \"./ProductsFilter\"\r\nimport { Loader } from \"lucide-react\"\r\nimport SEOHeader from \"../Partials/Headers/HeaderOne/SEOHeader\"\r\nimport Pagination from \"./Pagination\"\r\nimport { ProductContext } from \"../../Provider/ProductContext\"\r\n\r\nexport default function AllProductPage() {\r\n  const { currentProducts, totalProducts, isLoadingProduct, fetchProducts, updateFilters, resetFilters, filters } =\r\n    useContext(ProductContext)\r\n\r\n  const location = useLocation()\r\n  const navigate = useNavigate()\r\n\r\n\r\n  useEffect(() => {\r\n    resetFilters()\r\n    const params = new URLSearchParams(location.search)\r\n    const newFilters = {\r\n      page: Number.parseInt(params.get(\"page\")) || 1,\r\n      category: params.get(\"category\") || \"All\",\r\n      search: params.get(\"search\") || \"\",\r\n      min: Number.parseInt(params.get(\"min\")) || 1000,\r\n      max: Number.parseInt(params.get(\"max\")) || 5000000,\r\n      limit: 9,\r\n      productType: params.get(\"productType\") || \"All\",\r\n      tag: params.get(\"tag\") || \"All\",\r\n    }\r\n\r\n    updateFilters(newFilters)\r\n    window.scrollTo({\r\n      top: 0,\r\n      left: 100,\r\n      behavior: \"smooth\",\r\n    })\r\n  }, [location.pathname, location.search, resetFilters, updateFilters])\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    fetchProducts()\r\n  }, [fetchProducts])\r\n\r\n\r\n  const startIndex = (filters.page - 1) * filters.limit + 1\r\n  const endIndex = Math.min(filters.page * filters.limit, totalProducts)\r\n\r\n  const handlePageChange = (pageNumber) => {\r\n    updateUrlParams({ ...filters, page: pageNumber })\r\n    window.scrollTo({\r\n      top: 0,\r\n      left: 100,\r\n      behavior: \"smooth\",\r\n    })\r\n  }\r\n\r\n  const handleSearchChange = (e) => {\r\n    const value = e.target.value\r\n    updateUrlParams({ ...filters, search: value, page: 1 })\r\n    window.scrollTo({\r\n      top: 0,\r\n      left: 100,\r\n      behavior: \"smooth\",\r\n    })\r\n  }\r\n\r\n\r\n  const handleCategoryChange = (categoryId) => {\r\n    updateUrlParams({ category: categoryId || \"All\", page: 1 })\r\n    window.scrollTo({\r\n      top: 0,\r\n      left: 100,\r\n      behavior: \"smooth\",\r\n    })\r\n  }\r\n\r\n\r\n  const updateUrlParams = useCallback(\r\n    (newFilters) => {\r\n      const params = new URLSearchParams(location.search)\r\n      Object.entries(newFilters).forEach(([key, value]) => {\r\n        if (value !== undefined && value !== null && value !== \"\") {\r\n          params.set(key, value.toString())\r\n        } else {\r\n          params.delete(key)\r\n        }\r\n      })\r\n      navigate({ search: params.toString() }, { replace: true })\r\n    },\r\n    [location.search, navigate],\r\n  )\r\n\r\n  return (\r\n    <>\r\n      <SEOHeader\r\n        title=\"CCBM Shop | Boutique\"\r\n        description=\"Découvrez les meilleures offres sur CCBM Shop, votre destination privilégiée pour l'électroménager de qualité.\"\r\n        keywords=\"électroménager, boutique en ligne d'électroménager, CCBM Shop, ccbme, appareils électroménagers à prix réduits\"\r\n      />\r\n      <Layout>\r\n        <div className=\"products-page-wrapper w-full\">\r\n          <div className=\"container-x mx-auto\">\r\n            <BreadcrumbCom />\r\n            <div className=\"w-full lg:flex lg:space-x-[30px]\">\r\n              <div className=\"lg:w-[270px]\">\r\n\r\n                <ProductsFilter\r\n                  handleCategoryChange={handleCategoryChange}\r\n                  updateUrlParams={updateUrlParams} />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <div className=\"products-sorting w-full bg-white flex flex-col md:flex-row justify-between p-[30px] mb-[40px]\">\r\n                  <p className=\"font-400 text-[13px]\">\r\n                    <span className=\"text-qgray\">Affichage</span>{\" \"}\r\n                    {totalProducts > 0 ? `${startIndex}–${endIndex} sur ${totalProducts} résultats` : \"0 résultat\"}\r\n                  </p>\r\n\r\n                </div>\r\n                {isLoadingProduct ? (\r\n                  <div className=\"flex justify-center items-center\">\r\n                    <Loader className=\"animate-spin\" /> Chargement\r\n                  </div>\r\n                ) : currentProducts.length === 0 ? (\r\n                  <div className=\"flex justify-center items-center\">Pas de produits disponible pour le moment</div>\r\n                ) : (\r\n                  <div className=\"grid xl:grid-cols-3 grid-cols-2 gap-[30px]\">\r\n                    {currentProducts.map((product) => (\r\n                      <ProductCardStyleOne key={product.id} datas={product} />\r\n                    ))}\r\n                  </div>\r\n                )}\r\n                <Pagination\r\n                  currentPage={filters.page}\r\n                  totalPages={Math.ceil(totalProducts / filters.limit)}\r\n                  onPageChange={handlePageChange}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Layout>\r\n    </>\r\n  )\r\n}\r\n\r\n"],"names":["ProductsFilter","className","filterToggle","updateUrlParams","type","filters","updateFilters","useContext","ProductContext","user","useAuthContext","handleVolumeChange","value","__spreadProps","__spreadValues","handleTypeFilterChange","event","newType","handleTagFilterChange","newTag","tags","setTags","useState","useEffect","data","Categorieservice","error","jsxs","jsx","tag","RangeSlider","AllProductPage","currentProducts","totalProducts","isLoadingProduct","fetchProducts","resetFilters","location","useLocation","navigate","useNavigate","params","newFilters","startIndex","endIndex","handlePageChange","pageNumber","handleCategoryChange","categoryId","useCallback","key","Fragment","SEOHeader","Layout","BreadcrumbCom","Loader","product","ProductCardStyleOne","Pagination"],"mappings":"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"}
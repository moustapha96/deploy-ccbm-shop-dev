{"version":3,"file":"paimentService-Zh_K-kXJs3Nag3D_.js","sources":["../../../orbit-city-final-dev/src/config/paymentConfig.jsx","../../../orbit-city-final-dev/src/services/paimentService.jsx"],"sourcesContent":["// src/config/paymentConfig.js\n\nconst paymentConfig = {\n  test: {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"PAYDUNYA-MASTER-KEY\": \"voFGVcul-uCsd-1sw5-wfGz-ukqScIQoOyDu\",\n      \"PAYDUNYA-PRIVATE-KEY\": \"test_private_LJfJe2zAiwndwRq6ZF4qIDIoApZ\",\n      \"PAYDUNYA-TOKEN\": \"VaZUkYb6b1JOpZfxUe3R\",\n    },\n    url: `https://app.paydunya.com/sandbox-api/v1/checkout-invoice/confirm/`,\n  },\n  live: {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"PAYDUNYA-MASTER-KEY\": \"voFGVcul-uCsd-1sw5-wfGz-ukqScIQoOyDu\",\n      \"PAYDUNYA-PRIVATE-KEY\": \"live_private_KvbXuQU1IJ4z68hQOU9YeEtrUjW\",\n      \"PAYDUNYA-TOKEN\": \"cjTGi71WL8xOTCrsJisR\",\n    },\n    url: `https://app.paydunya.com/api/v1/checkout-invoice/confirm/`,\n  },\n};\n\nexport default paymentConfig;","/* eslint-disable no-unused-vars */\n\nimport axiosInstance from \"../config/axiosConfig\";\nimport paymentConfig from \"../config/paymentConfig\";\n\nconst PaiementService = {\n  createPrecommandePaiment: async (idOrder) => {\n    try {\n      const response = await axiosInstance.get(\n        `/api/precommande/${idOrder}/payment`\n      );\n      return response.data;\n    } catch (error) {\n      console.error(\"Erreur lors du paiement\", error);\n      throw error;\n    }\n  },\n  createPrecommandePaimentMontant: async (idOrder, montant, token) => {\n    try {\n      const response = await axiosInstance.get(\n        `/api/precommande/${idOrder}/payment/${montant}/${token}`\n      );\n      return response.data;\n    } catch (error) {\n      console.error(\"Erreur lors du paiement\", error);\n      throw error;\n    }\n  },\n  createPrecommandePaimentState: async (idOrder, rang, montant) => {\n    try {\n      const response = await axiosInstance.get(\n        `/api/precommande/${idOrder}/payment/${rang}/${montant}`\n      );\n      return response.data;\n    } catch (error) {\n      console.error(\"Erreur lors du paiement\", error);\n      throw error;\n    }\n  },\n  createCommandePaiment: async (idOrder) => {\n    try {\n      const response = await axiosInstance.get(\n        `/api/commande/${idOrder}/payment`\n      );\n      return response.data;\n    } catch (error) {\n      console.error(\"Erreur lors du paiement\", error);\n      throw error;\n    }\n  },\n  setPaymentDetails: async (paymentDetails) => {\n    try {\n      const response = await axiosInstance.post(\n        `/api/payment/set`,\n        paymentDetails\n      );\n      return response.data;\n    } catch (error) {\n      console.error(\n        \"Erreur lors de l'enregistrement des détails du paiement\",\n        error\n      );\n      throw error;\n    }\n  },\n  getPaymentDetails: async (transactionId) => {\n    try {\n      const response = await axiosInstance.get(\n        `/api/payment/get/${transactionId}`\n      );\n      return response.data;\n    } catch (error) {\n      console.error(\n        \"Erreur lors de la récupération des détails du paiement\",\n        error\n      );\n      throw error;\n    }\n  },\n  getPaymentsPartner: async (id) => {\n    try {\n      const response = await axiosInstance.get(`/api/payment/partner/${id}`);\n      return response.data;\n    } catch (error) {\n      console.error(\n        \"Erreur lors de la récupération des détails du paiement\",\n        error\n      );\n      throw error;\n    }\n  },\n  getPaymentDetailsById: async (id) => {\n    try {\n      const response = await axiosInstance.get(`/api/payment/byId/${id}`);\n      return response.data;\n    } catch (error) {\n      console.error(\n        \"Erreur lors de la récupération des détails du paiement\",\n        error\n      );\n      throw error;\n    }\n  },\n  getPaymentDetailsByToken: async (token) => {\n    try {\n      const response = await axiosInstance.get(`/api/payment/byToken/${token}`);\n      return response.data;\n    } catch (error) {\n      console.error(\n        \"Erreur lors de la récupération des détails du paiement\",\n        error\n      );\n      throw error;\n    }\n  },\n\n  updatePaymentDetails: async (\n    id,\n    payment_state,\n    url_facture,\n    customer_name,\n    customer_email,\n    customer_phone, token_status\n  ) => {\n    console.log('id precommande ', id)\n    try {\n      const response = await axiosInstance.put(`/api/payment/update/${id}`, {\n        payment_state,\n        url_facture,\n        customer_name,\n        customer_email,\n        customer_phone,\n        token_status\n\n      });\n      return response.data;\n    } catch (error) {\n      console.error(\n        \"Erreur lors de la récupération des détails du paiement\",\n        error\n      );\n      throw error;\n    }\n  },\n\n  getPaymentDetailsByIdOrder: async (id) => {\n    try {\n      const response = await axiosInstance.get(`/api/payment/byOrder/${id}`);\n      return response.data;\n    } catch (error) {\n      console.error(\n        \"Erreur lors de la récupération des détails du paiement\",\n        error\n      );\n      throw error;\n    }\n  },\n\n  putCreateInvoiceAfterPaided: async (token) => {\n    try {\n      const response = await axiosInstance.put(`/api/payment/create-invoice-afterPaided/${token}`);\n      return response.data;\n    } catch (error) {\n      console.error(\n        \"Erreur lors de la récupération des détails du paiement\",\n        error\n      );\n      throw error;\n    }\n  },\n\n\n  putPaymentDetailByToken: async (token,\n    url_facture,\n    customer_name,\n    customer_email,\n    customer_phone, payment_state) => {\n\n    let data = {\n      url_facture,\n      customer_name,\n      customer_email,\n      customer_phone,\n      payment_state\n    }\n    console.log(data)\n    try {\n      const response = await axiosInstance.put(`/api/payment/verify/${token}`, data);\n      return response.data;\n    } catch (error) {\n      console.log(error)\n      throw error;\n    }\n  },\n  confirmInvoice: async (token) => {\n\n    const headersTest = {\n      \"Content-Type\": \"application/json\",\n      \"PAYDUNYA-MASTER-KEY\": \"voFGVcul-uCsd-1sw5-wfGz-ukqScIQoOyDu\",\n      \"PAYDUNYA-PRIVATE-KEY\": \"test_private_LJfJe2zAiwndwRq6ZF4qIDIoApZ\",\n      \"PAYDUNYA-TOKEN\": \"VaZUkYb6b1JOpZfxUe3R\",\n    };\n\n    const headersProd = {\n      \"Content-Type\": \"application/json\",\n      \"PAYDUNYA-MASTER-KEY\": \"voFGVcul-uCsd-1sw5-wfGz-ukqScIQoOyDu\",\n      \"PAYDUNYA-PRIVATE-KEY\": \"live_private_KvbXuQU1IJ4z68hQOU9YeEtrUjW\",\n      \"PAYDUNYA-TOKEN\": \"cjTGi71WL8xOTCrsJisR\",\n    };\n\n    // *******************paydunya entreprise ***********************\n    // const headersTest = {\n    //   \"Content-Type\": \"application/json\",\n    //   \"PAYDUNYA-MASTER-KEY\": \"voFGVcul-uCsd-1sw5-wfGz-ukqScIQoOyDu\",\n    //   \"PAYDUNYA-PRIVATE-KEY\": \"test_private_A4sJMbHe94bU4ueGEDdfkcmVorE\",\n    //   \"PAYDUNYA-TOKEN\": \"gCUWIfjZUXPzmoxnnIrD\",\n    // };\n\n    // const headersProd = {\n    //   \"Content-Type\": \"application/json\",\n    //   \"PAYDUNYA-MASTER-KEY\": \"voFGVcul-uCsd-1sw5-wfGz-ukqScIQoOyDu\",\n    //   \"PAYDUNYA-PRIVATE-KEY\": \"live_private_yqP67XhEMdpNXpVEyLRK89NIdtu\",\n    //   \"PAYDUNYA-TOKEN\": \"f6t45WLceOFTVIQFjVw8\",\n    // };\n    // *******************paydunya entreprise ***********************\n\n    const urlVerifInvoiceTest = `https://app.paydunya.com/sandbox-api/v1/checkout-invoice/confirm/${token}`;\n    const urlVerifInvoiceLive = `https://app.paydunya.com/api/v1/checkout-invoice/confirm/${token}`;\n\n    const response = await axiosInstance.get(urlVerifInvoiceLive, {\n      headers: headersProd,\n    });\n    if (response.status === 200) {\n      return response.data;\n    } else {\n      throw new Error(response.data.response_text);\n    }\n  },\n\n  confirmInvoice2: async (token, isLive = false) => {\n    const config = isLive ? paymentConfig.live : paymentConfig.test;\n    const url = `${config.url}${token}`;\n\n    try {\n      const response = await axiosInstance.get(url, {\n        headers: config.headers,\n      });\n      if (response.status === 200) {\n        return response.data;\n      } else {\n        throw new Error(response.data.response_text);\n      }\n    } catch (error) {\n      throw new Error(error.message);\n    }\n  },\n};\n\nexport default PaiementService;\n"],"names":["paymentConfig","PaiementService","idOrder","axiosInstance","error","montant","token","rang","paymentDetails","transactionId","id","payment_state","url_facture","customer_name","customer_email","customer_phone","token_status","data","headersProd","urlVerifInvoiceLive","response","isLive","config","url"],"mappings":"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"}
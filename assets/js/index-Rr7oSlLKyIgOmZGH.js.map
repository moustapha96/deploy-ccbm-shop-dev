{"version":3,"file":"index-Rr7oSlLKyIgOmZGH.js","sources":["../../../orbit-city-final-dev/src/components/Helpers/Cards/ProductCardRowStyleOne.jsx","../../../orbit-city-final-dev/src/components/Helpers/SectionStyleTwo.jsx","../../../orbit-city-final-dev/src/components/Helpers/ViewMoreTitle.jsx","../../../orbit-city-final-dev/src/components/Helpers/ViewMoreTitlePack.jsx","../../../orbit-city-final-dev/src/components/Helpers/ViewMoreTitleCategorie.jsx","../../../orbit-city-final-dev/src/components/Helpers/SliderCom.jsx","../../../orbit-city-final-dev/src/assets/images/banner_ccbme_shop_pub_1.jpg","../../../orbit-city-final-dev/src/assets/images/crea_a_credit_ccbm_shop.png","../../../orbit-city-final-dev/src/assets/images/ccbm_shop_promotion.png","../../../orbit-city-final-dev/src/assets/images/ccbm_shop_promo_tabaski.png","../../../orbit-city-final-dev/src/components/Home/BannerSecond.jsx","../../../orbit-city-final-dev/src/services/pubService.jsx","../../../orbit-city-final-dev/src/components/Home/BannerPub.jsx","../../../orbit-city-final-dev/src/assets/categories/air-fryer.png","../../../orbit-city-final-dev/src/assets/categories/aspirateur.png","../../../orbit-city-final-dev/src/assets/categories/barre-de-son.png","../../../orbit-city-final-dev/src/assets/categories/bouilloire.png","../../../orbit-city-final-dev/src/assets/categories/chauffe-eau.png","../../../orbit-city-final-dev/src/assets/categories/climatiseur.png","../../../orbit-city-final-dev/src/assets/categories/congelateur.png","../../../orbit-city-final-dev/src/assets/categories/cuisiniere.png","../../../orbit-city-final-dev/src/assets/categories/extracteur-de-jus.png","../../../orbit-city-final-dev/src/assets/categories/fer-a-repasser.png","../../../orbit-city-final-dev/src/assets/categories/fontaine.png","../../../orbit-city-final-dev/src/assets/categories/four.png","../../../orbit-city-final-dev/src/assets/categories/four-encastrable.png","../../../orbit-city-final-dev/src/assets/categories/home-cinema.png","../../../orbit-city-final-dev/src/assets/categories/hotte-de-cuisine.png","../../../orbit-city-final-dev/src/assets/categories/lave-vaisselle.png","../../../orbit-city-final-dev/src/assets/categories/machine-a-cafe.png","../../../orbit-city-final-dev/src/assets/categories/machine-a-laver.png","../../../orbit-city-final-dev/src/assets/categories/micro-onde.png","../../../orbit-city-final-dev/src/assets/categories/mini-chaine.png","../../../orbit-city-final-dev/src/assets/categories/mixeur.png","../../../orbit-city-final-dev/src/assets/categories/all.png","../../../orbit-city-final-dev/src/assets/categories/plaque-de-cuisson.png","../../../orbit-city-final-dev/src/assets/categories/refrigerateur.png","../../../orbit-city-final-dev/src/assets/categories/regulateur.png","../../../orbit-city-final-dev/src/assets/categories/seche-linge.png","../../../orbit-city-final-dev/src/assets/categories/telephone.png","../../../orbit-city-final-dev/src/assets/categories/television.png","../../../orbit-city-final-dev/src/assets/categories/ventilateur.png","../../../orbit-city-final-dev/src/assets/categories/chaise.png","../../../orbit-city-final-dev/src/assets/categories/coffre.jpg","../../../orbit-city-final-dev/src/assets/tout_produit.jpg","../../../orbit-city-final-dev/src/assets/logo_192.png","../../../orbit-city-final-dev/src/assets/categories/grille_pain.png","../../../orbit-city-final-dev/src/assets/categories/support_tv.jpg","../../../orbit-city-final-dev/src/assets/categories/blender.jpg","../../../orbit-city-final-dev/src/assets/categories/ordinateur.jpg","../../../orbit-city-final-dev/src/components/Home/CategoriesSection.jsx","../../../orbit-city-final-dev/src/components/Helpers/Cards/ProductCardRowStyleOnePack.jsx","../../../orbit-city-final-dev/src/components/Helpers/SectionStyleTwoPack.jsx","../../../orbit-city-final-dev/src/components/Helpers/SectionStyleTwoVenteCher.jsx","../../../orbit-city-final-dev/src/components/Pub/FeaturedProductsPopup.jsx","../../../orbit-city-final-dev/src/components/Home/index.jsx"],"sourcesContent":["\r\n\r\n/* eslint-disable react/prop-types */\r\n/* eslint-disable no-unused-vars */\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport Star from \"../icons/Star\";\r\nimport formatPrice from \"../../../utils/formatPrice\";\r\nimport { Eye, Heart, HeartHandshake, ShoppingBag, ShoppingCart } from \"lucide-react\";\r\nimport { useContext, useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useAuthContext } from \"../../../contexts/useAuthContext\";\r\nimport { CartContext } from \"../../../contexts/CartContext\";\r\nimport NewsletterPopup from \"../../Popup/NewsletterPopup\";\r\nimport { useNewsletterPopup } from \"../../../Hooks/useNewsletterPopup\";\r\nimport { trackImageClick } from \"../../../utils/tracking\";\r\n\r\nexport default function ProductCardRowStyleTwo({ className, datas, type = 3 }) {\r\n  const navigate = useNavigate();\r\n  const {\r\n    addToCart,\r\n    addToWishlist,\r\n    addToCreditOrder,\r\n    addToPreorder,\r\n    isProductInWishlist,\r\n  } = useContext(CartContext);\r\n  const { user, parent } = useAuthContext();\r\n  const [isHovered, setIsHovered] = useState(false);\r\n  const { showPopup, handleClosePopup } = useNewsletterPopup();\r\n  const [isPopupVisible, setIsPopupVisible] = useState(false);\r\n\r\n  const handleAddToCart = (e) => {\r\n    e.preventDefault();\r\n    addToCart(datas, 1);\r\n    setIsPopupVisible(true);\r\n    toast.success(\"Produit ajouté\", { position: \"top-center\", autoClose: 1000 });\r\n  };\r\n\r\n  const handleSubscribe = (email) => {\r\n    console.log(`Subscribed with email: ${email}`);\r\n  };\r\n\r\n  const handleAddToCreditOrder = (e) => {\r\n    e.preventDefault();\r\n    console.log(e, datas);\r\n    addToCreditOrder(datas, 1);\r\n    setIsPopupVisible(true);\r\n    toast.success(\"Produit ajouté\", { position: \"top-center\", autoClose: 1000 });\r\n  };\r\n\r\n  const handleAddToWishlist = (e) => {\r\n    e.preventDefault();\r\n    addToWishlist(datas, 1);\r\n    toast.success(\"Produit ajouté\", { position: \"top-center\", autoClose: 1000 });\r\n  };\r\n\r\n  const handleAddToPreOrder = (e) => {\r\n    e.preventDefault();\r\n    addToPreorder(datas, 1);\r\n    toast.success(\"Produit ajouté\", { position: \"top-center\", autoClose: 1000 });\r\n  };\r\n\r\n  const handleDetails = (e, produit) => {\r\n    e.preventDefault();\r\n    navigate(\"/produits/\" + produit.id + \"/details\", {\r\n      state: { produit },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={`product-row-card-style-one w-full bg-white group relative overflow-hidden p-2 md:p-4 ${className || \"\"}`}\r\n        onMouseEnter={() => setIsHovered(true)}\r\n        onMouseLeave={() => setIsHovered(false)}\r\n      >\r\n        <div className=\"flex flex-col md:flex-row items-center w-full h-full\">\r\n\r\n          {datas.en_promo && (\r\n            <div className=\"product-type absolute left-2 top-2\">\r\n              <span\r\n                className=\"text-[10px] font-bold leading-none py-0.5 px-1 uppercase text-white\r\n                 rounded-full tracking-wider bg-bleu-logo\"\r\n              >\r\n                En promo\r\n              </span>\r\n            </div>\r\n          )}\r\n\r\n\r\n          <div className=\"w-full md:w-1/3 h-24 md:h-32 mb-2 md:mb-0\">\r\n            <Link to={`/produits/${datas.id}/details`} >\r\n              {datas.image_256 && (\r\n                <img\r\n                  src={`data:image/png;base64,${datas.image_256}`}\r\n                  alt={`${datas.name} CCBM Shop`}\r\n                  className=\"w-full h-full object-contain\"\r\n                />\r\n              )}\r\n            </Link>\r\n          </div>\r\n          <div className=\"flex-1 flex flex-col justify-center h-full md:pl-4\">\r\n            <div className=\"mb-1\">\r\n              <p className=\"title mb-1 text-xs md:text-sm font-600 text-qblack leading-tight line-clamp-2 hover:text-bleu-logo\">\r\n                <Link to={`/produits/${datas.id}/details`}>{datas.name}</Link>\r\n              </p>\r\n\r\n              <p className=\"price mb-2\">\r\n                <span className=\"offer-price line-through text-qred font-600 text-xs md:text-sm\">\r\n                  {datas.creditorder_price > 0 && datas.is_creditorder && <>{formatPrice(datas.creditorder_price)}</>}\r\n                </span>\r\n                <br />\r\n\r\n                {datas.en_promo && datas.promo_price > 0 ? (\r\n                  <span className=\"offer-price text-bleu-logo font-600 text-xs md:text-sm\">\r\n                    {formatPrice(datas.promo_price)}\r\n                  </span>\r\n                ) : <>\r\n                  {datas.list_price > 0 && <>\r\n                    <span className=\"offer-price text-bleu-logo font-600 text-xs md:text-sm\">\r\n                      {formatPrice(datas.list_price)}\r\n                    </span>\r\n                  </>}\r\n\r\n                </>}\r\n\r\n              </p>\r\n\r\n\r\n            </div>\r\n\r\n            <div className=\"flex flex-wrap justify-between gap-1 md:gap-2\">\r\n              {(datas.sale_ok && datas.list_price > 0 && user) && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleAddToCart}\r\n                  className=\"w-[30px] h-[30px] md:w-[90px] md:h-[25px] transition-all duration-300 ease-in-out flex items-center justify-center\"\r\n                >\r\n                  <span className={type === 3 ? \"blue-logo-btn-small\" : \"yellow-btn-small\"}>\r\n                    <ShoppingCart className=\"w-4 h-4 block md:hidden\" /> {/* Icône réduite en mobile */}\r\n                    <span className=\"hidden md:inline\">Acheter</span>\r\n                  </span>\r\n                </button>\r\n              )}\r\n\r\n\r\n              {/* {datas.is_preorder && datas.preorder_price > 0 && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleAddToPreOrder}\r\n                  className=\"w-[30px] h-[30px] md:w-[120px] md:h-[25px] flex items-center justify-center\"\r\n                >\r\n                  <span className={type === 3 ? \"red-btn-small\" : \"yellow-btn-small\"}>\r\n                    <ShoppingBag className=\"w-4 h-4 block md:hidden\" />\r\n                    <span className=\"hidden md:inline\">Précommander</span>\r\n                  </span>\r\n                </button>\r\n              )} */}\r\n\r\n              {datas.is_creditorder && datas.creditorder_price > 0 && user  && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleAddToCreditOrder}\r\n                  className=\"w-[30px] h-[30px] md:w-[100px] md:h-[25px] flex items-center justify-center\"\r\n                >\r\n                  <span className={type === 3 ? \"vert-btn-small\" : \"yellow-btn-small\"}>\r\n                    <HeartHandshake className=\"w-4 h-4 block md:hidden\" /> {/* Icône réduite en mobile */}\r\n                    <span className=\"hidden md:inline\">A Crédit</span>\r\n                  </span>\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n\r\n          </div>\r\n        </div>\r\n        <div\r\n          className={`quick-access-btns flex flex-col space-y-2 absolute top-4 transition-all duration-300 ease-in-out ${isHovered ? 'right-4' : '-right-10'\r\n            }`}\r\n        >\r\n          <button\r\n            onClick={(e) => handleDetails(e, datas)}\r\n            className=\"w-7 h-7 md:w-10 md:h-10 flex justify-center items-center bg-gray-200 rounded-full hover:bg-gray-300 transition-colors duration-300\"\r\n          >\r\n            <Eye className=\"w-3 h-3 md:w-5 md:h-5 text-gray-600\" />\r\n          </button>\r\n          <button\r\n            onClick={handleAddToWishlist}\r\n            className=\"w-7 h-7 md:w-10 md:h-10 flex justify-center items-center bg-gray-200 rounded-full hover:bg-gray-300 transition-colors duration-300\"\r\n          >\r\n            <Heart className={`w-3 h-3 md:w-5 md:h-5 ${isProductInWishlist(datas) ? 'text-red-500' : 'text-gray-600'}`} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {isPopupVisible && !user && (\r\n        <NewsletterPopup\r\n          onClose={handleClosePopup}\r\n          onSubscribe={handleSubscribe}\r\n          isVisible={showPopup}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","/* eslint-disable react/prop-types */\n\nimport ProductCardRowStyleOne from \"./Cards/ProductCardRowStyleOne\";\nimport DataIteration from \"./DataIteration\";\n\nexport default function SectionStyleTwo({ className, products, type = 3 }) {\n  console.log(products)\n  return (\n    <div\n      className={`section-content w-full grid grid-cols-2 gap-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 ${className || \"\"}`}\n    >\n      <DataIteration datas={products} startLength={0} endLength={products.length > 6 ? 6 : products.length}>\n        {({ datas }) => <>\n          {datas.image_256 && (\n            <div key={datas.id} className=\"item w-full\">\n              <ProductCardRowStyleOne type={type} datas={datas} />\n            </div>\n          )}\n        </>}\n      </DataIteration>\n    </div>\n  );\n}\n","/* eslint-disable react/prop-types */\nimport { ArrowRight } from \"lucide-react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function ViewMoreTitle({\n  categoryTitle = \"\",\n  className,\n  children,\n  seeMoreUrl = \"\",\n}) {\n  return (\n    <div className={`section-wrapper w-full ${className || \"\"}`}>\n      <div className=\"container-x mx-auto\">\n        <div className=\" section-title flex justify-between items-center mb-5\">\n          <div className=\"relative\">\n            <h1 className=\"sm:text-3xl text-2xl font-bold text-qblacktext leading-tight relative z-10 inline-block\">\n              {categoryTitle}\n            </h1>\n            <div className=\"absolute bottom-0 left-0 w-full h-2 bg-bleu-logo opacity-80 -mb-2\"></div>\n          </div>\n          <div>\n            <Link to={seeMoreUrl}>\n              <div className=\"flex space-x-2 items-center\">\n                <p className=\"text-base font-600 text-qblack\">Voir plus</p>\n                <span className=\"animate-right-dir\">\n                  <ArrowRight />\n                </span>\n              </div>\n            </Link>\n          </div>\n        </div>\n        <div className=\"section-content\">{children && children}</div>\n      </div>\n    </div>\n  );\n}\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\n// /* eslint-disable no-unused-vars */\n// /* eslint-disable react/prop-types */\n\n// \"use client\"\n// export default function ViewMoreTitlePack({\n//   categoryTitle = \"\",\n//   className,\n//   children,\n//   seeMoreUrl = \"\",\n// }) {\n//   return (\n//     <div className={`section-wrapper w-full ${className || \"\"}`}>\n//       <div className=\"container-x mx-auto\">\n//         <div className=\"section-title flex justify-between items-center mb-8\">\n//           <div className=\"relative\">\n//             <h1 className=\"sm:text-3xl text-2xl font-bold text-qblacktext leading-tight relative z-10 inline-block\">\n//               {categoryTitle}\n//             </h1>\n//             <div className=\"absolute bottom-0 left-0 w-full h-2 bg-bleu-logo opacity-80 -mb-2\"></div>\n//           </div>\n//           {/* {seeMoreUrl && (\n//             <div>\n//               <Link to={seeMoreUrl} className=\"group\">\n//                 <div className=\"flex items-center space-x-2 text-qblack hover:text-bleu-logo transition-colors duration-300\">\n//                   <p className=\"text-base font-semibold\">Voir plus</p>\n//                   <span className=\"transform group-hover:translate-x-1 transition-transform duration-300\">\n//                     <ArrowRight size={20} />\n//                   </span>\n//                 </div>\n//               </Link>\n//             </div>\n//           )} */}\n//         </div>\n//         <div className=\"section-content\">{children}</div>\n//       </div>\n//     </div>\n//   )\n// }\n\n\n\n\n// \"use client\"\n// import { useRef } from \"react\"\n// import { ArrowLeft, ArrowRight } from \"lucide-react\"\n\n// export default function ViewMoreTitlePack({ categoryTitle = \"\", className, children, seeMoreUrl = \"\", id }) {\n//   const scrollContainerRef = useRef(null)\n\n//   const scroll = (scrollOffset) => {\n//     if (scrollContainerRef.current) {\n//       scrollContainerRef.current.scrollBy({ left: scrollOffset, behavior: \"smooth\" })\n//     }\n//   }\n\n//   return (\n//     <div id={id} className={`section-wrapper w-full ${className || \"\"}`}>\n//       <div className=\"container-x mx-auto\">\n//         <div className=\"section-title flex justify-between items-center mb-8\">\n//           <div className=\"relative\">\n//             <h1 className=\"sm:text-3xl text-2xl font-bold text-qblacktext leading-tight relative z-10 inline-block\">\n//               {categoryTitle}\n//             </h1>\n//             <div className=\"absolute bottom-0 left-0 w-full h-2 bg-bleu-logo opacity-80 -mb-2\"></div>\n//           </div>\n//           <div className=\"flex space-x-4\">\n//             <button\n//               onClick={() => scroll(-scrollContainerRef.current.offsetWidth)}\n//               className=\"p-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors duration-200\"\n//             >\n//               <ArrowLeft size={20} />\n//             </button>\n//             <button\n//               onClick={() => scroll(scrollContainerRef.current.offsetWidth)}\n//               className=\"p-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors duration-200\"\n//             >\n//               <ArrowRight size={20} />\n//             </button>\n//           </div>\n//         </div>\n//         <div ref={scrollContainerRef} className=\"section-content overflow-x-auto scrollbar-hide\">\n//           {children}\n//         </div>\n//       </div>\n//     </div>\n//   )\n// }\n\n\n\"use client\"\nimport { useEffect, useRef } from \"react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nexport default function ViewMoreTitlePack({ categoryTitle = \"\", className, children, seeMoreUrl = \"\", id }) {\n  const scrollContainerRef = useRef(null)\n\n  const scroll = (scrollOffset) => {\n    if (scrollContainerRef.current) {\n      scrollContainerRef.current.scrollBy({ left: scrollOffset, behavior: \"smooth\" })\n    }\n  }\n\n\n  // useEffect(() => {\n  //   const interval = setInterval(() => {\n  //     if (scrollContainerRef.current) {\n  //       scrollContainerRef.current.scrollBy({\n  //         left: scrollContainerRef.current.offsetWidth,\n  //         behavior: \"smooth\",\n  //       });\n  //     }\n  //   }, 3000);\n  //   return () => clearInterval(interval);\n  // }, []);\n\n  return (\n    <div id={id} className={`section-wrapper w-full ${className || \"\"}`}>\n      <div className=\"container-x mx-auto\">\n        <div className=\"section-title flex justify-between items-center mb-8  \">\n          <div className=\"relative\">\n            <h1 className=\"sm:text-3xl text-2xl font-bold text-qblacktext leading-tight relative z-10 inline-block\">\n              {categoryTitle}\n            </h1>\n            <div className=\"absolute bottom-0 left-0 w-full h-2 bg-bleu-logo opacity-80 -mb-2\"></div>\n          </div>\n          <div className=\" hidden md:flex space-x-4\">\n            <button\n              onClick={() => scroll(-scrollContainerRef.current.offsetWidth)}\n              className=\"p-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors duration-200\"\n            >\n              <ArrowLeft size={20} />\n            </button>\n            <button\n              onClick={() => scroll(scrollContainerRef.current.offsetWidth)}\n              className=\"p-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors duration-200\"\n            >\n              <ArrowRight size={20} />\n            </button>\n          </div>\n        </div>\n        <div ref={scrollContainerRef} className=\"section-content custom-scrollbar scrollbar-hide\">\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\n// /* eslint-disable no-unused-vars */\n// /* eslint-disable react/prop-types */\n\n// export default function ViewMoreTitleCategorie({\n//   categoryTitle = \"\",\n//   className,\n//   children,\n//   seeMoreUrl = \"\",\n// }) {\n//   return (\n//     <div id=\"#special\" className={`section-wrapper w-full ${className || \"\"}`}>\n//       <div className=\"container-x mx-auto\">\n//         <div className=\" section-title flex justify-between items-center mb-5\">\n\n\n//           <div className=\"relative\">\n//             <h1 className=\"sm:text-3xl text-2xl font-bold text-qblacktext leading-tight relative z-10 inline-block\">\n//               {categoryTitle}\n//             </h1>\n//             <div className=\"absolute bottom-0 left-0 w-full h-2 bg-bleu-logo opacity-80 -mb-2\"></div>\n//           </div>\n\n\n//         </div>\n//         <div className=\"section-content\">{children && children}</div>\n//       </div>\n//     </div>\n//   );\n// }\n\n\n\n// \"use client\"\n// import { useRef } from 'react'\n// import { ArrowLeft, ArrowRight } from 'lucide-react'\n\n// export default function ViewMoreTitleCategorie({\n//   categoryTitle = \"\",\n//   className,\n//   children,\n//   seeMoreUrl = \"\",\n// }) {\n//   const scrollContainerRef = useRef(null);\n\n//   const scroll = (scrollOffset) => {\n//     if (scrollContainerRef.current) {\n//       scrollContainerRef.current.scrollBy({ left: scrollOffset, behavior: 'smooth' });\n//     }\n//   };\n\n//   return (\n//     <div id=\"#special\" className={`section-wrapper w-full ${className || \"\"}`}>\n//       <div className=\"container-x mx-auto\">\n//         <div className=\"section-title flex justify-between items-center mb-5\">\n//           <div className=\"relative\">\n//             <h1 className=\"sm:text-3xl text-2xl font-bold text-qblacktext leading-tight relative z-10 inline-block\">\n//               {categoryTitle}\n//             </h1>\n//             <div className=\"absolute bottom-0 left-0 w-full h-2 bg-bleu-logo opacity-80 -mb-2\"></div>\n//           </div>\n//           <div className=\"flex space-x-4\">\n//             <button onClick={() => scroll(-200)} className=\"p-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors duration-200\">\n//               <ArrowLeft size={20} />\n//             </button>\n//             <button onClick={() => scroll(200)} className=\"p-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors duration-200\">\n//               <ArrowRight size={20} />\n//             </button>\n//           </div>\n//         </div>\n//         <div ref={scrollContainerRef} className=\"section-content custom-scrollbar scrollbar-hide\">\n//           {children}\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\n\"use client\"\nimport { useRef } from \"react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nexport default function ViewMoreTitleCategorie({ categoryTitle = \"\", className, children, seeMoreUrl = \"\" }) {\n  const scrollContainerRef = useRef(null)\n\n  const scroll = (scrollOffset) => {\n    if (scrollContainerRef.current) {\n      scrollContainerRef.current.scrollBy({ left: scrollOffset, behavior: \"smooth\" })\n    }\n  }\n\n  return (\n    <div className={`section-wrapper w-full ${className || \"\"}`}>\n      <div className=\"container-x mx-auto\">\n        <div className=\"section-title flex justify-between items-center mb-5\">\n          <div className=\"relative\">\n            <h1 className=\"sm:text-3xl text-2xl font-bold text-qblacktext leading-tight relative z-10 inline-block\">\n              {categoryTitle}\n            </h1>\n            <div className=\"absolute bottom-0 left-0 w-full h-2 bg-bleu-logo opacity-80 -mb-2\"></div>\n          </div>\n          <div className=\"hidden md:flex space-x-4\">\n            <button\n              onClick={() => scroll(-200)}\n              className=\"p-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors duration-200\"\n            >\n              <ArrowLeft size={20} />\n            </button>\n            <button\n              onClick={() => scroll(200)}\n              className=\"p-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors duration-200\"\n            >\n              <ArrowRight size={20} />\n            </button>\n          </div>\n        </div>\n        <div ref={scrollContainerRef} className=\"section-content overflow-x-auto custom-scrollbar\">\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\n","/* eslint-disable react/prop-types */\nimport Slider from \"react-slick\";\nimport \"slick-carousel/slick/slick-theme.css\";\nimport \"slick-carousel/slick/slick.css\";\n\nexport default function SimpleSlider(props) {\n  const { className, settings, children, selector } = props;\n\n  return (\n    <Slider ref={selector} className={`${className || \"\"}`} {...settings}>\n      {children}\n    </Slider>\n  );\n}\n","export default \"__VITE_ASSET__CPaOVP_7__\"","export default \"__VITE_ASSET__D8fBgDhe__\"","export default \"__VITE_ASSET__DzKsa6hd__\"","export default \"__VITE_ASSET__CXu_9Efr__\"","// /* eslint-disable no-unused-vars */\r\n// /* eslint-disable react/prop-types */\r\n// \"use client\"\r\n// import { useRef, useState } from \"react\"\r\n// import SimpleSlider from \"../Helpers/SliderCom\"\r\n\r\n// import crea1 from \"/src/assets/images/banner_ccbme_shop_pub_1.jpg\"\r\n// import create_a_credit from \"/src/assets/images/crea_a_credit_ccbm_shop.png\"\r\n// import ccbm_shop_promotion from \"/src/assets/images/ccbm_shop_promotion.png\"\r\n// import ccbm_shop_promo_tabaski from \"/src/assets/images/ccbm_shop_promo_tabaski.png\"\r\n\r\n// export default function BannerSecond({ className = \"\" }) {\r\n//   const sliderRef = useRef(null)\r\n//   const [isDragging, setIsDragging] = useState(false)\r\n//   const [startX, setStartX] = useState(0)\r\n\r\n//   const handleMouseDown = (e) => {\r\n//     setIsDragging(false)\r\n//     setStartX(e.clientX)\r\n//   }\r\n//   const handleMouseMove = (e) => {\r\n//     if (Math.abs(e.clientX - startX) > 5) setIsDragging(true)\r\n//   }\r\n//   const handleClick = (e, index) => {\r\n//     if (!isDragging) {\r\n//       const routes = [\"/promo-tabaski\", \"/\", \"/\", \"/credit-commandes\"]\r\n//       window.location.href = routes[index]\r\n//     }\r\n//   }\r\n\r\n//   const settings = {\r\n//     infinite: true,\r\n//     autoplay: true,\r\n//     autoplaySpeed: 1500,\r\n//     speed: 500,\r\n//     arrows: false,\r\n//     dots: true,\r\n//     centerMode: true,\r\n//     centerPadding: \"6%\",\r\n//     slidesToShow: 1,\r\n//     swipe: true,\r\n//     swipeToSlide: true,\r\n//     draggable: true,\r\n//     responsive: [\r\n//       { breakpoint: 1024, settings: { centerPadding: \"4%\", dots: true } },\r\n//       { breakpoint: 768, settings: { centerMode: true, centerPadding: \"0%\", dots: true } },\r\n//     ],\r\n//   }\r\n\r\n//   return (\r\n//     <div className={`relative w-screen left-1/2 -translate-x-1/2 ${className}`}>\r\n//       <div className=\"relative\">\r\n//         <div className=\"pointer-events-none absolute inset-y-0 left-0 w-6 md:w-12 bg-gradient-to-r from-white/80 to-transparent z-10 hidden sm:block\" />\r\n//         <div className=\"pointer-events-none absolute inset-y-0 right-0 w-6 md:w-12 bg-gradient-to-l from-white/80 to-transparent z-10 hidden sm:block\" />\r\n\r\n//         <SimpleSlider settings={settings} selector={sliderRef}>\r\n//           {[ccbm_shop_promo_tabaski, ccbm_shop_promotion, crea1, create_a_credit].map((image, index) => (\r\n//             <div\r\n//               key={index}\r\n//               className=\"relative\"\r\n//               onClick={(e) => handleClick(e, index)}\r\n//               onMouseDown={handleMouseDown}\r\n//               onMouseMove={handleMouseMove}\r\n//             >\r\n//               {/* Hauteur fixe responsive pour éviter les sauts de layout */}\r\n//               <div className=\"w-full h-[180px] sm:h-[240px] md:h-[300px] lg:h-[360px] xl:h-[420px] bg-white rounded-none\">\r\n//                 <img\r\n//                   src={image}\r\n//                   alt=\"Bannière\"\r\n//                   loading=\"lazy\"\r\n//                   className=\"\r\n//                     w-full h-full object-contain\r\n//                     select-none pointer-events-none\r\n//                   \"\r\n//                 />\r\n//               </div>\r\n//             </div>\r\n//           ))}\r\n//         </SimpleSlider>\r\n//       </div>\r\n//     </div>\r\n//   )\r\n// }\r\n\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable react/prop-types */\r\n\"use client\"\r\nimport { useRef, useState } from \"react\"\r\nimport SimpleSlider from \"../Helpers/SliderCom\"\r\n\r\nimport crea1 from \"/src/assets/images/banner_ccbme_shop_pub_1.jpg\"\r\nimport create_a_credit from \"/src/assets/images/crea_a_credit_ccbm_shop.png\"\r\nimport ccbm_shop_promotion from \"/src/assets/images/ccbm_shop_promotion.png\"\r\nimport ccbm_shop_promo_tabaski from \"/src/assets/images/ccbm_shop_promo_tabaski.png\"\r\n\r\nexport default function BannerSecond({ className = \"\" }) {\r\n  const sliderRef = useRef(null)\r\n  const [isDragging, setIsDragging] = useState(false)\r\n  const [startX, setStartX] = useState(0)\r\n\r\n  const handleMouseDown = (e) => {\r\n    setIsDragging(false)\r\n    setStartX(e.clientX)\r\n  }\r\n  const handleMouseMove = (e) => {\r\n    if (Math.abs(e.clientX - startX) > 5) setIsDragging(true)\r\n  }\r\n  const handleClick = (e, index) => {\r\n    if (!isDragging) {\r\n      const routes = [\"/boutique\", \"/boutique\", \"/boutique\", \"/boutique\"]\r\n      window.location.href = routes[index]\r\n    }\r\n  }\r\n\r\n  const settings = {\r\n    infinite: true,\r\n    autoplay: true,\r\n    autoplaySpeed: 2500,\r\n    speed: 500,\r\n    arrows: false,\r\n    dots: true,\r\n\r\n    // IMPORTANT: on laisse centerMode sur desktop uniquement.\r\n    centerMode: true,\r\n    centerPadding: \"6%\",\r\n    slidesToShow: 1,\r\n\r\n    swipe: true,\r\n    swipeToSlide: true,\r\n    draggable: true,\r\n\r\n    // Empêche les coupes en mobile\r\n    responsive: [\r\n      {\r\n        breakpoint: 1024,\r\n        settings: { centerPadding: \"4%\", dots: true },\r\n      },\r\n      {\r\n        breakpoint: 768,\r\n        settings: {\r\n          centerMode: false,     // <- désactivé en mobile\r\n          centerPadding: \"0%\",   // <- aucun padding\r\n          dots: true,\r\n        },\r\n      },\r\n    ],\r\n  }\r\n\r\n  const IMAGES = [\r\n    ccbm_shop_promo_tabaski,\r\n    ccbm_shop_promotion,\r\n    crea1,\r\n    create_a_credit,\r\n  ]\r\n\r\n  return (\r\n    <div className={`relative w-screen left-1/2 -translate-x-1/2 ${className}`}>\r\n      <div className=\"relative\">\r\n        {/* bords lumière: seulement >= sm */}\r\n        <div className=\"pointer-events-none absolute inset-y-0 left-0 w-6 md:w-12 bg-gradient-to-r from-white/80 to-transparent z-10 hidden sm:block\" />\r\n        <div className=\"pointer-events-none absolute inset-y-0 right-0 w-6 md:w-12 bg-gradient-to-l from-white/80 to-transparent z-10 hidden sm:block\" />\r\n\r\n        <SimpleSlider settings={settings} selector={sliderRef}>\r\n          {IMAGES.map((image, index) => (\r\n            <div\r\n              key={index}\r\n              className=\"relative\"\r\n              onClick={(e) => handleClick(e, index)}\r\n              onMouseDown={handleMouseDown}\r\n              onMouseMove={handleMouseMove}\r\n            >\r\n              {/* \r\n                Container à ratio responsive :\r\n                - mobile: ~16/9 pour maximiser l’espace (change si tes créas sont plus panoramiques)\r\n                - md+: plus panoramique (~21/9)\r\n              */}\r\n              <div className=\"w-full h-[180px] sm:h-[240px] md:h-[300px] lg:h-[360px] xl:h-[420px] bg-white rounded-none\">\r\n              {/* <div className=\"w-full aspect-[16/9] md:aspect-[21/9] bg-white rounded-none\"> */}\r\n                <img\r\n                  src={image}\r\n                  alt=\"Bannière\"\r\n                  loading=\"lazy\"\r\n                  className=\"\r\n                    w-full h-full object-contain\r\n                    block\r\n                    select-none pointer-events-none\r\n                  \"\r\n                />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </SimpleSlider>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","// services/pubService.jsx\r\nimport axiosInstance from \"../config/axiosConfig\";\r\n\r\nconst PubService = {\r\n  getPubs: async () => {\r\n    try {\r\n      const response = await axiosInstance.get(\"/api/get-pub\");\r\n      console.log(response.data)\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la récupération des pubs\", error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default PubService;\r\n\r\n","/* eslint-disable react/prop-types */\r\n/* eslint-disable no-unused-vars */\r\n\"use client\"\r\nimport { useRef, useState, useEffect } from \"react\"\r\nimport SimpleSlider from \"../Helpers/SliderCom\"\r\nimport { X } from \"lucide-react\"\r\nimport PubService from \"../../services/pubService\"\r\n\r\nexport default function BannerPub({ className = \"\", onPubsLoaded }) {\r\n  const sliderRef = useRef(null)\r\n  const [isDragging, setIsDragging] = useState(false)\r\n  const [startX, setStartX] = useState(0)\r\n  const [pubs, setPubs] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [selectedImage, setSelectedImage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    const fetchPubs = async () => {\r\n      try {\r\n        setLoading(true)\r\n        const response = await PubService.getPubs()\r\n        console.log(\"response\")\r\n        console.log(response)\r\n\r\n        if (response && response.status === \"success\" && response.data && Array.isArray(response.data) && response.data.length > 0) {\r\n\r\n          setPubs(response.data)\r\n          if (onPubsLoaded) onPubsLoaded(true)\r\n        } else {\r\n          setPubs([])\r\n          if (onPubsLoaded) onPubsLoaded(false)\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Erreur lors du chargement des pubs\", error)\r\n        setPubs([])\r\n        if (onPubsLoaded) onPubsLoaded(false)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n    fetchPubs()\r\n  }, [onPubsLoaded])\r\n\r\n  const handleMouseDown = (e) => {\r\n    setIsDragging(false)\r\n    setStartX(e.clientX)\r\n  }\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (Math.abs(e.clientX - startX) > 5) setIsDragging(true)\r\n  }\r\n\r\n  const handleClick = (e, pub) => {\r\n    if (!isDragging && pub && pub.image) {\r\n      setSelectedImage(pub)\r\n    }\r\n  }\r\n\r\n  const closeModal = () => {\r\n    setSelectedImage(null)\r\n  }\r\n\r\n  const handleModalClick = (e) => {\r\n    if (e.target === e.currentTarget) {\r\n      closeModal()\r\n    }\r\n  }\r\n\r\n  const settings = {\r\n    infinite: true,\r\n    autoplay: true,\r\n    autoplaySpeed: 2500,\r\n    speed: 500,\r\n    arrows: false,\r\n    dots: true,\r\n    centerMode: true,\r\n    centerPadding: \"6%\",\r\n    slidesToShow: 1,\r\n    swipe: true,\r\n    swipeToSlide: true,\r\n    draggable: true,\r\n    responsive: [\r\n      {\r\n        breakpoint: 1024,\r\n        settings: { centerPadding: \"4%\", dots: true },\r\n      },\r\n      {\r\n        breakpoint: 768,\r\n        settings: {\r\n          centerMode: false,\r\n          centerPadding: \"0%\",\r\n          dots: true,\r\n        },\r\n      },\r\n    ],\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className={`relative w-screen left-1/2 -translate-x-1/2 ${className}`}>\r\n        <div className=\"w-full h-[180px] sm:h-[240px] md:h-[300px] lg:h-[360px] xl:h-[420px] bg-gray-100 flex items-center justify-center\">\r\n          <div className=\"text-gray-500\">Chargement des publicités...</div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!pubs || pubs.length === 0) {\r\n    // Ne pas retourner null immédiatement, laisser le callback gérer\r\n    // Mais si onPubsLoaded n'est pas défini, retourner null\r\n    if (onPubsLoaded && !loading) {\r\n      // Le callback a déjà été appelé dans useEffect\r\n      return null\r\n    }\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className={`relative w-screen left-1/2 -translate-x-1/2 ${className}`}>\r\n        <div className=\"relative\">\r\n          {/* bords lumière: seulement >= sm */}\r\n          <div className=\"pointer-events-none absolute inset-y-0 left-0 w-6 md:w-12 bg-gradient-to-r from-white/80 to-transparent z-10 hidden sm:block\" />\r\n          <div className=\"pointer-events-none absolute inset-y-0 right-0 w-6 md:w-12 bg-gradient-to-l from-white/80 to-transparent z-10 hidden sm:block\" />\r\n\r\n          <SimpleSlider settings={settings} selector={sliderRef}>\r\n            {pubs.map((pub, index) => {\r\n              const imageSrc = pub.image \r\n                ? (pub.image.startsWith('data:image') \r\n                    ? pub.image \r\n                    : `data:image/png;base64,${pub.image}`)\r\n                : null\r\n\r\n              if (!imageSrc) return null\r\n\r\n              return (\r\n                <div\r\n                  key={pub.id || index}\r\n                  className=\"relative cursor-pointer\"\r\n                  onClick={(e) => handleClick(e, pub)}\r\n                  onMouseDown={handleMouseDown}\r\n                  onMouseMove={handleMouseMove}\r\n                >\r\n                  <div className=\"w-full h-[180px] sm:h-[240px] md:h-[300px] lg:h-[360px] xl:h-[420px] bg-white rounded-none\">\r\n                    <img\r\n                      src={imageSrc}\r\n                      alt={pub.name || pub.description || \"Publicité\"}\r\n                      loading=\"lazy\"\r\n                      className=\"\r\n                        w-full h-full object-contain\r\n                        block\r\n                        select-none pointer-events-none\r\n                      \"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )\r\n            })}\r\n          </SimpleSlider>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal pour afficher l'image en grand */}\r\n      {selectedImage && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4\"\r\n          onClick={handleModalClick}\r\n        >\r\n          <div className=\"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center\">\r\n            <button\r\n              onClick={closeModal}\r\n              className=\"absolute top-4 right-4 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2 transition-colors\"\r\n              aria-label=\"Fermer\"\r\n            >\r\n              <X size={24} />\r\n            </button>\r\n            <img\r\n              src={\r\n                selectedImage.image?.startsWith('data:image')\r\n                  ? selectedImage.image\r\n                  : `data:image/png;base64,${selectedImage.image}`\r\n              }\r\n              alt={selectedImage.name || selectedImage.description || \"Publicité\"}\r\n              className=\"max-w-full max-h-full object-contain\"\r\n              onClick={(e) => e.stopPropagation()}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\n","export default \"__VITE_ASSET__CR6tb67Q__\"","export default \"__VITE_ASSET__bWFOArux__\"","export default \"__VITE_ASSET__COyTY3y5__\"","export default \"__VITE_ASSET__BPuqLoHk__\"","export default \"__VITE_ASSET__BmcH5ZX9__\"","export default \"__VITE_ASSET__NI862AwT__\"","export default \"__VITE_ASSET__Cl60FPeW__\"","export default \"__VITE_ASSET__CkPRJ338__\"","export default \"__VITE_ASSET__Bc96nvMe__\"","export default \"__VITE_ASSET__DcjXDFFx__\"","export default \"__VITE_ASSET__CZZulPMt__\"","export default \"__VITE_ASSET__g8evk7s___\"","export default \"__VITE_ASSET__n$4_uQOn__\"","export default \"__VITE_ASSET__DXnXAIBI__\"","export default \"__VITE_ASSET__Bm2$gcyk__\"","export default \"__VITE_ASSET__CAq67Kcy__\"","export default \"__VITE_ASSET__BXPoWuvh__\"","export default \"__VITE_ASSET__DdPgg$EH__\"","export default \"__VITE_ASSET__CZjTL6Ky__\"","export default \"__VITE_ASSET__CPRCxQ2g__\"","export default \"__VITE_ASSET__9mvsKULh__\"","export default \"__VITE_ASSET__CHk5TJgq__\"","export default \"__VITE_ASSET__BuBoC1Dp__\"","export default \"__VITE_ASSET__gk6221ga__\"","export default \"__VITE_ASSET__d0FCzcPX__\"","export default \"__VITE_ASSET__BtJHc$X2__\"","export default \"__VITE_ASSET__MF0PwFx7__\"","export default \"__VITE_ASSET__CxfS1BAq__\"","export default \"__VITE_ASSET__CXG16uZQ__\"","export default \"__VITE_ASSET__DhvbGRRx__\"","export default \"__VITE_ASSET__DC$v6SRS__\"","export default \"__VITE_ASSET__Bl3D7qY4__\"","export default \"__VITE_ASSET__DX2s7X2V__\"","export default \"__VITE_ASSET__DQJM9cVY__\"","export default \"__VITE_ASSET__CcWuIqTI__\"","export default \"__VITE_ASSET__DcNzOAa3__\"","export default \"__VITE_ASSET__CBz2vkGM__\"","\r\n// // /* eslint-disable no-unused-vars */\r\n// // \"use client\"\r\n\r\n// // import { useContext, useEffect, useRef, useState } from \"react\"\r\n// // import { Loader } from \"lucide-react\"\r\n// // import { useCategory } from \"../../Provider/CategoryContext\"\r\n// // import { ProductContext } from \"../../Provider/ProductContext\"\r\n// // import { PromoProductContext } from \"../../Provider/PromoProductContext\"\r\n// // import { useNavigate, useLocation } from \"react-router-dom\"\r\n\r\n// // /* === Imports d'images catégories === */\r\n// // import airFryer from \"../../assets/categories/air-fryer.png\"\r\n// // import aspirateur from \"../../assets/categories/aspirateur.png\"\r\n// // import barreDeSon from \"../../assets/categories/barre-de-son.png\"\r\n// // import bouilloire from \"../../assets/categories/bouilloire.png\"\r\n// // import chauffeEau from \"../../assets/categories/chauffe-eau.png\"\r\n// // import climatiseur from \"../../assets/categories/climatiseur.png\"\r\n// // import congelateur from \"../../assets/categories/congelateur.png\"\r\n// // import cuisiniere from \"../../assets/categories/cuisiniere.png\"\r\n// // import extracteurDeJus from \"../../assets/categories/extracteur-de-jus.png\"\r\n// // import ferARepasser from \"../../assets/categories/fer-a-repasser.png\"\r\n// // import fontaine from \"../../assets/categories/fontaine.png\"\r\n// // import four from \"../../assets/categories/four.png\"\r\n// // import fourEncastrable from \"../../assets/categories/four-encastrable.png\"\r\n// // import homeCinema from \"../../assets/categories/home-cinema.png\"\r\n// // import hotteDeCuisine from \"../../assets/categories/hotte-de-cuisine.png\"\r\n// // import laveVaisselle from \"../../assets/categories/lave-vaisselle.png\"\r\n// // import machineACafe from \"../../assets/categories/machine-a-cafe.png\"\r\n// // import machineALaver from \"../../assets/categories/machine-a-laver.png\"\r\n// // import microOnde from \"../../assets/categories/micro-onde.png\"\r\n// // import miniChaine from \"../../assets/categories/mini-chaine.png\"\r\n// // import mixeur from \"../../assets/categories/mixeur.png\"\r\n// // import nonCategorise from \"../../assets/categories/all.png\"\r\n// // import plaqueDeCuisson from \"../../assets/categories/plaque-de-cuisson.png\"\r\n// // import refrigerateur from \"../../assets/categories/refrigerateur.png\"\r\n// // import regulateur from \"../../assets/categories/regulateur.png\"\r\n// // import secheLinge from \"../../assets/categories/seche-linge.png\"\r\n// // import telephone from \"../../assets/categories/telephone.png\"\r\n// // import television from \"../../assets/categories/television.png\"\r\n// // import ventilateur from \"../../assets/categories/ventilateur.png\"\r\n// // import chaise from \"../../assets/categories/chaise.png\"\r\n// // import coffre from \"../../assets/categories/coffre.jpg\"\r\n// // import tout from \"../../assets/tout_produit.jpg\"    // “tous les produits”\r\n// // import logo from \"../../assets/logo_192.png\"\r\n// // import televiseur from \"../../assets/categories/television.png\"\r\n// // import grille_pain from \"../../assets/categories/grille_pain.png\"\r\n// // import support_tv from \"../../assets/categories/support_tv.jpg\"\r\n// // import blender from \"../../assets/categories/blender.jpg\"\r\n// // import ordinateur from \"../../assets/categories/ordinateur.jpg\"\r\n\r\n// // /* ================== Utils images + mapping ================== */\r\n\r\n// // /** Normalise un libellé pour clé de mapping (majuscules, sans accents, espaces condensés) */\r\n// // const normalizeName = (s = \"\") =>\r\n// //   s\r\n// //     .normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\")\r\n// //     .toUpperCase()\r\n// //     .replace(/\\s+/g, \" \")\r\n// //     .trim()\r\n\r\n// // /** Mapping d’origine (lisible) */\r\n// // const RAW_CATEGORY_IMAGES = {\r\n// //   All: tout,\r\n// //   \"AIR FRYER\": airFryer,\r\n// //   ASPIRATEUR: aspirateur,\r\n// //   \"BARRE DE SON\": barreDeSon,\r\n// //   BOUILLOIRE: bouilloire,\r\n// //   \"CHAUFFE EAU\": chauffeEau,\r\n// //   CLIMATISEUR: climatiseur,\r\n// //   CONGELATEUR: congelateur,\r\n// //   CUISINIERE: cuisiniere,\r\n// //   \"EXTRACTEUR DE JUS\": extracteurDeJus,\r\n// //   \"FER A REPASSER\": ferARepasser,\r\n// //   FONTAINE: fontaine,\r\n// //   FOUR: four,\r\n// //   \"FOUR ENCASTRABLE\": fourEncastrable,\r\n// //   \"HOME CINEMA\": homeCinema,\r\n// //   \"HOTTE DE CUISINE\": hotteDeCuisine,\r\n// //   \"LAVE VAISSELLE\": laveVaisselle,\r\n// //   \"MACHINE A CAFE\": machineACafe,\r\n// //   \"MACHINE A LAVER\": machineALaver,\r\n// //   \"MICRO ONDE\": microOnde,\r\n// //   \"MINI CHAINE\": miniChaine,\r\n// //   MIXEUR: mixeur,\r\n// //   \"Non categorise\": nonCategorise,\r\n// //   \"PLAQUE DE CUISSON\": plaqueDeCuisson,\r\n// //   REFRIGERATEUR: refrigerateur,\r\n// //   REGULATEUR: regulateur,\r\n// //   \"SECHE LINGE\": secheLinge,\r\n// //   TELEPHONE: telephone,\r\n// //   TELEVISION: television || televiseur,\r\n// //   TELEVISEUR: television || televiseur,\r\n// //   VENTILATEUR: ventilateur,\r\n// //   CHAISE: chaise,\r\n// //   COFFRE: coffre,\r\n// //   \"SUPPORT TV\": support_tv,\r\n// //   \"GRILLE PAIN\": grille_pain,\r\n// //   \"BLENDER\": blender,\r\n// //   ORDINATEUR: ordinateur,\r\n// // }\r\n\r\n// // /** Mapping final avec clés normalisées */\r\n// // const categoryImages = Object.fromEntries(\r\n// //   Object.entries(RAW_CATEGORY_IMAGES).map(([k, v]) => [normalizeName(k), v])\r\n// // )\r\n\r\n// // /** Devine le MIME d’un base64 brut (sans dataURL) */\r\n// // const guessMimeFromBase64 = (b64 = \"\") => {\r\n// //   if (b64.startsWith(\"/9j/\")) return \"image/jpeg\"           // JPEG\r\n// //   if (b64.startsWith(\"iVBORw0KGgo\")) return \"image/png\"     // PNG\r\n// //   if (b64.startsWith(\"UklGR\")) return \"image/webp\"          // WebP\r\n// //   return \"image/png\"\r\n// // }\r\n\r\n// // /** Résout la source image depuis: URL http(s), dataURL, base64 brut, ou fallback local/logo */\r\n// // const getCategoryImageSrc = (category) => {\r\n// //   const img = category?.image\r\n// //   // URL http(s)\r\n// //   if (typeof img === \"string\" && /^https?:\\/\\//i.test(img)) return img\r\n// //   // dataURL complet\r\n// //   if (typeof img === \"string\" && /^data:image\\//i.test(img)) return img\r\n// //   // base64 brut plausible\r\n// //   if (typeof img === \"string\" && img.length > 40 && /^[A-Za-z0-9+/=]+$/.test(img)) {\r\n// //     const mime = guessMimeFromBase64(img)\r\n// //     return `data:${mime};base64,${img}`\r\n// //   }\r\n// //   // image locale par catégorie (avec normalisation)\r\n// //   const key = normalizeName(category?.name)\r\n// //   return categoryImages[key] ?? logo\r\n// // }\r\n\r\n// // /* ================== Hook auto-scroll gauche -> droite ================== */\r\n// // // Remplace ton useAutoScroll par ceci\r\n// // function usePingPongScroll(ref, { speed = 0.06, paused = false } = {}) {\r\n// //   useEffect(() => {\r\n// //     const el = ref.current;\r\n// //     if (!el) return;\r\n\r\n// //     let raf;\r\n// //     let last = 0;\r\n// //     let dir = 1; // 1 = L->R, -1 = R->L\r\n\r\n// //     const tick = (t) => {\r\n// //       if (!last) last = t;\r\n// //       const dt = t - last;\r\n// //       last = t;\r\n\r\n// //       if (!paused) {\r\n// //         const max = Math.max(0, el.scrollWidth - el.clientWidth);\r\n// //         el.scrollLeft += dir * dt * speed;\r\n\r\n// //         // Rebond aux extrémités\r\n// //         if (el.scrollLeft >= max - 1) {\r\n// //           el.scrollLeft = max;\r\n// //           dir = -1;\r\n// //         } else if (el.scrollLeft <= 0) {\r\n// //           el.scrollLeft = 0;\r\n// //           dir = 1;\r\n// //         }\r\n// //       }\r\n// //       raf = requestAnimationFrame(tick);\r\n// //     };\r\n\r\n// //     raf = requestAnimationFrame(tick);\r\n// //     return () => cancelAnimationFrame(raf);\r\n// //   }, [ref, speed, paused]);\r\n// // }\r\n\r\n\r\n// // /* ================== Composant ================== */\r\n// // export default function CategoriesSection() {\r\n// //   const location = useLocation()\r\n// //   const navigate = useNavigate()\r\n// //   const { updateFilters: updateProductFilters } = useContext(ProductContext)\r\n// //   const { updateFilters: updatePromoFilters } = useContext(PromoProductContext)\r\n// //   const { categories, updateSelectedCategory } = useCategory()\r\n\r\n// //   // refs pour mobile et desktop + pause au survol\r\n// //   const mobileRef = useRef(null)\r\n// //   const desktopRef = useRef(null)\r\n// //   const [paused, setPaused] = useState(false)\r\n\r\n// //   // auto-scroll gauche -> droite\r\n// //   usePingPongScroll(mobileRef, { speed: 0.06, paused })\r\n// //   usePingPongScroll(desktopRef, { speed: 0.06, paused })\r\n\r\n// //   /* ------ Click/Navigation ------ */\r\n// //   const handleCategoryChange = (e, category) => {\r\n// //     e.preventDefault()\r\n// //     const newFilters = {\r\n// //       category: category.name,\r\n// //       page: 1,\r\n// //       search: \"\",\r\n// //       min: 1000,\r\n// //       max: 5000000,\r\n// //       limit: 9,\r\n// //       tag: \"All\",\r\n// //     }\r\n\r\n// //     updateSelectedCategory(category.name)\r\n\r\n// //     const params = new URLSearchParams()\r\n// //     if (category.name !== \"All\") {\r\n// //       params.set(\"page\", \"1\")\r\n// //       params.set(\"category\", category.name)\r\n// //     }\r\n\r\n// //     if (location.pathname === \"/en-promo\") {\r\n// //       updatePromoFilters(newFilters)\r\n// //       navigate(`/en-promo?${params.toString()}`)\r\n// //     } else if (location.pathname === \"/promo-ramadan\") {\r\n// //       updatePromoFilters(newFilters)\r\n// //       navigate(`/promo-ramadan?${params.toString()}`)\r\n// //     } else {\r\n// //       updateProductFilters(newFilters)\r\n// //       navigate(`/boutique?${params.toString()}`)\r\n// //     }\r\n// //   }\r\n\r\n// //   /* ------ Tri : “All” d’abord ------ */\r\n// //   const sortedCategories = [...categories].sort((a, b) => {\r\n// //     if (a.name === \"All\") return -1\r\n// //     if (b.name === \"All\") return 1\r\n// //     return 0\r\n// //   })\r\n\r\n// //   /* ================== RENDER ================== */\r\n// //   return (\r\n// //     <>\r\n// //       {/* ======== MOBILE (<= md) : 2 lignes, scroll auto L->R ======== */}\r\n// //       <div\r\n// //         ref={mobileRef}\r\n// //         onMouseEnter={() => setPaused(true)}\r\n// //         onMouseLeave={() => setPaused(false)}\r\n// //         className=\"\r\n// //           flex gap-4 sm:gap-6 overflow-x-auto scroll-smooth \r\n// //           snap-x snap-mandatory px-1\r\n// //           scrollbar-hide\r\n// //         \"\r\n// //         dir=\"ltr\"\r\n// //       >\r\n// //         {sortedCategories.map((category) => {\r\n// //           const src = getCategoryImageSrc(category)\r\n// //           return (\r\n// //             <button\r\n// //               key={category.id}\r\n// //               onClick={(e) => handleCategoryChange(e, category)}\r\n// //               aria-label={category.name}\r\n// //               className=\"\r\n// //                 md:hidden\r\n// //                 group flex-shrink-0 snap-start\r\n// //                 w-1/2 sm:w-1/4 md:w-1/6 lg:w-[12rem]\r\n// //                 aspect-square\r\n// //                 rounded-2xl border border-gray-200 bg-white\r\n// //                 hover:border-bleu-logo/30 focus:outline-none focus:ring-2 focus:ring-bleu-logo/50\r\n// //               \"\r\n// //             >\r\n// //               <div className=\"relative w-full h-full rounded-2xl overflow-hidden\">\r\n// //                 <img\r\n// //                   src={src}\r\n// //                   alt={category.name}\r\n// //                   loading=\"lazy\"\r\n// //                   decoding=\"async\"\r\n// //                   onError={(e) => {\r\n// //                     e.currentTarget.onerror = null\r\n// //                     e.currentTarget.src = categoryImages[normalizeName(category?.name)] ?? logo\r\n// //                   }}\r\n// //                   className=\"\r\n// //                     absolute inset-0 w-full h-full object-cover\r\n// //                     transition-transform duration-300 ease-out\r\n// //                     group-hover:scale-105\r\n// //                   \"\r\n// //                 />\r\n\r\n// //                 <div className=\"absolute inset-0 bg-black/25 group-hover:bg-black/15 transition-colors\" />\r\n\r\n// //                 {/* coin haut-gauche */}\r\n// //                 <div className=\"absolute top-3 left-3 w-6 h-6 rounded-sm border-t-4 border-l-4 border-white/90\" />\r\n\r\n// //                 {/* pastille haut-droite */}\r\n// //                 <div className=\"absolute top-3 right-3 w-5 h-5 rounded-full bg-white shadow\" />\r\n\r\n// //                 {/* ruban diagonal haut-droite */}\r\n// //                 <div\r\n// //                   className=\"absolute -top-[1px] -right-[1px]\r\n// //                              w-0 h-0\r\n// //                              border-top-[46px] border-t-bleu-logo\r\n// //                              border-l-[46px] border-l-transparent\"\r\n// //                 />\r\n\r\n// //                 {/* libellé */}\r\n// //                 <div className=\"absolute bottom-3 left-3\">\r\n// //                   <span className=\"inline-block bg-bleu-logo text-white font-extrabold uppercase tracking-wide px-3 py-1 rounded\">\r\n// //                     {category.name === \"All\" ? \"Tous\" : category.name}\r\n// //                   </span>\r\n// //                 </div>\r\n\r\n// //                 <div className=\"absolute inset-0 rounded-2xl ring-1 ring-white/20 pointer-events-none\" />\r\n// //               </div>\r\n// //             </button>\r\n// //           )\r\n// //         })}\r\n\r\n// //         {!categories.length && (\r\n// //           <div className=\"flex justify-center items-center py-8\">\r\n// //             <Loader className=\"animate-spin\" />\r\n// //           </div>\r\n// //         )}\r\n// //       </div>\r\n\r\n// //       {/* ======== DESKTOP (>= md) : grille horizontale auto L->R ======== */}\r\n// //       <div\r\n// //         ref={desktopRef}\r\n// //         onMouseEnter={() => setPaused(true)}\r\n// //         onMouseLeave={() => setPaused(false)}\r\n// //         className=\"\r\n// //           hidden md:grid\r\n// //           grid-rows-2 grid-flow-col\r\n// //           auto-cols-[11rem] sm:auto-cols-[13rem]\r\n// //           gap-4 sm:gap-5\r\n// //           overflow-x-auto scroll-smooth px-1\r\n// //           scrollbar-hide\r\n// //         \"\r\n// //         dir=\"ltr\"\r\n// //       >\r\n// //         {sortedCategories.map((category) => {\r\n// //           const src = getCategoryImageSrc(category)\r\n// //           return (\r\n// //             <button\r\n// //               key={`m-${category.id}`}\r\n// //               onClick={(e) => handleCategoryChange(e, category)}\r\n// //               aria-label={category.name}\r\n// //               title={category.name === \"All\" ? \"Tout\" : category.name}\r\n// //               className=\"\r\n// //                 group snap-start w-full\r\n// //                 h-[9.5rem] sm:h-[11rem]\r\n// //                 rounded-2xl border border-gray-200 bg-white\r\n// //                 hover:border-bleu-logo/30 focus:outline-none focus:ring-2 focus:ring-bleu-logo/50\r\n// //               \"\r\n// //             >\r\n// //               <div className=\"relative w-full h-full rounded-2xl overflow-hidden\">\r\n// //                 <img\r\n// //                   src={src}\r\n// //                   alt={category.name}\r\n// //                   loading=\"lazy\"\r\n// //                   decoding=\"async\"\r\n// //                   onError={(e) => {\r\n// //                     console.warn(\"Image cassée (desktop):\", category?.name, e.currentTarget.src)\r\n// //                     e.currentTarget.onerror = null\r\n// //                     e.currentTarget.src = logo\r\n// //                   }}\r\n// //                   className=\"\r\n// //                     absolute inset-0 w-full h-full object-cover\r\n// //                     transition-transform duration-300 ease-out\r\n// //                     group-hover:scale-105\r\n// //                   \"\r\n// //                 />\r\n// //                 <div className=\"absolute inset-0 bg-black/25 group-hover:bg-black/15 transition-colors\" />\r\n// //                 <div className=\"absolute bottom-3 left-3\">\r\n// //                   <span className=\"inline-block bg-bleu-logo text-white font-extrabold uppercase tracking-wide px-3 py-1 rounded\">\r\n// //                     {category.name === \"All\" ? \"Tous\" : category.name}\r\n// //                   </span>\r\n// //                 </div>\r\n// //                 <div className=\"absolute inset-0 rounded-2xl ring-1 ring-white/20 pointer-events-none\" />\r\n// //               </div>\r\n// //             </button>\r\n// //           )\r\n// //         })}\r\n\r\n// //         {!categories.length && (\r\n// //           <div className=\"flex justify-center items-center py-8\">\r\n// //             <Loader className=\"animate-spin\" />\r\n// //           </div>\r\n// //         )}\r\n// //       </div>\r\n// //     </>\r\n// //   )\r\n// // }\r\n\r\n\r\n\r\n\r\n// /* eslint-disable no-unused-vars */\r\n// /* eslint-disable react/prop-types */\r\n// \"use client\";\r\n\r\n// import { useContext, useEffect, useRef, useState } from \"react\";\r\n// import { Loader } from \"lucide-react\";\r\n// import { useCategory } from \"../../Provider/CategoryContext\";\r\n// import { ProductContext } from \"../../Provider/ProductContext\";\r\n// import { PromoProductContext } from \"../../Provider/PromoProductContext\";\r\n// import { useNavigate, useLocation } from \"react-router-dom\";\r\n\r\n// /* === Imports d'images catégories === */\r\n// import airFryer from \"../../assets/categories/air-fryer.png\";\r\n// import aspirateur from \"../../assets/categories/aspirateur.png\";\r\n// import barreDeSon from \"../../assets/categories/barre-de-son.png\";\r\n// import bouilloire from \"../../assets/categories/bouilloire.png\";\r\n// import chauffeEau from \"../../assets/categories/chauffe-eau.png\";\r\n// import climatiseur from \"../../assets/categories/climatiseur.png\";\r\n// import congelateur from \"../../assets/categories/congelateur.png\";\r\n// import cuisiniere from \"../../assets/categories/cuisiniere.png\";\r\n// import extracteurDeJus from \"../../assets/categories/extracteur-de-jus.png\";\r\n// import ferARepasser from \"../../assets/categories/fer-a-repasser.png\";\r\n// import fontaine from \"../../assets/categories/fontaine.png\";\r\n// import four from \"../../assets/categories/four.png\";\r\n// import fourEncastrable from \"../../assets/categories/four-encastrable.png\";\r\n// import homeCinema from \"../../assets/categories/home-cinema.png\";\r\n// import hotteDeCuisine from \"../../assets/categories/hotte-de-cuisine.png\";\r\n// import laveVaisselle from \"../../assets/categories/lave-vaisselle.png\";\r\n// import machineACafe from \"../../assets/categories/machine-a-cafe.png\";\r\n// import machineALaver from \"../../assets/categories/machine-a-laver.png\";\r\n// import microOnde from \"../../assets/categories/micro-onde.png\";\r\n// import miniChaine from \"../../assets/categories/mini-chaine.png\";\r\n// import mixeur from \"../../assets/categories/mixeur.png\";\r\n// import nonCategorise from \"../../assets/categories/all.png\";\r\n// import plaqueDeCuisson from \"../../assets/categories/plaque-de-cuisson.png\";\r\n// import refrigerateur from \"../../assets/categories/refrigerateur.png\";\r\n// import regulateur from \"../../assets/categories/regulateur.png\";\r\n// import secheLinge from \"../../assets/categories/seche-linge.png\";\r\n// import telephone from \"../../assets/categories/telephone.png\";\r\n// import television from \"../../assets/categories/television.png\";\r\n// import ventilateur from \"../../assets/categories/ventilateur.png\";\r\n// import chaise from \"../../assets/categories/chaise.png\";\r\n// import coffre from \"../../assets/categories/coffre.jpg\";\r\n// import tout from \"../../assets/tout_produit.jpg\"; // “tous les produits”\r\n// import logo from \"../../assets/logo_192.png\";\r\n// import televiseur from \"../../assets/categories/television.png\";\r\n// import grille_pain from \"../../assets/categories/grille_pain.png\";\r\n// import support_tv from \"../../assets/categories/support_tv.jpg\";\r\n// import blender from \"../../assets/categories/blender.jpg\";\r\n// import ordinateur from \"../../assets/categories/ordinateur.jpg\";\r\n\r\n// /* ================== Utils images + mapping ================== */\r\n\r\n// /** Normalise un libellé pour clé de mapping (majuscules, sans accents, espaces condensés) */\r\n// const normalizeName = (s = \"\") =>\r\n//   s\r\n//     .normalize(\"NFD\")\r\n//     .replace(/[\\u0300-\\u036f]/g, \"\")\r\n//     .toUpperCase()\r\n//     .replace(/\\s+/g, \" \")\r\n//     .trim();\r\n\r\n// /** Mapping d’origine (lisible) */\r\n// const RAW_CATEGORY_IMAGES = {\r\n//   All: tout,\r\n//   \"AIR FRYER\": airFryer,\r\n//   ASPIRATEUR: aspirateur,\r\n//   \"BARRE DE SON\": barreDeSon,\r\n//   BOUILLOIRE: bouilloire,\r\n//   \"CHAUFFE EAU\": chauffeEau,\r\n//   CLIMATISEUR: climatiseur,\r\n//   CONGELATEUR: congelateur,\r\n//   CUISINIERE: cuisiniere,\r\n//   \"EXTRACTEUR DE JUS\": extracteurDeJus,\r\n//   \"FER A REPASSER\": ferARepasser,\r\n//   FONTAINE: fontaine,\r\n//   FOUR: four,\r\n//   \"FOUR ENCASTRABLE\": fourEncastrable,\r\n//   \"HOME CINEMA\": homeCinema,\r\n//   \"HOTTE DE CUISINE\": hotteDeCuisine,\r\n//   \"LAVE VAISSELLE\": laveVaisselle,\r\n//   \"MACHINE A CAFE\": machineACafe,\r\n//   \"MACHINE A LAVER\": machineALaver,\r\n//   \"MICRO ONDE\": microOnde,\r\n//   \"MINI CHAINE\": miniChaine,\r\n//   MIXEUR: mixeur,\r\n//   \"Non categorise\": nonCategorise,\r\n//   \"PLAQUE DE CUISSON\": plaqueDeCuisson,\r\n//   REFRIGERATEUR: refrigerateur,\r\n//   REGULATEUR: regulateur,\r\n//   \"SECHE LINGE\": secheLinge,\r\n//   TELEPHONE: telephone,\r\n//   TELEVISION: television || televiseur,\r\n//   TELEVISEUR: television || televiseur,\r\n//   VENTILATEUR: ventilateur,\r\n//   CHAISE: chaise,\r\n//   COFFRE: coffre,\r\n//   \"SUPPORT TV\": support_tv,\r\n//   \"GRILLE PAIN\": grille_pain,\r\n//   \"BLENDER\": blender,\r\n//   ORDINATEUR: ordinateur,\r\n// };\r\n\r\n// /** Mapping final avec clés normalisées */\r\n// const categoryImages = Object.fromEntries(\r\n//   Object.entries(RAW_CATEGORY_IMAGES).map(([k, v]) => [normalizeName(k), v])\r\n// );\r\n\r\n// /** Devine le MIME d’un base64 brut (sans dataURL) */\r\n// const guessMimeFromBase64 = (b64 = \"\") => {\r\n//   if (b64.startsWith(\"/9j/\")) return \"image/jpeg\"; // JPEG\r\n//   if (b64.startsWith(\"iVBORw0KGgo\")) return \"image/png\"; // PNG\r\n//   if (b64.startsWith(\"UklGR\")) return \"image/webp\"; // WebP\r\n//   return \"image/png\";\r\n// };\r\n\r\n// /** Résout la source image depuis: URL http(s), dataURL, base64 brut, ou fallback local/logo */\r\n// const getCategoryImageSrc = (category) => {\r\n//   const img = category?.image;\r\n//   if (typeof img === \"string\" && /^https?:\\/\\//i.test(img)) return img;         // URL http(s)\r\n//   if (typeof img === \"string\" && /^data:image\\//i.test(img)) return img;        // dataURL\r\n//   if (typeof img === \"string\" && img.length > 40 && /^[A-Za-z0-9+/=]+$/.test(img)) {\r\n//     const mime = guessMimeFromBase64(img);\r\n//     return `data:${mime};base64,${img}`;\r\n//   }\r\n//   const key = normalizeName(category?.name);\r\n//   return categoryImages[key] ?? logo;\r\n// };\r\n\r\n// /* ================== Hook auto-scroll gauche -> droite (ping-pong) ================== */\r\n// function usePingPongScroll(ref, { speed = 0.06, paused = false } = {}) {\r\n//   useEffect(() => {\r\n//     const el = ref.current;\r\n//     if (!el) return;\r\n\r\n//     let raf;\r\n//     let last = 0;\r\n//     let dir = 1; // 1 = L->R, -1 = R->L\r\n\r\n//     const tick = (t) => {\r\n//       if (!last) last = t;\r\n//       const dt = t - last;\r\n//       last = t;\r\n\r\n//       if (!paused) {\r\n//         const max = Math.max(0, el.scrollWidth - el.clientWidth);\r\n//         el.scrollLeft += dir * dt * speed;\r\n//         if (el.scrollLeft >= max - 1) {\r\n//           el.scrollLeft = max;\r\n//           dir = -1;\r\n//         } else if (el.scrollLeft <= 0) {\r\n//           el.scrollLeft = 0;\r\n//           dir = 1;\r\n//         }\r\n//       }\r\n//       raf = requestAnimationFrame(tick);\r\n//     };\r\n\r\n//     raf = requestAnimationFrame(tick);\r\n//     return () => cancelAnimationFrame(raf);\r\n//   }, [ref, speed, paused]);\r\n// }\r\n\r\n// /* ================== Hook drag-to-scroll (mobile + desktop, axe-friendly) ================== */\r\n// function useDragScroll(ref, draggingRef, { pause } = {}) {\r\n//   useEffect(() => {\r\n//     const el = ref.current;\r\n//     if (!el) return;\r\n\r\n//     let isDown = false;\r\n//     let startX = 0;\r\n//     let startY = 0;\r\n//     let scrollStart = 0;\r\n//     let isHorizontal = false;\r\n//     const CLICK_THRESHOLD = 6;   // px\r\n//     const AXIS_THRESHOLD  = 8;   // px pour décider H vs V\r\n\r\n//     const onPointerDown = (e) => {\r\n//       if (pause) pause(true); // pause auto-scroll pendant le drag\r\n//       el.style.scrollBehavior = \"auto\";\r\n//       isDown = true;\r\n//       draggingRef.current = false;\r\n//       isHorizontal = false;\r\n\r\n//       startX = e.clientX ?? (e.touches ? e.touches[0].clientX : 0);\r\n//       startY = e.clientY ?? (e.touches ? e.touches[0].clientY : 0);\r\n//       scrollStart = el.scrollLeft;\r\n\r\n//       if (e.pointerId != null) el.setPointerCapture?.(e.pointerId);\r\n//     };\r\n\r\n//     const onPointerMove = (e) => {\r\n//       if (!isDown) return;\r\n//       const x = e.clientX ?? (e.touches ? e.touches[0].clientX : 0);\r\n//       const y = e.clientY ?? (e.touches ? e.touches[0].clientY : 0);\r\n//       const dx = x - startX;\r\n//       const dy = y - startY;\r\n\r\n//       // Verrouille l'axe une fois décidé\r\n//       if (!isHorizontal && (Math.abs(dx) > AXIS_THRESHOLD || Math.abs(dy) > AXIS_THRESHOLD)) {\r\n//         isHorizontal = Math.abs(dx) > Math.abs(dy);\r\n//       }\r\n\r\n//       if (isHorizontal) {\r\n//         // On consomme le geste H et on suit le doigt\r\n//         e.cancelable && e.preventDefault();\r\n//         if (Math.abs(dx) > CLICK_THRESHOLD) draggingRef.current = true;\r\n//         el.scrollLeft = scrollStart - dx;\r\n//       } else {\r\n//         // Laisse le scroll vertical de la page\r\n//         return;\r\n//       }\r\n//     };\r\n\r\n//     const end = (e) => {\r\n//       if (!isDown) return;\r\n//       isDown = false;\r\n//       el.style.scrollBehavior = \"\"; // restore smooth\r\n//       if (e?.pointerId != null) el.releasePointerCapture?.(e.pointerId);\r\n\r\n//       // évite le clic fantôme juste après un drag\r\n//       setTimeout(() => { draggingRef.current = false; }, 80);\r\n//       // reprend l’auto-scroll un peu après\r\n//       setTimeout(() => { if (pause) pause(false); }, 120);\r\n//     };\r\n\r\n//     // Pointer Events (souris + tactile). move non-passive pour pouvoir preventDefault\r\n//     el.addEventListener(\"pointerdown\", onPointerDown, { passive: true });\r\n//     el.addEventListener(\"pointermove\", onPointerMove, { passive: false });\r\n//     el.addEventListener(\"pointerup\", end, { passive: true });\r\n//     el.addEventListener(\"pointercancel\", end, { passive: true });\r\n//     el.addEventListener(\"pointerleave\", end, { passive: true });\r\n\r\n//     // iOS momentum + scrollbar discrète\r\n//     el.style.webkitOverflowScrolling = \"touch\";\r\n//     el.style.msOverflowStyle = \"none\";\r\n//     el.style.scrollbarWidth = \"none\";\r\n\r\n//     return () => {\r\n//       el.removeEventListener(\"pointerdown\", onPointerDown);\r\n//       el.removeEventListener(\"pointermove\", onPointerMove);\r\n//       el.removeEventListener(\"pointerup\", end);\r\n//       el.removeEventListener(\"pointercancel\", end);\r\n//       el.removeEventListener(\"pointerleave\", end);\r\n//     };\r\n//   }, [ref, draggingRef, pause]);\r\n// }\r\n\r\n// /* ================== Composant ================== */\r\n// export default function CategoriesSection() {\r\n//   const location = useLocation();\r\n//   const navigate = useNavigate();\r\n//   const { updateFilters: updateProductFilters } = useContext(ProductContext);\r\n//   const { updateFilters: updatePromoFilters } = useContext(PromoProductContext);\r\n//   const { categories, updateSelectedCategory } = useCategory();\r\n\r\n//   const mobileRef = useRef(null);\r\n//   const desktopRef = useRef(null);\r\n//   const [paused, setPaused] = useState(false);\r\n//   const draggingRef = useRef(false); // évite clic pendant drag\r\n\r\n//   // Auto défilement ping-pong\r\n//   usePingPongScroll(mobileRef,  { speed: 0.06, paused });\r\n//   usePingPongScroll(desktopRef, { speed: 0.06, paused });\r\n\r\n//   // Drag natif (mobile + desktop) + pause/reprise auto-scroll\r\n//   useDragScroll(mobileRef,  draggingRef, { pause: setPaused });\r\n//   useDragScroll(desktopRef, draggingRef, { pause: setPaused });\r\n\r\n//   /* ------ Click/Navigation ------ */\r\n//   const handleCategoryChange = (e, category) => {\r\n//     if (draggingRef.current) return; // ignore clic si on glisse\r\n//     e.preventDefault();\r\n\r\n//     const newFilters = {\r\n//       category: category.name,\r\n//       page: 1,\r\n//       search: \"\",\r\n//       min: 1000,\r\n//       max: 5000000,\r\n//       limit: 9,\r\n//       tag: \"All\",\r\n//     };\r\n\r\n//     updateSelectedCategory(category.name);\r\n\r\n//     const params = new URLSearchParams();\r\n//     if (category.name !== \"All\") {\r\n//       params.set(\"page\", \"1\");\r\n//       params.set(\"category\", category.name);\r\n//     }\r\n\r\n//     if (location.pathname === \"/en-promo\") {\r\n//       updatePromoFilters(newFilters);\r\n//       navigate(`/en-promo?${params.toString()}`);\r\n//     } else if (location.pathname === \"/promo-ramadan\") {\r\n//       updatePromoFilters(newFilters);\r\n//       navigate(`/promo-ramadan?${params.toString()}`);\r\n//     } else {\r\n//       updateProductFilters(newFilters);\r\n//       navigate(`/boutique?${params.toString()}`);\r\n//     }\r\n//   };\r\n\r\n//   /* ------ Tri : “All” d’abord ------ */\r\n//   const sortedCategories = [...categories].sort((a, b) => {\r\n//     if (a.name === \"All\") return -1;\r\n//     if (b.name === \"All\") return 1;\r\n//     return 0;\r\n//   });\r\n\r\n//   /* ================== RENDER ================== */\r\n//   return (\r\n//     <>\r\n//       {/* ======== MOBILE (<= md) : scroll auto + drag ======== */}\r\n//       <div\r\n//         ref={mobileRef}\r\n//         onMouseEnter={() => setPaused(true)}\r\n//         onMouseLeave={() => setPaused(false)}\r\n//         className=\"\r\n//           flex gap-4 sm:gap-6 overflow-x-auto scroll-smooth \r\n//           snap-x snap-mandatory px-1\r\n//           touch-pan-x overscroll-x-contain\r\n//         \"\r\n//         style={{ WebkitOverflowScrolling: \"touch\", touchAction: \"pan-x pinch-zoom\" }}\r\n//         dir=\"ltr\"\r\n//       >\r\n//         {sortedCategories.map((category) => {\r\n//           const src = getCategoryImageSrc(category);\r\n//           return (\r\n//             <button\r\n//               key={category.id}\r\n//               onClick={(e) => handleCategoryChange(e, category)}\r\n//               aria-label={category.name}\r\n//               className=\"\r\n//                 md:hidden\r\n//                 group flex-shrink-0 snap-start\r\n//                 w-1/2 sm:w-1/4 md:w-1/6 lg:w-[12rem]\r\n//                 aspect-square\r\n//                 rounded-2xl border border-gray-200 bg-white\r\n//                 hover:border-bleu-logo/30 focus:outline-none focus:ring-2 focus:ring-bleu-logo/50\r\n//               \"\r\n//             >\r\n//               <div className=\"relative w-full h-full rounded-2xl overflow-hidden\">\r\n//                 <img\r\n//                   src={src}\r\n//                   alt={category.name}\r\n//                   loading=\"lazy\"\r\n//                   decoding=\"async\"\r\n//                   draggable={false}\r\n//                   onDragStart={(e) => e.preventDefault()}\r\n//                   onError={(e) => {\r\n//                     e.currentTarget.onerror = null;\r\n//                     e.currentTarget.src =\r\n//                       categoryImages[normalizeName(category?.name)] ?? logo;\r\n//                   }}\r\n//                   className=\"\r\n//                     absolute inset-0 w-full h-full object-cover\r\n//                     transition-transform duration-300 ease-out\r\n//                     group-hover:scale-105 select-none\r\n//                   \"\r\n//                 />\r\n\r\n//                 <div className=\"absolute inset-0 bg-black/25 group-hover:bg-black/15 transition-colors\" />\r\n\r\n//                 {/* coin haut-gauche */}\r\n//                 <div className=\"absolute top-3 left-3 w-6 h-6 rounded-sm border-t-4 border-l-4 border-white/90\" />\r\n\r\n//                 {/* pastille haut-droite */}\r\n//                 <div className=\"absolute top-3 right-3 w-5 h-5 rounded-full bg-white shadow\" />\r\n\r\n//                 {/* ruban diagonal haut-droite */}\r\n//                 <div\r\n//                   className=\"absolute -top-[1px] -right-[1px]\r\n//                              w-0 h-0\r\n//                              border-t-[46px] border-t-bleu-logo\r\n//                              border-l-[46px] border-l-transparent\"\r\n//                 />\r\n\r\n//                 {/* libellé */}\r\n//                 <div className=\"absolute bottom-3 left-3\">\r\n//                   <span className=\"inline-block bg-bleu-logo text-white font-extrabold uppercase tracking-wide px-3 py-1 rounded\">\r\n//                     {category.name === \"All\" ? \"Tous\" : category.name}\r\n//                   </span>\r\n//                 </div>\r\n\r\n//                 <div className=\"absolute inset-0 rounded-2xl ring-1 ring-white/20 pointer-events-none\" />\r\n//               </div>\r\n//             </button>\r\n//           );\r\n//         })}\r\n\r\n//         {!categories.length && (\r\n//           <div className=\"flex justify-center items-center py-8\">\r\n//             <Loader className=\"animate-spin\" />\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n\r\n//       {/* ======== DESKTOP (>= md) : grille horizontale auto + drag ======== */}\r\n//       <div\r\n//         ref={desktopRef}\r\n//         onMouseEnter={() => setPaused(true)}\r\n//         onMouseLeave={() => setPaused(false)}\r\n//         className=\"\r\n//           hidden md:grid\r\n//           grid-rows-2 grid-flow-col\r\n//           auto-cols-[11rem] sm:auto-cols-[13rem]\r\n//           gap-4 sm:gap-5\r\n//           overflow-x-auto scroll-smooth px-1\r\n//           touch-pan-x overscroll-x-contain\r\n//         \"\r\n//         style={{ WebkitOverflowScrolling: \"touch\", touchAction: \"pan-x pinch-zoom\" }}\r\n//         dir=\"ltr\"\r\n//       >\r\n//         {sortedCategories.map((category) => {\r\n//           const src = getCategoryImageSrc(category);\r\n//           return (\r\n//             <button\r\n//               key={`m-${category.id}`}\r\n//               onClick={(e) => handleCategoryChange(e, category)}\r\n//               aria-label={category.name}\r\n//               title={category.name === \"All\" ? \"Tout\" : category.name}\r\n//               className=\"\r\n//                 group snap-start w-full\r\n//                 h-[9.5rem] sm:h-[11rem]\r\n//                 rounded-2xl border border-gray-200 bg-white\r\n//                 hover:border-bleu-logo/30 focus:outline-none focus:ring-2 focus:ring-bleu-logo/50\r\n//               \"\r\n//             >\r\n//               <div className=\"relative w-full h-full rounded-2xl overflow-hidden\">\r\n//                 <img\r\n//                   src={src}\r\n//                   alt={category.name}\r\n//                   loading=\"lazy\"\r\n//                   decoding=\"async\"\r\n//                   draggable={false}\r\n//                   onDragStart={(e) => e.preventDefault()}\r\n//                   onError={(e) => {\r\n//                     console.warn(\"Image cassée (desktop):\", category?.name, e.currentTarget.src);\r\n//                     e.currentTarget.onerror = null;\r\n//                     e.currentTarget.src = logo;\r\n//                   }}\r\n//                   className=\"\r\n//                     absolute inset-0 w-full h-full object-cover\r\n//                     transition-transform duration-300 ease-out\r\n//                     group-hover:scale-105 select-none\r\n//                   \"\r\n//                 />\r\n//                 <div className=\"absolute inset-0 bg-black/25 group-hover:bg-black/15 transition-colors\" />\r\n//                 <div className=\"absolute bottom-3 left-3\">\r\n//                   <span className=\"inline-block bg-bleu-logo text-white font-extrabold uppercase tracking-wide px-3 py-1 rounded\">\r\n//                     {category.name === \"All\" ? \"Tous\" : category.name}\r\n//                   </span>\r\n//                 </div>\r\n//                 <div className=\"absolute inset-0 rounded-2xl ring-1 ring-white/20 pointer-events-none\" />\r\n//               </div>\r\n//             </button>\r\n//           );\r\n//         })}\r\n\r\n//         {!categories.length && (\r\n//           <div className=\"flex justify-center items-center py-8\">\r\n//             <Loader className=\"animate-spin\" />\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n//     </>\r\n//   );\r\n// }\r\n\r\n\r\n\r\n\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable react/prop-types */\r\n\"use client\";\r\n\r\nimport { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { Loader } from \"lucide-react\";\r\nimport { useCategory } from \"../../Provider/CategoryContext\";\r\nimport { ProductContext } from \"../../Provider/ProductContext\";\r\nimport { PromoProductContext } from \"../../Provider/PromoProductContext\";\r\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\r\n\r\n/* === Imports d'images catégories === */\r\nimport airFryer from \"../../assets/categories/air-fryer.png\";\r\nimport aspirateur from \"../../assets/categories/aspirateur.png\";\r\nimport barreDeSon from \"../../assets/categories/barre-de-son.png\";\r\nimport bouilloire from \"../../assets/categories/bouilloire.png\";\r\nimport chauffeEau from \"../../assets/categories/chauffe-eau.png\";\r\nimport climatiseur from \"../../assets/categories/climatiseur.png\";\r\nimport congelateur from \"../../assets/categories/congelateur.png\";\r\nimport cuisiniere from \"../../assets/categories/cuisiniere.png\";\r\nimport extracteurDeJus from \"../../assets/categories/extracteur-de-jus.png\";\r\nimport ferARepasser from \"../../assets/categories/fer-a-repasser.png\";\r\nimport fontaine from \"../../assets/categories/fontaine.png\";\r\nimport four from \"../../assets/categories/four.png\";\r\nimport fourEncastrable from \"../../assets/categories/four-encastrable.png\";\r\nimport homeCinema from \"../../assets/categories/home-cinema.png\";\r\nimport hotteDeCuisine from \"../../assets/categories/hotte-de-cuisine.png\";\r\nimport laveVaisselle from \"../../assets/categories/lave-vaisselle.png\";\r\nimport machineACafe from \"../../assets/categories/machine-a-cafe.png\";\r\nimport machineALaver from \"../../assets/categories/machine-a-laver.png\";\r\nimport microOnde from \"../../assets/categories/micro-onde.png\";\r\nimport miniChaine from \"../../assets/categories/mini-chaine.png\";\r\nimport mixeur from \"../../assets/categories/mixeur.png\";\r\nimport nonCategorise from \"../../assets/categories/all.png\";\r\nimport plaqueDeCuisson from \"../../assets/categories/plaque-de-cuisson.png\";\r\nimport refrigerateur from \"../../assets/categories/refrigerateur.png\";\r\nimport regulateur from \"../../assets/categories/regulateur.png\";\r\nimport secheLinge from \"../../assets/categories/seche-linge.png\";\r\nimport telephone from \"../../assets/categories/telephone.png\";\r\nimport television from \"../../assets/categories/television.png\";\r\nimport ventilateur from \"../../assets/categories/ventilateur.png\";\r\nimport chaise from \"../../assets/categories/chaise.png\";\r\nimport coffre from \"../../assets/categories/coffre.jpg\";\r\nimport tout from \"../../assets/tout_produit.jpg\";\r\nimport logo from \"../../assets/logo_192.png\";\r\nimport televiseur from \"../../assets/categories/television.png\";\r\nimport grille_pain from \"../../assets/categories/grille_pain.png\";\r\nimport support_tv from \"../../assets/categories/support_tv.jpg\";\r\nimport blender from \"../../assets/categories/blender.jpg\";\r\nimport ordinateur from \"../../assets/categories/ordinateur.jpg\";\r\n\r\n/* ================== Utils images + mapping ================== */\r\n\r\n/** Normalise un libellé pour clé de mapping (majuscules, sans accents, espaces condensés) */\r\nconst normalizeName = (s = \"\") =>\r\n  s\r\n    .normalize(\"NFD\")\r\n    .replace(/[\\u0300-\\u036f]/g, \"\")\r\n    .toUpperCase()\r\n    .replace(/\\s+/g, \" \")\r\n    .trim();\r\n\r\n/** Mapping d’origine (lisible) */\r\nconst RAW_CATEGORY_IMAGES = {\r\n  All: tout,\r\n  \"AIR FRYER\": airFryer,\r\n  ASPIRATEUR: aspirateur,\r\n  \"BARRE DE SON\": barreDeSon,\r\n  BOUILLOIRE: bouilloire,\r\n  \"CHAUFFE EAU\": chauffeEau,\r\n  CLIMATISEUR: climatiseur,\r\n  CONGELATEUR: congelateur,\r\n  CUISINIERE: cuisiniere,\r\n  \"EXTRACTEUR DE JUS\": extracteurDeJus,\r\n  \"FER A REPASSER\": ferARepasser,\r\n  FONTAINE: fontaine,\r\n  FOUR: four,\r\n  \"FOUR ENCASTRABLE\": fourEncastrable,\r\n  \"HOME CINEMA\": homeCinema,\r\n  \"HOTTE DE CUISINE\": hotteDeCuisine,\r\n  \"LAVE VAISSELLE\": laveVaisselle,\r\n  \"MACHINE A CAFE\": machineACafe,\r\n  \"MACHINE A LAVER\": machineALaver,\r\n  \"MICRO ONDE\": microOnde,\r\n  \"MINI CHAINE\": miniChaine,\r\n  MIXEUR: mixeur,\r\n  \"Non categorise\": nonCategorise,\r\n  \"PLAQUE DE CUISSON\": plaqueDeCuisson,\r\n  REFRIGERATEUR: refrigerateur,\r\n  REGULATEUR: regulateur,\r\n  \"SECHE LINGE\": secheLinge,\r\n  TELEPHONE: telephone,\r\n  TELEVISION: television,\r\n  TELEVISEUR: televiseur,\r\n  VENTILATEUR: ventilateur,\r\n  CHAISE: chaise,\r\n  COFFRE: coffre,\r\n  \"SUPPORT TV\": support_tv,\r\n  \"GRILLE PAIN\": grille_pain,\r\n  BLENDER: blender,\r\n  ORDINATEUR: ordinateur,\r\n};\r\n\r\n/** Mapping final avec clés normalisées */\r\nconst categoryImages = Object.fromEntries(\r\n  Object.entries(RAW_CATEGORY_IMAGES).map(([k, v]) => [normalizeName(k), v])\r\n);\r\n\r\n/** Devine le MIME d’un base64 brut (sans dataURL) */\r\nconst guessMimeFromBase64 = (b64 = \"\") => {\r\n  if (b64.startsWith(\"/9j/\")) return \"image/jpeg\";\r\n  if (b64.startsWith(\"iVBORw0KGgo\")) return \"image/png\";\r\n  if (b64.startsWith(\"UklGR\")) return \"image/webp\";\r\n  return \"image/png\";\r\n};\r\n\r\n/** Résout la source image depuis: URL http(s), dataURL, base64 brut, ou fallback local/logo */\r\nconst getCategoryImageSrc = (category) => {\r\n  const img = (category && category.image);\r\n  if (typeof img === \"string\" && /^https?:\\/\\//i.test(img)) return img;         // URL http(s)\r\n  if (typeof img === \"string\" && /^data:image\\//i.test(img)) return img;        // dataURL\r\n  if (typeof img === \"string\" && img.length > 40 && /^[A-Za-z0-9+/=]+$/.test(img)) {\r\n    const mime = guessMimeFromBase64(img);\r\n    return `data:${mime};base64,${img}`;\r\n  }\r\n  const key = normalizeName((category && category.name));\r\n  return categoryImages[key] || logo;\r\n};\r\n\r\n/* ================== Hook auto-scroll gauche -> droite (ping-pong) ================== */\r\nfunction usePingPongScroll(ref, { speed = 0.06, paused = false } = {}) {\r\n  useEffect(() => {\r\n    const el = ref.current;\r\n    if (!el) return;\r\n\r\n    let raf;\r\n    let last = 0;\r\n    let dir = 1; // 1 = L->R, -1 = R->L\r\n\r\n    const tick = (t) => {\r\n      if (!last) last = t;\r\n      const dt = t - last;\r\n      last = t;\r\n\r\n      if (!paused) {\r\n        const max = Math.max(0, el.scrollWidth - el.clientWidth);\r\n        el.scrollLeft += dir * dt * speed;\r\n\r\n        // Rebond aux extrémités\r\n        if (el.scrollLeft >= max - 1) {\r\n          el.scrollLeft = max;\r\n          dir = -1;\r\n        } else if (el.scrollLeft <= 0) {\r\n          el.scrollLeft = 0;\r\n          dir = 1;\r\n        }\r\n      }\r\n      raf = requestAnimationFrame(tick);\r\n    };\r\n\r\n    raf = requestAnimationFrame(tick);\r\n    return () => cancelAnimationFrame(raf);\r\n  }, [ref, speed, paused]);\r\n}\r\n\r\n/* ================== Hook drag-to-scroll (mobile + desktop, axe-friendly) ================== */\r\nfunction useDragScroll(ref, draggingRef, { pause } = {}) {\r\n  useEffect(() => {\r\n    const el = ref.current;\r\n    if (!el) return;\r\n\r\n    let isDown = false;\r\n    let startX = 0;\r\n    let startY = 0;\r\n    let scrollStart = 0;\r\n    let isHorizontal = false;\r\n    let dragged = false;\r\n\r\n    const CLICK_THRESHOLD = 6;   // px\r\n    const AXIS_THRESHOLD  = 8;   // px pour décider H vs V\r\n\r\n    const onPointerDown = (e) => {\r\n      if (pause) pause(true); // pause auto-scroll pendant le drag\r\n      el.style.scrollBehavior = \"auto\";\r\n      isDown = true;\r\n      draggingRef.current = false;\r\n      isHorizontal = false;\r\n      dragged = false;\r\n\r\n      startX = e.clientX ?? (e.touches ? e.touches[0].clientX : 0);\r\n      startY = e.clientY ?? (e.touches ? e.touches[0].clientY : 0);\r\n      scrollStart = el.scrollLeft;\r\n\r\n      // IMPORTANT : ne pas setPointerCapture ici, ça casse les clics sur <Link>\r\n    };\r\n\r\n    const onPointerMove = (e) => {\r\n      if (!isDown) return;\r\n      const x = e.clientX ?? (e.touches ? e.touches[0].clientX : 0);\r\n      const y = e.clientY ?? (e.touches ? e.touches[0].clientY : 0);\r\n      const dx = x - startX;\r\n      const dy = y - startY;\r\n\r\n      // Verrouille l'axe une fois décidé\r\n      if (!isHorizontal && (Math.abs(dx) > AXIS_THRESHOLD || Math.abs(dy) > AXIS_THRESHOLD)) {\r\n        isHorizontal = Math.abs(dx) > Math.abs(dy);\r\n      }\r\n\r\n      if (isHorizontal) {\r\n        // On consomme le geste H et on suit le doigt UNIQUEMENT si ça dépasse le seuil de “vrai drag”\r\n        if (Math.abs(dx) > CLICK_THRESHOLD) {\r\n          dragged = true;\r\n          draggingRef.current = true;\r\n          e.cancelable && e.preventDefault();\r\n        }\r\n        el.scrollLeft = scrollStart - dx;\r\n      }\r\n    };\r\n\r\n    const end = () => {\r\n      if (!isDown) return;\r\n      isDown = false;\r\n      el.style.scrollBehavior = \"\"; // restore smooth\r\n\r\n      // évite le clic fantôme juste après un drag\r\n      setTimeout(() => { draggingRef.current = false; }, 80);\r\n      // reprend l’auto-scroll un peu après\r\n      setTimeout(() => { if (pause) pause(false); }, 120);\r\n    };\r\n\r\n    // Pointer Events (souris + tactile). move non-passive pour pouvoir preventDefault\r\n    el.addEventListener(\"pointerdown\", onPointerDown, { passive: true });\r\n    el.addEventListener(\"pointermove\", onPointerMove, { passive: false });\r\n    el.addEventListener(\"pointerup\", end, { passive: true });\r\n    el.addEventListener(\"pointercancel\", end, { passive: true });\r\n    el.addEventListener(\"pointerleave\", end, { passive: true });\r\n\r\n    // iOS momentum + scrollbar discrète\r\n    el.style.webkitOverflowScrolling = \"touch\";\r\n    el.style.msOverflowStyle = \"none\";\r\n    el.style.scrollbarWidth = \"none\";\r\n\r\n    return () => {\r\n      el.removeEventListener(\"pointerdown\", onPointerDown);\r\n      el.removeEventListener(\"pointermove\", onPointerMove);\r\n      el.removeEventListener(\"pointerup\", end);\r\n      el.removeEventListener(\"pointercancel\", end);\r\n      el.removeEventListener(\"pointerleave\", end);\r\n    };\r\n  }, [ref, draggingRef, pause]);\r\n}\r\n\r\n/* ================== Composant ================== */\r\nexport default function CategoriesSection() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { updateFilters: updateProductFilters } = useContext(ProductContext);\r\n  const { updateFilters: updatePromoFilters } = useContext(PromoProductContext);\r\n  const { categories, updateSelectedCategory } = useCategory();\r\n\r\n  const mobileRef = useRef(null);\r\n  const desktopRef = useRef(null);\r\n  const [paused, setPaused] = useState(false);\r\n  const draggingRef = useRef(false); // évite clic pendant drag\r\n\r\n  // Auto défilement ping-pong\r\n  usePingPongScroll(mobileRef,  { speed: 0.06, paused });\r\n  usePingPongScroll(desktopRef, { speed: 0.06, paused });\r\n\r\n  // Drag natif (mobile + desktop) + pause/reprise auto-scroll\r\n  useDragScroll(mobileRef,  draggingRef, { pause: setPaused });\r\n  useDragScroll(desktopRef, draggingRef, { pause: setPaused });\r\n\r\n  /** URL cible selon la page et la catégorie */\r\n  const getCategoryHref = (category) => {\r\n    const params = new URLSearchParams();\r\n    if (category.name !== \"All\") {\r\n      params.set(\"page\", \"1\");\r\n      params.set(\"category\", category.name);\r\n    }\r\n    if (location.pathname === \"/en-promo\")       return `/en-promo?${params.toString()}`;\r\n    if (location.pathname === \"/promo-ramadan\")  return `/promo-ramadan?${params.toString()}`;\r\n    return `/boutique?${params.toString()}`;\r\n  };\r\n\r\n  /* ------ Click/Navigation ------ */\r\n  const handleCategoryClick = (e, category) => {\r\n    // si on glisse, on annule la navigation\r\n    if (draggingRef.current) { e.preventDefault(); return; }\r\n\r\n    // On gère la navigation manuellement pour être sûr que les contexts\r\n    // soient mis à jour AVANT départ (et éviter double navigation Link+navigate)\r\n    e.preventDefault();\r\n\r\n    const newFilters = {\r\n      category: category.name,\r\n      page: 1,\r\n      search: \"\",\r\n      min: 1000,\r\n      max: 5000000,\r\n      limit: 9,\r\n      tag: \"All\",\r\n    };\r\n\r\n    updateSelectedCategory(category.name);\r\n\r\n    if (location.pathname === \"/en-promo\" || location.pathname === \"/promo-ramadan\") {\r\n      updatePromoFilters(newFilters);\r\n    } else {\r\n      updateProductFilters(newFilters);\r\n    }\r\n\r\n    const href = getCategoryHref(category);\r\n    navigate(href);\r\n  };\r\n\r\n  /* ------ Tri : “All” d’abord ------ */\r\n  const sortedCategories = [...categories].sort((a, b) => {\r\n    if (a.name === \"All\") return -1;\r\n    if (b.name === \"All\") return 1;\r\n    return 0;\r\n  });\r\n\r\n  /* ================== RENDER ================== */\r\n  return (\r\n    <>\r\n      {/* ======== MOBILE (<= md) : scroll auto + drag ======== */}\r\n      <div\r\n        ref={mobileRef}\r\n        onMouseEnter={() => setPaused(true)}\r\n        onMouseLeave={() => setPaused(false)}\r\n        className=\"\r\n          flex gap-4 sm:gap-6 overflow-x-auto scroll-smooth \r\n          snap-x snap-mandatory px-1\r\n          touch-pan-x overscroll-x-contain\r\n        \"\r\n        style={{ WebkitOverflowScrolling: \"touch\", touchAction: \"pan-x pinch-zoom\" }}\r\n        dir=\"ltr\"\r\n      >\r\n        {sortedCategories.map((category) => {\r\n          const src = getCategoryImageSrc(category);\r\n          const href = getCategoryHref(category);\r\n          return (\r\n            <Link\r\n              key={category.id}\r\n              to={href}\r\n              onClick={(e) => handleCategoryClick(e, category)}\r\n              aria-label={category.name}\r\n              className=\"\r\n                md:hidden\r\n                group flex-shrink-0 snap-start\r\n                w-1/2 sm:w-1/4 md:w-1/6 lg:w-[12rem]\r\n                aspect-square\r\n                rounded-2xl border border-gray-200 bg-white\r\n                hover:border-bleu-logo/30 focus:outline-none focus:ring-2 focus:ring-bleu-logo/50\r\n              \"\r\n              draggable={false}\r\n            >\r\n              <div className=\"relative w-full h-full rounded-2xl overflow-hidden\">\r\n                <img\r\n                  src={src}\r\n                  alt={category.name}\r\n                  loading=\"lazy\"\r\n                  decoding=\"async\"\r\n                  draggable={false}\r\n                  onDragStart={(e) => e.preventDefault()}\r\n                  onError={(e) => {\r\n                    e.currentTarget.onerror = null;\r\n                    e.currentTarget.src = categoryImages[normalizeName((category && category.name))] || logo;\r\n                  }}\r\n                  className=\"\r\n                    absolute inset-0 w-full h-full object-cover\r\n                    transition-transform duration-300 ease-out\r\n                    group-hover:scale-105 select-none\r\n                  \"\r\n                />\r\n\r\n                <div className=\"absolute inset-0 bg-black/25 group-hover:bg-black/15 transition-colors\" />\r\n\r\n                {/* libellé */}\r\n                <div className=\"absolute bottom-3 left-3\">\r\n                  <span className=\"inline-block bg-bleu-logo text-white font-extrabold uppercase tracking-wide px-3 py-1 rounded\">\r\n                    {category.name === \"All\" ? \"Tous\" : category.name}\r\n                  </span>\r\n                </div>\r\n\r\n                <div className=\"absolute inset-0 rounded-2xl ring-1 ring-white/20 pointer-events-none\" />\r\n              </div>\r\n            </Link>\r\n          );\r\n        })}\r\n\r\n        {!categories.length && (\r\n          <div className=\"flex justify-center items-center py-8\">\r\n            <Loader className=\"animate-spin\" />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* ======== DESKTOP (>= md) : grille horizontale auto + drag ======== */}\r\n      <div\r\n        ref={desktopRef}\r\n        onMouseEnter={() => setPaused(true)}\r\n        onMouseLeave={() => setPaused(false)}\r\n        className=\"\r\n          hidden md:grid\r\n          grid-rows-2 grid-flow-col\r\n          auto-cols-[11rem] sm:auto-cols-[13rem]\r\n          gap-4 sm:gap-5\r\n          overflow-x-auto scroll-smooth px-1\r\n          touch-pan-x overscroll-x-contain\r\n        \"\r\n        style={{ WebkitOverflowScrolling: \"touch\", touchAction: \"pan-x pinch-zoom\" }}\r\n        dir=\"ltr\"\r\n      >\r\n        {sortedCategories.map((category) => {\r\n          const src = getCategoryImageSrc(category);\r\n          const href = getCategoryHref(category);\r\n          return (\r\n            <Link\r\n              key={`m-${category.id}`}\r\n              to={href}\r\n              onClick={(e) => handleCategoryClick(e, category)}\r\n              aria-label={category.name}\r\n              title={category.name === \"All\" ? \"Tout\" : category.name}\r\n              className=\"\r\n                group snap-start w-full\r\n                h-[9.5rem] sm:h-[11rem]\r\n                rounded-2xl border border-gray-200 bg-white\r\n                hover:border-bleu-logo/30 focus:outline-none focus:ring-2 focus:ring-bleu-logo/50\r\n              \"\r\n              draggable={false}\r\n            >\r\n              <div className=\"relative w-full h-full rounded-2xl overflow-hidden\">\r\n                <img\r\n                  src={src}\r\n                  alt={category.name}\r\n                  loading=\"lazy\"\r\n                  decoding=\"async\"\r\n                  draggable={false}\r\n                  onDragStart={(e) => e.preventDefault()}\r\n                  onError={(e) => {\r\n                    console.warn(\"Image cassée (desktop):\", (category && category.name));\r\n                    e.currentTarget.onerror = null;\r\n                    e.currentTarget.src = logo;\r\n                  }}\r\n                  className=\"\r\n                    absolute inset-0 w-full h-full object-cover\r\n                    transition-transform duration-300 ease-out\r\n                    group-hover:scale-105 select-none\r\n                  \"\r\n                />\r\n                <div className=\"absolute inset-0 bg-black/25 group-hover:bg-black/15 transition-colors\" />\r\n                <div className=\"absolute bottom-3 left-3\">\r\n                  <span className=\"inline-block bg-bleu-logo text-white font-extrabold uppercase tracking-wide px-3 py-1 rounded\">\r\n                    {category.name === \"All\" ? \"Tous\" : {category}.name}\r\n                  </span>\r\n                </div>\r\n                <div className=\"absolute inset-0 rounded-2xl ring-1 ring-white/20 pointer-events-none\" />\r\n              </div>\r\n            </Link>\r\n          );\r\n        })}\r\n\r\n        {!categories.length && (\r\n          <div className=\"flex justify-center items-center py-8\">\r\n            <Loader className=\"animate-spin\" />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n","/* eslint-disable no-unused-vars */\r\n/* eslint-disable react/prop-types */\r\n\r\n// import { ShoppingCart } from \"lucide-react\"\r\n// import formatPrice from \"../../../utils/formatPrice\"\r\n// import { Link } from \"react-router-dom\"\r\n\r\n// export default function ProductCardRowStyleOnePack({ className, pack, type = 3 }) {\r\n//   return (\r\n\r\n//     <div\r\n//       className={`product-row-card-style-one w-full bg-white group relative overflow-hidden ${className || \"\"}`}\r\n\r\n//     >\r\n\r\n//       <div key={pack.id} className=\"bg-white rounded-lg shadow-lg overflow-hidden\">\r\n//         <div className=\"relative\">\r\n//           <img src={pack.image || \"/placeholder.svg\"} alt={'ccbm shop promotion ' + pack.name} className=\"w-50 h-50 object-cover\" />\r\n//           <div className=\"absolute top-0 left-0 bg-bleu-logo text-white px-2 py-1 text-sm font-semibold\">\r\n//             Promo Pack\r\n//           </div>\r\n//         </div>\r\n//         <div className=\"p-4\">\r\n//           <h3 className=\"text-xl font-semibold mb-2\">{pack.name}</h3>\r\n//           <p className=\"text-gray-600 mb-4 hidden sm:block\">\r\n//             {pack.start_date && pack.end_date\r\n//               ? `Valable du ${new Date(pack.start_date).toLocaleDateString()} au ${new Date(pack.end_date).toLocaleDateString()}`\r\n//               : \"Durée limitée\"}\r\n//           </p>\r\n//           <div className=\"flex justify-between items-center mb-4\">\r\n//             <span className=\"text-2xl font-bold text-bleu-logo\">{formatPrice(pack.sommeTotal)}</span>\r\n//           </div>\r\n//           <div className=\"space-y-2\">\r\n//             {pack.produits.map((product) => (\r\n//               <div key={product.id} className=\"flex items-center space-x-2\">\r\n//                 <img\r\n//                   src={product.image || \"/placeholder.svg\"}\r\n//                   alt={product.name}\r\n//                   className=\"w-10 h-10 object-cover rounded\"\r\n//                 />\r\n//                 <div className=\"flex-1\">\r\n//                   <Link to={`/single-product/${product.product_id}`} className=\"text-sm font-medium\">{product.name}</Link>\r\n//                 </div>\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n//           <div className=\"mt-4 flex justify-between\">\r\n//             <button\r\n//               onClick={() => window.location.href = `/pack-promo?code=${pack.code}`}\r\n//               className=\"bg-bleu-logo text-white px-4 py-2 rounded-full flex items-center space-x-2 hover:bg-bleu-logo transition duration-300\">\r\n//               <ShoppingCart size={16} />\r\n//               <span>Commander</span>\r\n//             </button>\r\n//             {/* <div className=\"flex space-x-2\">\r\n//               <button className=\"bg-gray-200 p-2 rounded-full hover:bg-gray-300 transition duration-300\">\r\n//                 <Eye size={16} />\r\n//               </button>\r\n//               <button className=\"bg-gray-200 p-2 rounded-full hover:bg-gray-300 transition duration-300\">\r\n//                 <Heart size={16} />\r\n//               </button>\r\n//             </div> */}\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n\r\n//     </div>\r\n//   )\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n// import { useState } from \"react\";\r\n// import { ShoppingCart, Plus, Minus } from \"lucide-react\";\r\n// import formatPrice from \"../../../utils/formatPrice\";\r\n// import { Link } from \"react-router-dom\";\r\n\r\n// export default function ProductCardRowStyleOnePack({ className, pack, type = 3 }) {\r\n//   const [showProducts, setShowProducts] = useState(false);\r\n\r\n//   return (\r\n//     <div className={`product-row-card-style-one w-full bg-white group relative overflow-hidden ${className || \"\"}`}>\r\n//       <div key={pack.id} className=\"bg-white rounded-lg shadow-lg overflow-hidden\">\r\n//         <div className=\"relative\">\r\n//           <img src={pack.image || \"/placeholder.svg\"} alt={'ccbm shop promotion ' + pack.name} className=\"w-32 h-32 object-cover\" />\r\n//           <div className=\"absolute top-0 left-0 bg-bleu-logo text-white px-2 py-1 text-sm font-semibold\">\r\n//             Promo Pack\r\n//           </div>\r\n//         </div>\r\n//         <div className=\"p-4\">\r\n//           <h3 className=\"text-xl font-semibold mb-2\">{pack.name}</h3>\r\n\r\n//           {/* Texte caché en mobile */}\r\n//           <p className=\"text-gray-600 mb-4 hidden sm:block\">\r\n//             {pack.start_date && pack.end_date\r\n//               ? `Valable du ${new Date(pack.start_date).toLocaleDateString()} au ${new Date(pack.end_date).toLocaleDateString()}`\r\n//               : \"Durée limitée\"}\r\n//           </p>\r\n\r\n//           <div className=\"flex justify-between items-center mb-4\">\r\n//             <span className=\"text-2xl font-bold text-bleu-logo\">{formatPrice(pack.sommeTotal)}</span>\r\n//           </div>\r\n\r\n//           {/* Liste des produits : visible sur desktop, masquée en mobile */}\r\n//           <div className={`space-y-2 ${showProducts ? \"block\" : \"hidden\"} sm:block`}>\r\n//             {pack.produits.map((product) => (\r\n//               <div key={product.id} className=\"flex items-center space-x-2\">\r\n//                 <img src={product.image || \"/placeholder.svg\"} alt={product.name} className=\"w-10 h-10 object-cover rounded\" />\r\n//                 <div className=\"flex-1\">\r\n//                   <Link to={`/single-product/${product.product_id}`} className=\"text-sm font-medium\">{product.name}</Link>\r\n//                 </div>\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n\r\n//           {/* Bouton \"+\" en mobile pour afficher les produits */}\r\n//           <button\r\n//             onClick={() => setShowProducts(!showProducts)}\r\n//             className=\"block sm:hidden mt-2 text-bleu-logo font-semibold flex items-center space-x-1\"\r\n//           >\r\n//             {showProducts ? <Minus size={16} /> : <Plus size={16} />}\r\n//             <span>{showProducts ? \"Masquer les produits\" : \"Voir les produits\"}</span>\r\n//           </button>\r\n\r\n//           <div className=\"mt-4 flex justify-between\">\r\n//             <button\r\n//               onClick={() => window.location.href = `/pack-promo?code=${pack.code}`}\r\n//               className=\"bg-bleu-logo text-white px-4 py-2 rounded-full flex items-center space-x-2 hover:bg-bleu-logo transition duration-300\">\r\n//               <ShoppingCart size={16} />\r\n//               <span>Commander</span>\r\n//             </button>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n\r\n\r\n\r\n\r\nimport { useState } from \"react\";\r\nimport { ShoppingCart, Plus, Minus } from \"lucide-react\";\r\nimport formatPrice from \"../../../utils/formatPrice\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function ProductCardRowStyleOnePack({ className, pack, type = 3 }) {\r\n  const [showProducts, setShowProducts] = useState(false);\r\n\r\n  return (\r\n    <div className={`product-row-card-style-one w-full bg-white group relative overflow-hidden ${className || \"\"}`}>\r\n      <div key={pack.id} className=\"bg-white rounded-lg shadow-lg overflow-hidden p-4 flex flex-col sm:flex-row items-center sm:items-start gap-4\">\r\n\r\n\r\n        <div className=\"w-full sm:w-1/2 flex justify-center\">\r\n          <img\r\n            src={pack.image || \"/placeholder.svg\"}\r\n            alt={'ccbm shop promotion ' + pack.name}\r\n            className=\"w-50 h-50 object-cover rounded-lg\"\r\n          />\r\n        </div>\r\n\r\n        {/* CONTENU À DROITE */}\r\n        <div className=\"w-full sm:w-1/2\">\r\n          <h3 className=\"text-xl font-semibold mb-2\">{pack.name}</h3>\r\n\r\n          {/* Texte caché en mobile */}\r\n          <p className=\"text-gray-600 mb-4 hidden sm:block\">\r\n            {pack.start_date && pack.end_date\r\n              ? `Valable du ${new Date(pack.start_date).toLocaleDateString()} au ${new Date(pack.end_date).toLocaleDateString()}`\r\n              : \"Durée limitée\"}\r\n          </p>\r\n\r\n          <div className=\"flex justify-between items-center mb-4\">\r\n            <span className=\"text-xl font-bold text-bleu-logo\">{formatPrice(pack.sommeTotal)}</span>\r\n          </div>\r\n\r\n          {/* Liste des produits */}\r\n          <div className={`space-y-2 ${showProducts ? \"block\" : \"hidden\"} sm:block`}>\r\n            {pack.produits.map((product) => (\r\n              <div key={product.id} className=\"flex items-center space-x-2\">\r\n                <img src={product.image || \"/placeholder.svg\"} alt={'ccbm shop promo ' + product.name} className=\"w-8 h-8 object-cover rounded\" />\r\n                <div className=\"flex-1\">\r\n                  <Link to={`/produits/${product.product_id}/details`} className=\"text-sm font-medium\">{product.name}</Link>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* <button\r\n            onClick={() => setShowProducts(!showProducts)}\r\n            className=\"block sm:hidden mt-2 text-bleu-logo font-semibold flex items-center space-x-1\"\r\n          >\r\n            {showProducts ? <Minus size={16} /> : <Plus size={16} />}\r\n            <span>{showProducts ? \"Masquer les produits\" : \"Voir les produits\"}</span>\r\n          </button> */}\r\n\r\n          {/* <div className=\"mt-4 flex justify-between\">\r\n            <button\r\n              onClick={() => window.location.href = `/pack-promo?code=${pack.code}`}\r\n              className=\"bg-bleu-logo text-white px-4 py-2 rounded-full flex items-center space-x-2 hover:bg-bleu-logo transition duration-300\">\r\n              <ShoppingCart size={16} />\r\n              <span>Commander</span>\r\n            </button>\r\n          </div> */}\r\n\r\n          <div className=\"mt-4 flex justify-between items-center\">\r\n            <button\r\n              onClick={() => window.location.href = `/pack-promo?code=${pack.code}`}\r\n              className=\"bg-bleu-logo  text-white px-2 py-1 sm:px-4 sm:py-2 text-sm sm:text-base rounded-md flex items-center space-x-1 sm:space-x-2 hover:bg-bleu-logo-dark transition-all duration-300 ease-in-out\"\r\n            >\r\n              <ShoppingCart size={16} />\r\n              <span className=\"hidden sm:inline\">Commander</span>\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => setShowProducts(!showProducts)}\r\n              className=\"block sm:hidden text-bleu-logo font-medium text-sm flex items-center space-x-1\"\r\n            >\r\n              {showProducts ? <Minus size={16} /> : <Plus size={16} />}\r\n              <span className=\"hidden sm:inline\">{showProducts ? \"Masquer les produits\" : \"Voir les produits\"}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/* eslint-disable react/prop-types */\n// /* eslint-disable react/prop-types */\n\n// import ProductCardRowStyleOnePack from \"./Cards/ProductCardRowStyleOnePack\";\n// import DataIteration from \"./DataIteration\";\n\n// export default function SectionStyleTwoPack({ className, products, type = 3 }) {\n//   return (\n//     <div\n//       // className={`section-content w-full grid sm:grid-cols-2 grid-cols-1 xl:gap-[30px] gap-5 ${className || \"\" }`}\n//       className={`section-content w-full grid grid-cols-2 gap-5 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 ${className || \"\"}`}\n//     >\n//       <DataIteration datas={products} startLength={0} endLength={products.length > 6 ? 6 : products.length}>\n//         {({ datas }) => (\n//           <div key={datas.id} className=\"item w-full\">\n//             <ProductCardRowStyleOnePack type={type} pack={datas} />\n//           </div>\n//         )}\n//       </DataIteration>\n//     </div>\n//   );\n// }\n\nimport ProductCardRowStyleOnePack from \"./Cards/ProductCardRowStyleOnePack\"\nimport DataIteration from \"./DataIteration\";\nexport default function SectionStyleTwoPack({ className, products, type = 3 }) {\n  return (\n    <div className={`section-content flex space-x-4 w-full ${className || \"\"}`}>\n      <DataIteration datas={products} startLength={0} endLength={products.length}>\n        {({ datas }) => (\n          <div key={datas.id} className=\"item flex-grow w-1/2 min-w-[50%]\">\n            <ProductCardRowStyleOnePack type={type} pack={datas} />\n          </div>\n        )}\n      </DataIteration>\n    </div>\n  )\n}\n\n","/* eslint-disable react/prop-types */\r\n\r\nimport ProductCardRowStyleOne from \"./Cards/ProductCardRowStyleOne\";\r\nimport DataIteration from \"./DataIteration\";\r\n\r\nexport default function SectionStyleTwoVenteCher({ className, products, type = 3 }) {\r\n  return (\r\n    <div\r\n      className={`section-content w-full grid grid-cols-1 md:grid-cols-2 gap-4 ${className || \"\"}`}\r\n    >\r\n      <DataIteration datas={products} startLength={0} endLength={products.length > 2 ? 2 : products.length}>\r\n        {({ datas }) => <>\r\n          {datas.image_256 && (\r\n            <div key={datas.id} className=\"item w-full\">\r\n              <ProductCardRowStyleOne type={type} datas={datas} />\r\n            </div>\r\n          )}\r\n        </>}\r\n      </DataIteration>\r\n    </div>\r\n  );\r\n}\r\n","/* eslint-disable react/prop-types */\r\n\"use client\";\r\n\r\nimport { useContext, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { X, ChevronLeft, ChevronRight, Heart } from \"lucide-react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { CartContext } from \"../../contexts/CartContext\";\r\nimport { useAuthContext } from \"../../contexts/useAuthContext\";\r\n\r\n/**\r\n * Popup \"Produits en vedette\" — adapté à ton schéma API.\r\n * rawProducts: [\r\n *   {\r\n *     id, name, display_name, en_promo, list_price, promo_price,\r\n *     image_256 (base64 brut ou URL), tags: [{id,name}], description, ...\r\n *     quantite_en_stock, is_preorder, is_creditorder, ...\r\n *   }\r\n * ]\r\n */\r\nexport default function FeaturedProductsPopup({\r\n  delayMs = 2000,\r\n  autoPlayMs = 3500,\r\n  cooldownHours = 24,              // si fermé, réapparaît après N heures\r\n  storageKey = \"featured_popup_closed_at\",\r\n  title = \"Produits en promo\",\r\n  rawProducts = [],\r\n  // crée le lien de navigation pour un produit\r\n  makeLink = (p) => `produits/${p.id}/details`,\r\n}) {\r\n  const {\r\n    addToCart,\r\n    addToCreditOrder,\r\n  } = useContext(CartContext);\r\n  const { user } = useAuthContext();\r\n  const [mounted, setMounted] = useState(false);\r\n  const [exiting, setExiting] = useState(false);\r\n  const [idx, setIdx] = useState(0);\r\n  const [paused, setPaused] = useState(false);\r\n  const [feedback, setFeedback] = useState(\"\"); // petit message de succès\r\n\r\n  const navigate = useNavigate();\r\n  const timerRef = useRef(null);\r\n  const autoplayRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n  const draggingRef = useRef(false);\r\n  const startXRef = useRef(0);\r\n  const deltaXRef = useRef(0);\r\n\r\n  // --------- mapping API -> vue ---------\r\n  const items = useMemo(() => {\r\n    const take = (rawProducts || []).slice(0, 5);\r\n    return take.map((p) => {\r\n      const image = getProductImageSrc(p);\r\n      const price = getDisplayPrice(p);\r\n      return {\r\n        id: p.id,\r\n        name: p.name || p.display_name || \"Produit\",\r\n        display_name: p.display_name || p.name || \"Produit\",\r\n        price,\r\n        en_promo: !!p.en_promo,\r\n        list_price: toNum(p.list_price),\r\n        promo_price: toNum(p.promo_price),\r\n        tags: Array.isArray(p.tags) ? p.tags.map((t) => (t && t.name)).filter(Boolean) : [],\r\n        link: makeLink(p),\r\n        image,\r\n        raw: p, // on garde l’objet d’origine pour le CartContext\r\n        inStock: toNum(p.quantite_en_stock) > 0,\r\n        isPreorder: !!p.is_preorder,\r\n        isCredit: !!p.is_creditorder,\r\n      };\r\n    });\r\n  }, [rawProducts, makeLink]);\r\n\r\n  const hasPagination = items.length > 1;\r\n\r\n  // --------- afficher ? (respect cooldown si fermé) ---------\r\n  const shouldShow = () => {\r\n    try {\r\n      const iso = localStorage.getItem(storageKey);\r\n      if (!iso) return true;\r\n      const closedAt = new Date(iso).getTime();\r\n      const now = Date.now();\r\n      const ms = Number(cooldownHours) * 60 * 60 * 1000;\r\n      return now - closedAt > ms;\r\n    } catch {\r\n      return true;\r\n    }\r\n  };\r\n\r\n  // apparition différée\r\n  useEffect(() => {\r\n    if (!items.length) return;\r\n    if (!shouldShow()) return;\r\n    timerRef.current = setTimeout(() => setMounted(true), delayMs);\r\n    return () => clearTimeout(timerRef.current);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [delayMs, items.length]);\r\n\r\n  // lock scroll body quand ouvert\r\n  useEffect(() => {\r\n    if (!mounted) return;\r\n    const prev = document.body.style.overflow;\r\n    document.body.style.overflow = \"hidden\";\r\n    return () => { document.body.style.overflow = prev; };\r\n  }, [mounted]);\r\n\r\n  const close = () => {\r\n    try {\r\n      localStorage.setItem(storageKey, new Date().toISOString());\r\n    } catch (e) {\r\n      // eslint-disable-next-line no-console\r\n      console.log(e);\r\n    }\r\n    setExiting(true);\r\n  };\r\n\r\n  // autoplay (pause au survol, pendant le drag, onglet caché)\r\n  useEffect(() => {\r\n    if (!mounted || !items.length || !hasPagination) return;\r\n\r\n    const tick = () => setIdx((i) => (i + 1) % items.length);\r\n\r\n    const start = () => {\r\n      if (autoplayRef.current) clearInterval(autoplayRef.current);\r\n      if (!paused && document.visibilityState === \"visible\") {\r\n        autoplayRef.current = setInterval(tick, autoPlayMs);\r\n      }\r\n    };\r\n    const stop = () => {\r\n      if (autoplayRef.current) clearInterval(autoplayRef.current);\r\n      autoplayRef.current = null;\r\n    };\r\n\r\n    start();\r\n    const visHandler = () => (document.visibilityState === \"visible\" ? start() : stop());\r\n    document.addEventListener(\"visibilitychange\", visHandler);\r\n\r\n    return () => {\r\n      stop();\r\n      document.removeEventListener(\"visibilitychange\", visHandler);\r\n    };\r\n  }, [mounted, items.length, autoPlayMs, paused, hasPagination]);\r\n\r\n  // si la liste change et que l'idx déborde, on le ramène\r\n  useEffect(() => {\r\n    if (idx > items.length - 1) setIdx(0);\r\n  }, [items.length, idx]);\r\n\r\n  // swipe / drag\r\n  useEffect(() => {\r\n    if (!hasPagination) return;\r\n    const el = containerRef.current;\r\n    if (!el) return;\r\n\r\n    let pointerId = null;\r\n    const THRESHOLD = 48;\r\n\r\n    const onDown = (e) => {\r\n      if (pointerId !== null) return;\r\n      pointerId = e.pointerId ?? \"mouse\";\r\n      if (el.setPointerCapture) el.setPointerCapture(pointerId);\r\n      draggingRef.current = true;\r\n      deltaXRef.current = 0;\r\n      startXRef.current = e.clientX ?? (e.touches ? e.touches[0].clientX : 0);\r\n      setPaused(true);\r\n    };\r\n\r\n    const onMove = (e) => {\r\n      if (pointerId === null || !draggingRef.current) return;\r\n      const x = e.clientX ?? (e.touches ? e.touches[0].clientX : 0);\r\n      deltaXRef.current = x - startXRef.current;\r\n      if (Math.abs(deltaXRef.current) > 8) e.cancelable && e.preventDefault();\r\n      el.style.transition = \"none\";\r\n      el.style.transform = `translateX(${deltaXRef.current * 0.2}px)`;\r\n    };\r\n\r\n    const onUp = () => {\r\n      if (pointerId === null) return;\r\n      const dx = deltaXRef.current;\r\n      draggingRef.current = false;\r\n      pointerId = null;\r\n\r\n      el.style.transition = \"transform 180ms ease\";\r\n      el.style.transform = \"translateX(0)\";\r\n\r\n      if (dx > THRESHOLD) {\r\n        setIdx((i) => (i - 1 + items.length) % items.length);\r\n      } else if (dx < -THRESHOLD) {\r\n        setIdx((i) => (i + 1) % items.length);\r\n      }\r\n      setTimeout(() => setPaused(false), 200);\r\n    };\r\n\r\n    el.addEventListener(\"pointerdown\", onDown, { passive: true });\r\n    el.addEventListener(\"pointermove\", onMove, { passive: false });\r\n    el.addEventListener(\"pointerup\", onUp, { passive: true });\r\n    el.addEventListener(\"pointercancel\", onUp, { passive: true });\r\n    el.addEventListener(\"pointerleave\", onUp, { passive: true });\r\n\r\n    return () => {\r\n      el.removeEventListener(\"pointerdown\", onDown);\r\n      el.removeEventListener(\"pointermove\", onMove);\r\n      el.removeEventListener(\"pointerup\", onUp);\r\n      el.removeEventListener(\"pointercancel\", onUp);\r\n      el.removeEventListener(\"pointerleave\", onUp);\r\n    };\r\n  }, [items.length, hasPagination]);\r\n\r\n  if (!mounted || !items.length) return null;\r\n\r\n  const current = items[idx];\r\n\r\n  const goPrev = () => setIdx((i) => (i - 1 + items.length) % items.length);\r\n  const goNext = () => setIdx((i) => (i + 1) % items.length);\r\n\r\n  const handleOpen = (link) => {\r\n    if (!link) return;\r\n    navigate(link);\r\n    close();\r\n  };\r\n\r\n  // ==== Actions Cart ====\r\n  const showTick = (msg) => {\r\n    setFeedback(msg);\r\n    setTimeout(() => setFeedback(\"\"), 1800);\r\n  };\r\n\r\n  const onAddToCart = (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (addToCart) addToCart(current.raw, 1);\r\n      showTick(\"Produit ajouté au panier\");\r\n    } catch (err) {\r\n      console.error(err);\r\n      showTick(\"Impossible d'ajouter au panier\");\r\n    }\r\n  };\r\n\r\n\r\n\r\n\r\n  const onAddToCredit = (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (addToCreditOrder) addToCreditOrder(current.raw, 1);\r\n      showTick(\"Ajouté au panier crédit\");\r\n    } catch (err) {\r\n      console.error(err);\r\n      showTick(\"Impossible d'ajouter au crédit\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div aria-modal=\"true\" role=\"dialog\" className=\"fixed inset-0 z-[9999]\">\r\n      {/* Backdrop */}\r\n      <div className=\"absolute inset-0 bg-black/60 backdrop-blur-[1px]\" onClick={close} />\r\n\r\n      {/* Centre */}\r\n      <div className=\"absolute inset-0 flex items-center justify-center p-3 sm:p-6\">\r\n        <div\r\n          className={`\r\n            relative w-[92vw] max-w-[720px] rounded-2xl bg-white shadow-2xl overflow-hidden\r\n            ${exiting ? \"animate-slideOutDown\" : \"animate-slideInFromTop\"}\r\n          `}\r\n          onAnimationEnd={(e) => {\r\n            if (exiting && e.animationName === \"slideOutDown\") setMounted(false);\r\n          }}\r\n        >\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between px-4 py-3 border-b\">\r\n            <h3 className=\"text-base sm:text-lg font-bold\">{title}</h3>\r\n            <button\r\n              onClick={close}\r\n              aria-label=\"Fermer\"\r\n              className=\"inline-flex h-9 w-9 items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200\"\r\n            >\r\n              <X className=\"h-5 w-5 text-gray-700\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Carrousel */}\r\n          <div\r\n            ref={containerRef}\r\n            className=\"relative\"\r\n            onMouseEnter={() => setPaused(true)}\r\n            onMouseLeave={() => setPaused(false)}\r\n          >\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2\">\r\n              {/* Visuel */}\r\n              <div className=\"relative h-56 md:h-64\">\r\n                <img\r\n                  src={(current && current.image)}\r\n                  alt={(current && current.name)}\r\n                  className=\"absolute inset-0 h-full w-full object-cover select-none\"\r\n                  loading=\"lazy\"\r\n                  draggable={false}\r\n                  onDragStart={(e) => e.preventDefault()}\r\n                  onError={(e) => {\r\n                    e.currentTarget.onerror = null;\r\n                    e.currentTarget.src =\r\n                      \"data:image/svg+xml;utf8,\" +\r\n                      encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='640' height='360'><rect width='100%' height='100%' fill='#eee'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='16' fill='#999'>Image indisponible</text></svg>`);\r\n                  }}\r\n                />\r\n                <div className=\"absolute inset-0 ring-1 ring-black/10 pointer-events-none\" />\r\n\r\n                {/* Tags */}\r\n                {!!(current && current.tags && current.tags.length) && (\r\n                  <div className=\"absolute left-2 top-2 flex flex-wrap gap-1\">\r\n                    {current.tags.slice(0, 3).map((t) => (\r\n                      <span\r\n                        key={t}\r\n                        className=\"rounded-md bg-black/65 text-white text-[11px] font-semibold px-2 py-0.5\"\r\n                      >\r\n                        {t}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n\r\n                {current.en_promo && (\r\n                  <div className=\"absolute right-2 top-2 rounded-md bg-red-600 text-white text-[11px] font-bold px-2 py-0.5\">\r\n                    Promo\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Infos + actions */}\r\n              <div className=\"p-4 sm:p-5 flex flex-col\">\r\n                <h4 className=\"text-lg sm:text-xl font-extrabold line-clamp-2\">\r\n                  {(current && current.name) || (current && current.display_name)}\r\n                </h4>\r\n\r\n                <div className=\"mt-2 flex items-baseline gap-2\">\r\n                  <div className=\"text-2xl font-bold text-blue-600\">\r\n                    {formatMoney((current && current.price))}\r\n                  </div>\r\n                  {current.en_promo && current.list_price > current.price && (\r\n                    <div className=\"text-sm text-gray-500 line-through\">\r\n                      {formatMoney(current.list_price)}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Miniatures */}\r\n                {hasPagination && (\r\n                  <div className=\"mt-4 grid grid-cols-5 gap-2\">\r\n                    {items.map((p, i) => (\r\n                      <button\r\n                        key={p.id}\r\n                        aria-label={`Voir ${p.name}`}\r\n                        onClick={() => setIdx(i)}\r\n                        className={`relative aspect-square rounded-lg overflow-hidden ring-2 transition\r\n                          ${i === idx ? \"ring-blue-500\" : \"ring-transparent hover:ring-blue-200\"}`}\r\n                        title={p.name}\r\n                      >\r\n                        <img\r\n                          src={p.image}\r\n                          alt={p.name}\r\n                          className=\"h-full w-full object-cover\"\r\n                          loading=\"lazy\"\r\n                        />\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Controls + CTA */}\r\n                <div className=\"mt-auto pt-4 flex flex-col gap-3\">\r\n                  {/* Pagination dots + nav + voir */}\r\n                  <div className=\"flex items-center justify-between\">\r\n                    {/* Puces cliquables */}\r\n                    {hasPagination ? (\r\n                      <div className=\"flex items-center gap-2\">\r\n                        {items.map((_, i) => (\r\n                          <button\r\n                            key={i}\r\n                            type=\"button\"\r\n                            onClick={() => setIdx(i)}\r\n                            aria-label={`Aller au produit ${i + 1}`}\r\n                            className={`\r\n                              h-2.5 w-2.5 rounded-full transition\r\n                              ${i === idx ? \"bg-blue-600\" : \"bg-gray-300 hover:bg-gray-400\"}\r\n                            `}\r\n                          />\r\n                        ))}\r\n                      </div>\r\n                    ) : (\r\n                      <div />\r\n                    )}\r\n\r\n                    <div className=\"flex items-center gap-2\">\r\n                      {hasPagination && (\r\n                        <>\r\n                          <button\r\n                            onClick={goPrev}\r\n                            className=\"inline-flex h-9 w-9 items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200\"\r\n                            aria-label=\"Précédent\"\r\n                          >\r\n                            <ChevronLeft />\r\n                          </button>\r\n                          <button\r\n                            onClick={goNext}\r\n                            className=\"inline-flex h-9 w-9 items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200\"\r\n                            aria-label=\"Suivant\"\r\n                          >\r\n                            <ChevronRight />\r\n                          </button>\r\n                        </>\r\n                      )}\r\n\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Ligne d’actions panier */}\r\n                  <div className=\"flex flex-wrap items-center gap-2\">\r\n                    <button\r\n                      onClick={onAddToCart}\r\n                      className={`inline-flex items-center justify-center rounded-lg ml-2  \r\n                                   bg-bleu-logo px-4 py-2.5 text-sm font-medium text-white \r\n                                    focus:outline-none focus:ring-2 focus:ring-gray-400\r\n                                     transition-all duration-300 ease-in-out`}\r\n\r\n                     \r\n                    >\r\n                      Ajouter au panier\r\n                    </button>\r\n\r\n\r\n\r\n                    {user && current.is_creditorder && (\r\n                      <button\r\n                        onClick={onAddToCredit}\r\n                        className=\"inline-flex items-center justify-center rounded-lg px-4 py-2.5 text-sm font-medium\r\n                                   bg-emerald-600 text-white hover:bg-emerald-700 focus:ring-2 focus:ring-emerald-400\"\r\n                      >\r\n                        Commander à crédit\r\n                      </button>\r\n                    )}\r\n\r\n\r\n\r\n                    <button\r\n                      onClick={() => handleOpen((current && current.link))}\r\n                      className=\"ml-2 inline-flex items-center justify-center rounded-lg \r\n                                   bg-gray-900 px-4 py-2.5 text-sm font-medium text-white \r\n                                   hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-400\"\r\n                    >\r\n                      Voir le produit\r\n                    </button>\r\n\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n\r\n          {feedback && (\r\n            <div className=\"pointer-events-none absolute left-1/2 -translate-x-1/2 bottom-3\">\r\n              <div className=\"rounded-md bg-black/80 text-white text-sm px-3 py-2 shadow\">\r\n                {feedback}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Keyframes */}\r\n      <style>{`\r\n        @keyframes slideInFromTop {\r\n          0%   { opacity: 0; transform: translateY(-40px) scale(.98); }\r\n          60%  { opacity: 1; transform: translateY(0)       scale(1.02); }\r\n          100% { opacity: 1; transform: translateY(0)       scale(1); }\r\n        }\r\n        @keyframes slideOutDown {\r\n          0%   { opacity: 1; transform: translateY(0)       scale(1); }\r\n          100% { opacity: 0; transform: translateY(60px)    scale(.98); }\r\n        }\r\n        .animate-slideInFromTop {\r\n          animation: slideInFromTop 360ms cubic-bezier(.2,.9,.2,1.1) forwards;\r\n          will-change: transform, opacity;\r\n        }\r\n        .animate-slideOutDown {\r\n          animation: slideOutDown 260ms ease forwards;\r\n          will-change: transform, opacity;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ================= Helpers ================= */\r\n\r\nfunction toNum(v) {\r\n  const n = Number(v);\r\n  return Number.isFinite(n) ? n : 0;\r\n}\r\n\r\nfunction formatMoney(n, currency = \"XOF\", locale = \"fr-FR\") {\r\n  const val = Number(n || 0);\r\n  try {\r\n    return new Intl.NumberFormat(locale, { style: \"currency\", currency }).format(val);\r\n  } catch {\r\n    return `${val.toLocaleString(locale)} ${currency}`;\r\n  }\r\n}\r\n\r\n/** Détecte si image_256 est déjà une URL http(s) */\r\nfunction isHttpUrl(s) {\r\n  return typeof s === \"string\" && /^https?:\\/\\//i.test(s);\r\n}\r\n\r\n/** Devine le MIME d’un base64 brut (sans dataURL) */\r\nfunction guessMimeFromBase64(b64 = \"\") {\r\n  if (b64.startsWith(\"/9j/\")) return \"image/jpeg\";           // JPEG\r\n  if (b64.startsWith(\"iVBORw0KGgo\")) return \"image/png\";     // PNG\r\n  if (b64.startsWith(\"UklGR\")) return \"image/webp\";          // WebP\r\n  return \"image/png\";\r\n}\r\n\r\n/** Renvoie src utilisable <img> depuis p.image_256 (base64 brut, dataURL ou URL) */\r\nfunction getProductImageSrc(p = {}) {\r\n  const img = p.image_256 || p.image || p.image_url;\r\n  if (!img) return placeholderSvg();\r\n\r\n  // URL http(s)\r\n  if (isHttpUrl(img)) return img;\r\n\r\n  // dataURL complet\r\n  if (typeof img === \"string\" && /^data:image\\//i.test(img)) return img;\r\n\r\n  // base64 plausible -> on fabrique la dataURL\r\n  if (typeof img === \"string\" && img.length > 40 && /^[A-Za-z0-9+/=]+$/.test(img)) {\r\n    const mime = guessMimeFromBase64(img);\r\n    return `data:${mime};base64,${img}`;\r\n  }\r\n\r\n  // fallback\r\n  return placeholderSvg();\r\n}\r\n\r\n/** Choisit le prix à montrer : promo si en_promo et >0, sinon list_price */\r\nfunction getDisplayPrice(p = {}) {\r\n  const promo = toNum(p.promo_price);\r\n  const list = toNum(p.list_price);\r\n  if (p.en_promo && promo > 0) return promo;\r\n  return list > 0 ? list : promo || 0;\r\n}\r\n\r\nfunction placeholderSvg() {\r\n  return (\r\n    \"data:image/svg+xml;utf8,\" +\r\n    encodeURIComponent(\r\n      `<svg xmlns='http://www.w3.org/2000/svg' width='640' height='360'>\r\n        <rect width='100%' height='100%' fill='#eee'/>\r\n        <text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle'\r\n          font-family='sans-serif' font-size='16' fill='#999'>Image indisponible</text>\r\n      </svg>`\r\n    )\r\n  );\r\n}\r\n\r\n/* Wishlist helper : évite crash si la fonction n'existe pas ou signature différente */\r\nfunction safeIsInWishlist(fn, id) {\r\n  try {\r\n    if (typeof fn !== \"function\") return false;\r\n    return !!fn(id);\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n","\r\n\r\n/* eslint-disable no-unused-vars */\r\nimport { useContext, useEffect, useMemo, useRef, useState, useCallback } from \"react\";\r\n\r\nimport SectionStyleTwo from \"../Helpers/SectionStyleTwo\";\r\nimport ViewMoreTitle from \"../Helpers/ViewMoreTitle\";\r\nimport ViewMoreTitlePack from \"../Helpers/ViewMoreTitlePack\";\r\nimport ViewMoreTitleCategorie from \"../Helpers/ViewMoreTitleCategorie\";\r\nimport Layout from \"../Partials/Layout\";\r\nimport BannerSecond from \"./BannerSecond\";\r\nimport BannerPub from \"./BannerPub\";\r\nimport CategoriesSection from \"./CategoriesSection\";\r\nimport SEOHeader from \"../Partials/Headers/HeaderOne/SEOHeader\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\nimport { PromoProductContext } from \"../../Provider/PromoProductContext\";\r\nimport { ProductContext } from \"../../Provider/ProductContext\";\r\nimport { VenteCherContext } from \"../../Provider/VenteCherContext\";\r\nimport PackPromoService from \"../../services/PackPromoService\";\r\nimport SectionStyleTwoPack from \"../Helpers/SectionStyleTwoPack\";\r\nimport SectionStyleTwoVenteCher from \"../Helpers/SectionStyleTwoVenteCher\";\r\n\r\nimport FeaturedProductsPopup from \"../Pub/FeaturedProductsPopup\";\r\n\r\n/* === Helpers sûrs === */\r\nconst asArray = (v) => (Array.isArray(v) ? v : []);\r\nconst safeRank = (p) => {\r\n  const r = Number(p && p.rang);\r\n  return Number.isFinite(r) ? r : Number.MAX_SAFE_INTEGER;\r\n};\r\n\r\n/* ========== Daily gate (Featured seulement): 1 apparition / jour ========== */\r\nconst FEATURED_DAILY_KEY = \"featured_popup_seen_date\";          // vu aujourd'hui ?\r\nconst FEATURED_COOLDOWN_KEY = \"featured_popup_closed_at\";       // si tu veux garder un cooldown en heures\r\n\r\n// YYYY-MM-DD robuste (navigateur client)\r\nconst todayStr = () => {\r\n  try {\r\n    return new Date().toLocaleDateString(\"en-CA\");\r\n  } catch {\r\n    return new Date().toISOString().slice(0, 10);\r\n  }\r\n};\r\nconst hasSeenFeaturedToday = () => {\r\n  try {\r\n    return localStorage.getItem(FEATURED_DAILY_KEY) === todayStr();\r\n  } catch {\r\n    return false;\r\n  }\r\n};\r\nconst markFeaturedSeenToday = () => {\r\n  try {\r\n    localStorage.setItem(FEATURED_DAILY_KEY, todayStr());\r\n  } catch {}\r\n};\r\n// (optionnel) respect d’un cooldown en heures si > 0 (en plus du daily gate)\r\nconst shouldRespectFeaturedCooldown = (cooldownHours) => {\r\n  if (!cooldownHours) return true; // 0 => on ignore le cooldown (seul le daily gate compte)\r\n  try {\r\n    const iso = localStorage.getItem(FEATURED_COOLDOWN_KEY);\r\n    if (!iso) return true;\r\n    const last = new Date(iso).getTime();\r\n    const now = Date.now();\r\n    const ms = cooldownHours * 60 * 60 * 1000;\r\n    return now - last > ms;\r\n  } catch {\r\n    return true;\r\n  }\r\n};\r\n\r\nexport default function Home() {\r\n  const [packs, setPacks] = useState([]);\r\n  const [packsLoading, setPacksLoading] = useState(false);\r\n  const [hasPubs, setHasPubs] = useState(null); // null = en attente, true = pubs disponibles, false = pas de pubs\r\n\r\n  const aliveRef = useRef(true);\r\n  useEffect(() => {\r\n    aliveRef.current = true;\r\n    return () => {\r\n      aliveRef.current = false;\r\n    };\r\n  }, []);\r\n\r\n  const {\r\n    fetchProduitsHomePromo,\r\n    isLoadingProductPromo,\r\n    produitHomePromo,\r\n    produitHomeFlash,\r\n    isLoadingProductFlash,\r\n    fetchProductsHomeFlash,\r\n    produitHomeTabaski,\r\n    isLoadingProductTabaski,\r\n    fetchProductsHomeTabaski,\r\n  } = useContext(PromoProductContext);\r\n\r\n  const { fetchProduitsHome, isLoadingProduct, produitHome } = useContext(ProductContext);\r\n  const { fetchProduitsHomeVenteCher, isLoadingProductVenteCher, produitHomeVenteCher } = useContext(VenteCherContext);\r\n\r\n  /* ===== Lancements indépendants ===== */\r\n  useEffect(() => {\r\n    try { if (fetchProduitsHomePromo) fetchProduitsHomePromo(); } catch {}\r\n    try { if (fetchProduitsHome) fetchProduitsHome(); } catch {}\r\n    try { if (fetchProductsHomeFlash) fetchProductsHomeFlash(); } catch {}\r\n    try { if (fetchProductsHomeTabaski) fetchProductsHomeTabaski(); } catch {}\r\n    try { if (fetchProduitsHomeVenteCher) fetchProduitsHomeVenteCher(); } catch {}\r\n  }, [fetchProduitsHomePromo, fetchProduitsHome, fetchProductsHomeFlash, fetchProductsHomeTabaski, fetchProduitsHomeVenteCher]);\r\n\r\n  /* ===== Packs ===== */\r\n  const fetchPack = useCallback(async () => {\r\n    setPacksLoading(true);\r\n    try {\r\n      const res = await PackPromoService.getPacks();\r\n      const data = (res && res.data) || [];\r\n      if (aliveRef.current) setPacks(asArray(data));\r\n    } catch {\r\n      if (aliveRef.current) setPacks([]);\r\n    } finally {\r\n      if (aliveRef.current) setPacksLoading(false);\r\n    }\r\n  }, []);\r\n  useEffect(() => { fetchPack(); }, [fetchPack]);\r\n\r\n  /* ===== Scroll top ===== */\r\n  useEffect(() => {\r\n    window.scrollTo({ top: 0, left: 0, behavior: \"smooth\" });\r\n  }, []);\r\n\r\n  /* ===== Scroll hash après packs ===== */\r\n  useEffect(() => {\r\n    const hash = window.location.hash;\r\n    if (!hash) return;\r\n    if (packsLoading) return;\r\n    const el = document.querySelector(hash);\r\n    if (el) el.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [packsLoading]);\r\n\r\n  /* ===== Sélections ===== */\r\n  const produitsDisponibles = useMemo(() => {\r\n    const items = asArray(produitHome);\r\n    if (!items.length) return [];\r\n    return [...items].sort((a, b) => safeRank(a) - safeRank(b)).slice(0, 4);\r\n  }, [produitHome]);\r\n\r\n  const tabaski = asArray(produitHomeTabaski);\r\n  const flash = asArray(produitHomeFlash);\r\n  const promo = asArray(produitHomePromo);\r\n  const venteCher = asArray(produitHomeVenteCher);\r\n\r\n  /* ======== FeaturedProductsPopup: 1 fois/jour ======== */\r\n  // paramètres du popup vedette\r\n  const featuredDelayMs = 2200;\r\n  const featuredCooldownHours = 0; // 0 = ignorer son propre cooldown ; daily gate suffit pour 1/jour\r\n\r\n  const [showFeatured, setShowFeatured] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // 1) 1 seule fois par jour\r\n    if (hasSeenFeaturedToday()) {\r\n      setShowFeatured(false);\r\n      return;\r\n    }\r\n    // 2) Besoin d'au moins 1 produit\r\n    const canShowFromData = Array.isArray(promo) && promo.length > 0;\r\n    if (!canShowFromData) {\r\n      setShowFeatured(false);\r\n      return;\r\n    }\r\n    // 3) (optionnel) respecter un cooldown en heures si > 0\r\n    const okCooldown = shouldRespectFeaturedCooldown(featuredCooldownHours);\r\n    setShowFeatured(okCooldown);\r\n  }, [(promo && promo.length), featuredCooldownHours]);\r\n\r\n  // Dès qu'il s'affiche, on marque la journée (empêche toute réapparition aujourd'hui)\r\n  useEffect(() => {\r\n    if (showFeatured) {\r\n      markFeaturedSeenToday();\r\n    }\r\n  }, [showFeatured]);\r\n\r\n  return (\r\n    <>\r\n      <SEOHeader\r\n        title=\"CCBM Shop | Boutique en ligne d'électroménager | Meilleures Offres\"\r\n        description=\"Découvrez les meilleures offres sur CCBM Shop, votre destination privilégiée pour l'électroménager de qualité.\"\r\n        keywords=\"électroménager, boutique en ligne, appareils électroménagers, CCBM Shop, ccbme, smart TV, téléviseur, réfrigérateur, climatiseur, cuisinière, congélateur, micro-onde, machine à laver\"\r\n      />\r\n\r\n      <Layout type={3} childrenClasses=\"pt-0\">\r\n     \r\n        {hasPubs === true ? (\r\n          <BannerPub className=\"mt-5 mb-4\" onPubsLoaded={setHasPubs} />\r\n        ) : hasPubs === false ? (\r\n          <BannerSecond className=\"mt-5 mb-4\" />\r\n        ) : (\r\n          <>\r\n            <BannerPub className=\"mt-5 mb-4\" onPubsLoaded={setHasPubs} />\r\n          </>\r\n        )}\r\n\r\n        {/* ===== Tabaski ===== */}\r\n        {!!tabaski.length && (\r\n          <ViewMoreTitle\r\n            className=\"top-selling-product mb-[60px]\"\r\n            seeMoreUrl=\"/promo-tabaski\"\r\n            categoryTitle=\"Spécial Tabaski\"\r\n          >\r\n            {isLoadingProductTabaski ? (\r\n              <div className=\"flex justify-center items-center\"><Loader2 className=\"animate-spin\" /></div>\r\n            ) : (\r\n              <SectionStyleTwo products={tabaski.slice(0, 4)} />\r\n            )}\r\n          </ViewMoreTitle>\r\n        )}\r\n\r\n        {/* ===== Ramadan / Flash ===== */}\r\n        {!!flash.length && (\r\n          <ViewMoreTitle\r\n            className=\"top-selling-product mb-[60px]\"\r\n            seeMoreUrl=\"/promo-ramadan\"\r\n            categoryTitle=\"Spécial Ramadan\"\r\n          >\r\n            {isLoadingProductFlash ? (\r\n              <div className=\"flex justify-center items-center\"><Loader2 className=\"animate-spin\" /></div>\r\n            ) : (\r\n              <SectionStyleTwo products={flash.slice(0, 4)} />\r\n            )}\r\n          </ViewMoreTitle>\r\n        )}\r\n\r\n        {/* ===== Catégories ===== */}\r\n        <ViewMoreTitleCategorie\r\n          className=\"my-categories mb-[60px] mt-0 mobile-collapsed\"\r\n          seeMoreUrl=\"/boutique\"\r\n          categoryTitle=\"Nos Catégories\"\r\n        >\r\n          <CategoriesSection />\r\n        </ViewMoreTitleCategorie>\r\n\r\n        {/* ===== Promo ===== */}\r\n        {!!promo.length && (\r\n          <ViewMoreTitle\r\n            className=\"mt-8 top-selling-product mb-[60px]\"\r\n            seeMoreUrl=\"/en-promo\"\r\n            categoryTitle=\"Produits En Promotion\"\r\n          >\r\n            {isLoadingProductPromo ? (\r\n              <div className=\"flex justify-center items-center\"><Loader2 className=\"animate-spin\" /></div>\r\n            ) : (\r\n              <SectionStyleTwo products={promo.slice(0, 4)} />\r\n            )}\r\n          </ViewMoreTitle>\r\n        )}\r\n\r\n        {/* ===== Packs ===== */}\r\n        {!!packs.length && (\r\n          <ViewMoreTitlePack\r\n            className=\"mt-8 top-selling-product mb-[60px]\"\r\n            seeMoreUrl=\"/\"\r\n            categoryTitle=\"Spéciale Saint Valentin\"\r\n            id=\"valentine-packs\"\r\n          >\r\n            {packsLoading ? (\r\n              <div className=\"flex justify-center items-center\"><Loader2 className=\"animate-spin\" /></div>\r\n            ) : (\r\n              <SectionStyleTwoPack products={packs} />\r\n            )}\r\n          </ViewMoreTitlePack>\r\n        )}\r\n\r\n        {/* ===== Vente en cher ===== */}\r\n        {!!venteCher.length && (\r\n          <ViewMoreTitle\r\n            className=\"top-selling-product mb-[60px]\"\r\n            seeMoreUrl=\"/vente-en-cher\"\r\n            categoryTitle=\"Vente en Cher\"\r\n          >\r\n            {isLoadingProductVenteCher ? (\r\n              <div className=\"flex justify-center items-center\"><Loader2 className=\"animate-spin\" /></div>\r\n            ) : (\r\n              <SectionStyleTwoVenteCher products={venteCher.slice(0, 2)} />\r\n            )}\r\n          </ViewMoreTitle>\r\n        )}\r\n\r\n        {/* ===== Produits disponibles ===== */}\r\n        {!!produitsDisponibles.length && (\r\n          <ViewMoreTitle\r\n            className=\"top-selling-product mb-[60px]\"\r\n            seeMoreUrl=\"/boutique\"\r\n            categoryTitle=\"Produits Disponibles\"\r\n          >\r\n            {isLoadingProduct ? (\r\n              <div className=\"flex justify-center items-center\"><Loader2 className=\"animate-spin\" /></div>\r\n            ) : (\r\n              <SectionStyleTwo products={produitsDisponibles} />\r\n            )}\r\n          </ViewMoreTitle>\r\n        )}\r\n\r\n        {/* ===== Featured popup: 1/jour ===== */}\r\n        {showFeatured && (\r\n          <FeaturedProductsPopup\r\n            delayMs={featuredDelayMs}\r\n            autoPlayMs={3500}\r\n            cooldownHours={featuredCooldownHours} // 0 = ignoré ; daily gate fait 1/jour\r\n            title=\"Lou yomb té néh 🔥\"\r\n            rawProducts={promo}\r\n            makeLink={(p) => `produits/${p.id}/details`}\r\n          />\r\n        )}\r\n      </Layout>\r\n    </>\r\n  );\r\n}\r\n"],"names":["ProductCardRowStyleTwo","className","datas","type","navigate","useNavigate","addToCart","addToWishlist","addToCreditOrder","addToPreorder","isProductInWishlist","useContext","CartContext","user","parent","useAuthContext","isHovered","setIsHovered","useState","showPopup","handleClosePopup","useNewsletterPopup","isPopupVisible","setIsPopupVisible","handleAddToCart","e","toast","handleSubscribe","email","handleAddToCreditOrder","handleAddToWishlist","handleDetails","produit","jsxs","Fragment","jsx","Link","formatPrice","ShoppingCart","HeartHandshake","Eye","Heart","NewsletterPopup","SectionStyleTwo","products","DataIteration","ProductCardRowStyleOne","ViewMoreTitle","categoryTitle","children","seeMoreUrl","ArrowRight","ViewMoreTitlePack","id","scrollContainerRef","useRef","scroll","scrollOffset","ArrowLeft","ViewMoreTitleCategorie","SimpleSlider","props","settings","selector","Slider","__spreadProps","__spreadValues","crea1","create_a_credit","ccbm_shop_promotion","ccbm_shop_promo_tabaski","BannerSecond","sliderRef","isDragging","setIsDragging","startX","setStartX","handleMouseDown","handleMouseMove","handleClick","index","routes","IMAGES","image","PubService","response","axiosInstance","error","BannerPub","onPubsLoaded","pubs","setPubs","loading","setLoading","selectedImage","setSelectedImage","useEffect","pub","closeModal","handleModalClick","imageSrc","X","_a","airFryer","aspirateur","barreDeSon","bouilloire","chauffeEau","climatiseur","congelateur","cuisiniere","extracteurDeJus","ferARepasser","fontaine","four","fourEncastrable","homeCinema","hotteDeCuisine","laveVaisselle","machineACafe","machineALaver","microOnde","miniChaine","mixeur","nonCategorise","plaqueDeCuisson","refrigerateur","regulateur","secheLinge","telephone","televiseur","ventilateur","chaise","coffre","tout","logo","grille_pain","support_tv","blender","ordinateur","normalizeName","RAW_CATEGORY_IMAGES","television","categoryImages","k","v","guessMimeFromBase64","b64","getCategoryImageSrc","category","img","key","usePingPongScroll","ref","speed","paused","el","raf","last","dir","tick","t","dt","max","useDragScroll","draggingRef","pause","isDown","startY","scrollStart","isHorizontal","CLICK_THRESHOLD","AXIS_THRESHOLD","onPointerDown","_b","onPointerMove","x","y","dx","dy","end","CategoriesSection","location","useLocation","updateProductFilters","ProductContext","updatePromoFilters","PromoProductContext","categories","updateSelectedCategory","useCategory","mobileRef","desktopRef","setPaused","getCategoryHref","params","handleCategoryClick","newFilters","href","sortedCategories","a","b","src","Loader","ProductCardRowStyleOnePack","pack","showProducts","setShowProducts","product","Minus","Plus","SectionStyleTwoPack","SectionStyleTwoVenteCher","FeaturedProductsPopup","delayMs","autoPlayMs","cooldownHours","storageKey","title","rawProducts","makeLink","mounted","setMounted","exiting","setExiting","idx","setIdx","feedback","setFeedback","timerRef","autoplayRef","containerRef","startXRef","deltaXRef","items","useMemo","p","getProductImageSrc","price","getDisplayPrice","toNum","hasPagination","shouldShow","iso","closedAt","now","ms","prev","close","i","start","stop","visHandler","pointerId","THRESHOLD","onDown","onMove","onUp","current","goPrev","goNext","handleOpen","link","showTick","msg","onAddToCart","err","onAddToCredit","formatMoney","_","ChevronLeft","ChevronRight","n","currency","locale","val","isHttpUrl","placeholderSvg","promo","list","asArray","safeRank","r","FEATURED_DAILY_KEY","todayStr","hasSeenFeaturedToday","markFeaturedSeenToday","shouldRespectFeaturedCooldown","Home","packs","setPacks","packsLoading","setPacksLoading","hasPubs","setHasPubs","aliveRef","fetchProduitsHomePromo","isLoadingProductPromo","produitHomePromo","produitHomeFlash","isLoadingProductFlash","fetchProductsHomeFlash","produitHomeTabaski","isLoadingProductTabaski","fetchProductsHomeTabaski","fetchProduitsHome","isLoadingProduct","produitHome","fetchProduitsHomeVenteCher","isLoadingProductVenteCher","produitHomeVenteCher","VenteCherContext","fetchPack","useCallback","res","PackPromoService","data","hash","produitsDisponibles","tabaski","flash","venteCher","featuredDelayMs","featuredCooldownHours","showFeatured","setShowFeatured","okCooldown","SEOHeader","Layout","Loader2"],"mappings":"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"}
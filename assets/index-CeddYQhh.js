import{C as v,u as g,j as e,l as y,m as N,A as C,p as V,f as l,t as w,n as P,B as s,G as _}from"./index-BY5VJ1ij.js";import{b as h,u as k,L as u}from"./vendor-Bb8_f6lk.js";function E(){const{venteCherCart:a,getVenteCherCartTotal:i,removeFromVenteCherCart:f,clearVenteCherCart:c}=h.useContext(v),{user:o}=g(),d=k(),[x,m]=h.useState(!1),j=(t,n)=>{t.preventDefault(),f(n)},p=Array.isArray(a)&&a.length>0,b=async()=>{if(!o){s.dismiss(),s.warning("Merci de vous connecter pour valider votre panier Vente en cher",{position:"top-center",autoClose:3e3}),d("/login");return}if(!p){s.dismiss(),s.error("Votre panier Vente en cher est vide",{position:"top-center",autoClose:3e3});return}try{m(!0);const t={partner_id:o.id,payment_mode:"online",order_lines:a.map(r=>({id:r.id,quantity:r.quantity,list_price:r.list_price}))},n=await _.createCommandeVenteCher(t);s.dismiss(),s.success("Commande Vente en cher créée avec succès",{position:"top-center",autoClose:4e3}),c(),d("/vente-en-cher")}catch(t){s.dismiss(),s.error("La commande Vente en cher n'a pas pu être créée",{position:"top-center",autoClose:5e3}),console.error("Erreur lors de la création de la commande Vente en cher",t)}finally{m(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"CCBM Shop | Panier Vente en cher",description:"Retrouvez ici les produits ajoutés à votre panier Vente en cher. Produits en très bon état, à vider rapidement.",keywords:"vente en cher, panier, ccbm shop, électroménager, bonnes affaires"}),e.jsx(N,{childrenClasses:"pt-0 pb-0",children:e.jsxs("div",{className:"cart-page-wrapper w-full bg-white pb-[60px]",children:[e.jsx("div",{className:"w-full",children:e.jsx(C,{title:"Panier Vente en cher",breadcrumb:[{name:"Accueil",path:"/"},{name:"Panier Vente en cher",path:"/vente-cher-cart"}]})}),e.jsx("div",{className:"w-full mt-[23px]",children:e.jsxs("div",{className:"container-x mx-auto",children:[e.jsx(V,{paths:[{name:"Accueil",path:"/"},{name:"Panier Vente en cher",path:"/vente-cher-cart"}]}),p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full mt-6 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Produit"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Prix (list_price)"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Quantité"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Total"}),e.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-700",children:"Action"})]})}),e.jsx("tbody",{children:a.map((t,n)=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 align-top",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-[50px] h-[50px] flex-shrink-0",children:e.jsx("img",{src:t.image_256?`data:image/png;base64,${t.image_256}`:"https://readymadeui.com/images/coffee1.webp",alt:t.name||"Produit vente en cher",className:"w-full h-full object-contain"})}),e.jsx("div",{children:e.jsx("p",{className:"text-[13px] font-600 text-qblack leading-4 line-clamp-2 hover:text-blue-600",children:t.name})})]})}),e.jsx("td",{className:"px-3 py-2 align-top text-qred font-semibold",children:l(t.list_price||0)}),e.jsx("td",{className:"px-3 py-2 align-top",children:t.quantity}),e.jsx("td",{className:"px-3 py-2 align-top font-semibold text-qblack",children:l((t.list_price||0)*t.quantity)}),e.jsx("td",{className:"px-3 py-2 align-top text-center",children:e.jsx("button",{type:"button",onClick:r=>j(r,t),className:"text-xs text-red-500 hover:underline",children:"Retirer"})})]},t.vente_cher_id||`vente-cher-cart-${t.id}-${n}`))})]})}),e.jsx("div",{className:"w-full mt-[30px] flex sm:justify-end",children:e.jsxs("div",{className:"sm:w-[370px] w-full border border-[#EDEDED] px-[30px] py-[26px]",children:[e.jsx("div",{className:"total mb-6",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[18px] font-medium text-qblack",children:"Total panier"}),e.jsx("p",{className:"text-[18px] font-medium text-qred",children:l(i())})]})}),e.jsxs("div",{className:"space-y-3",children:[i()!==0&&e.jsxs(w,{type:"button",onClick:b,className:"hover:bg-red-500 w-full bg-bleu-logo",disabled:x,children:[x&&e.jsx(P,{className:"mr-2 h-4 w-4 animate-spin"}),"Valider le Panier Vente en cher"]}),e.jsx("button",{type:"button",onClick:c,className:"w-full h-[44px] border border-red-500 text-red-500 text-sm font-semibold rounded hover:bg-red-50 transition",children:"Vider le panier"}),e.jsx(u,{to:"/vente-en-cher",children:e.jsx("div",{className:"w-full h-[44px] bg-[#F6F6F6] flex justify-center items-center rounded",children:e.jsx("span",{className:"text-sm font-semibold",children:"Continuer vos achats Vente en cher"})})})]})]})})]}):e.jsxs("div",{className:"w-full mt-10 flex flex-col items-center justify-center text-center",children:[e.jsx("p",{className:"text-lg font-medium text-qblack mb-3",children:"Aucun produit dans votre panier Vente en cher."}),e.jsx(u,{to:"/vente-en-cher",className:"text-bleu-logo underline text-sm",children:"Voir les produits en Vente en cher"})]})]})})]})})]})}export{E as default};

import{D as V,j as e,u as B,S as Q,b as te,I as ae,J as re,K as G,o as R,w as L,m as ne,O as $,B as K,k as le,n as ce}from"./index-48125af6.js";import{r as a,L as A,u as ie,b as de}from"./vendor-ee8c1fef.js";import{u as oe}from"./userService-45717e7a.js";import{b as W,c as X,d as Y,e as xe,f as me,h as he,i as pe,j as ue}from"./entrepriseFunctionService-71d7b80e.js";import{C as ge,P as z}from"./package-f10781f8.js";import"./date-format-d160e78b.js";import{C as Z}from"./chevron-left-6a96af95.js";import{T as D}from"./truck-a6451086.js";import{C as P}from"./circle-check-big-16b12067.js";import{A as ee}from"./arrow-left-5ef88f3d.js";import{M as je,P as fe,a as ye}from"./phone-1645531d.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=V("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=V("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=V("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=V("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=V("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=V("LockKeyhole",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=V("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=V("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=V("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function U(){return e.jsxs("svg",{width:"15",height:"18",viewBox:"0 0 15 18",fill:"none",className:"fill-current",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M10.9643 15.8454C10.8728 15.8399 10.8054 15.8331 10.7381 15.8331C9.37517 15.8324 8.01229 15.8324 6.60539 15.8324C6.85294 16.5145 6.77799 17.099 6.11648 17.4676C5.68672 17.7076 5.24457 17.6615 4.86018 17.3562C4.36027 16.9594 4.3087 16.4409 4.56175 15.8317C3.82667 15.8317 3.13285 15.8406 2.43903 15.8296C1.53136 15.8152 0.910425 14.8958 1.25974 14.0638C1.34845 13.852 1.51898 13.6581 1.69295 13.502C2.43628 12.8384 3.19199 12.1872 3.95182 11.5429C4.11204 11.4075 4.16499 11.2816 4.11479 11.074C3.36389 7.96037 2.61506 4.8454 1.87999 1.72768C1.82085 1.476 1.71564 1.42512 1.48597 1.432C0.997754 1.44712 0.507472 1.43681 0 1.43681C0 1.06824 0 0.741614 0 0.390921C0.782525 0.390921 1.54786 0.377856 2.31182 0.397798C2.58825 0.405362 2.70308 0.630905 2.76772 0.885329C3.01389 1.86177 3.27725 2.83339 3.5138 3.81189C3.57775 4.07732 3.68846 4.22034 3.96901 4.19971C3.98001 4.19903 3.9917 4.20315 4.00339 4.20315C4.60369 4.21003 4.95026 4.4507 5.25488 5.03863C6.60195 7.64613 10.1907 7.96587 12.0686 5.68981C12.2206 5.50622 12.3512 5.44639 12.585 5.4904C13.0911 5.58529 13.6027 5.64855 14.1136 5.71801C14.333 5.74826 14.4306 5.85416 14.4251 6.08314C14.3839 7.93906 14.3461 9.79498 14.3144 11.6509C14.3089 11.9816 14.0937 11.9665 13.8661 11.9665C11.0819 11.9651 8.29697 11.9693 5.51274 11.9596C5.2425 11.959 5.03897 12.0291 4.8368 12.2072C4.05428 12.8962 3.25525 13.5659 2.47135 14.2536C2.37095 14.3416 2.32488 14.4908 2.25337 14.6111C2.38264 14.6552 2.51192 14.737 2.64119 14.737C6.60608 14.7439 10.571 14.7425 14.5358 14.7425C14.6823 14.7425 14.8288 14.7425 15 14.7425C15 15.1152 15 15.4514 15 15.8193C14.3426 15.8193 13.6935 15.8193 13.0127 15.8193C13.25 16.4568 13.2156 17.0055 12.6442 17.4064C12.2536 17.68 11.7406 17.6814 11.3521 17.4091C10.78 17.011 10.7339 16.4636 10.9643 15.8454Z"}),e.jsx("path",{d:"M8.8449 6.1337C7.15883 6.12476 5.787 4.74744 5.78906 3.06549C5.79113 1.37254 7.18564 -0.00685072 8.88753 2.55979e-05C10.5702 0.00690192 11.9413 1.38835 11.9392 3.07374C11.9372 4.77563 10.555 6.14264 8.8449 6.1337ZM9.94924 1.61802C9.38194 2.22039 8.85178 2.78287 8.31199 3.35636C8.11326 3.12806 7.94342 2.93278 7.76394 2.72786C7.48201 2.96853 7.22553 3.1872 6.95735 3.41618C7.28191 3.80125 7.57484 4.16708 7.8884 4.51502C8.10157 4.75225 8.43232 4.77082 8.65236 4.54458C9.33656 3.83907 10.0042 3.11775 10.6382 2.44593C10.4031 2.16332 10.1858 1.9027 9.94924 1.61802Z"})]})}function Le(){return e.jsxs("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",className:"fill-current",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9.21258 4.98254C9.21258 6.17687 9.20926 7.37119 9.21391 8.56552C9.21723 9.41928 9.69987 9.9079 10.5483 9.90989C12.2512 9.91454 13.9547 9.91454 15.6576 9.90989C16.5007 9.9079 16.9966 9.40799 16.9979 8.56751C16.9999 6.16757 16.9999 3.76763 16.9979 1.36835C16.9973 0.508624 16.4961 0.00340804 15.6423 0.00274416C13.9613 0.000752505 12.2804 0.00141639 10.5994 0.00274416C9.69722 0.00340804 9.2159 0.488044 9.21391 1.40022C9.21059 2.59388 9.21258 3.78821 9.21258 4.98254ZM7.78722 12.0522C7.78722 10.8579 7.78921 9.66359 7.78656 8.46926C7.78456 7.57036 7.31122 7.09104 6.42028 7.08971C4.73933 7.08639 3.05837 7.08705 1.37742 7.08971C0.489805 7.09104 0.00251398 7.57965 0.0018501 8.46395C0.000522332 10.8526 0.000522332 13.2413 0.0018501 15.6299C0.00251398 16.4896 0.503747 16.9969 1.35551 16.9982C3.04775 17.0002 4.73933 17.0002 6.43157 16.9982C7.2913 16.9969 7.78257 16.5036 7.78589 15.6359C7.78988 14.4409 7.78722 13.2466 7.78722 12.0522ZM3.89022 5.66236C4.75261 5.66236 5.61499 5.66767 6.47738 5.66103C7.28665 5.65439 7.77925 5.16444 7.78523 4.35782C7.79253 3.34075 7.79253 2.32302 7.78523 1.30595C7.77925 0.505968 7.27337 0.00473581 6.47339 0.00274416C4.75924 -0.00123915 3.04576 -0.000575264 1.33161 0.00274416C0.519016 0.00407193 0.00516952 0.516591 0.00251398 1.32719C-0.00146932 2.32236 -0.000141552 3.31752 0.00251398 4.31268C0.00450564 5.15648 0.49578 5.65638 1.33626 5.66169C2.18736 5.667 3.03846 5.66236 3.89022 5.66236ZM13.1083 11.3372C12.2459 11.3372 11.3835 11.3319 10.5211 11.3386C9.71248 11.3452 9.21988 11.8358 9.21457 12.6431C9.20793 13.6602 9.20727 14.6779 9.21457 15.695C9.22055 16.493 9.72908 16.9955 10.5271 16.9969C12.2412 17.0008 13.9547 17.0002 15.6689 16.9969C16.4801 16.9955 16.994 16.481 16.9973 15.6704C17.0013 14.6752 16.9999 13.6801 16.9973 12.6849C16.9953 11.8418 16.502 11.3425 15.6622 11.3379C14.8111 11.3333 13.9594 11.3372 13.1083 11.3372Z",fill:"white"}),e.jsx("path",{d:"M9.21223 4.98269C9.21223 3.78837 9.21024 2.59404 9.2129 1.39971C9.21489 0.487533 9.69621 0.00289744 10.5984 0.00223355C12.2794 0.000905786 13.9603 0.000241902 15.6413 0.00223355C16.495 0.00356132 16.9963 0.508777 16.9969 1.36784C16.9983 3.76778 16.9989 6.16773 16.9969 8.567C16.9963 9.40748 16.5004 9.90739 15.6566 9.90938C13.9537 9.91402 12.2502 9.91402 10.5473 9.90938C9.69886 9.90672 9.21622 9.41877 9.2129 8.56501C9.20891 7.37135 9.21223 6.17702 9.21223 4.98269Z"}),e.jsx("path",{d:"M7.78832 12.0524C7.78832 13.2467 7.79098 14.441 7.78699 15.6353C7.78434 16.503 7.2924 16.9963 6.43267 16.9976C4.74043 16.9996 3.04885 16.9996 1.35661 16.9976C0.504846 16.9963 0.00361284 16.4891 0.00294895 15.6294C0.00162118 13.2407 0.00162118 10.8521 0.00294895 8.4634C0.00361284 7.57911 0.490904 7.09115 1.37852 7.08916C3.05947 7.08651 4.74043 7.08584 6.42138 7.08916C7.31231 7.09115 7.785 7.56981 7.78766 8.46871C7.79031 9.6637 7.78832 10.858 7.78832 12.0524Z"}),e.jsx("path",{d:"M3.89062 5.6621C3.03952 5.6621 2.18775 5.66609 1.33665 5.66077C0.496177 5.65613 0.00490302 5.15622 0.00224748 4.31243C-0.000408054 3.31726 -0.00107194 2.3221 0.00224748 1.32694C0.0055669 0.516336 0.519413 0.00381733 1.33201 0.00248957C3.04616 -0.000829855 4.75964 -0.000829855 6.47379 0.00248957C7.27311 0.00448122 7.77965 0.50505 7.78563 1.30569C7.79293 2.32276 7.79293 3.3405 7.78563 4.35757C7.77965 5.16485 7.28771 5.6548 6.47777 5.66077C5.61539 5.66741 4.753 5.6621 3.89062 5.6621Z"}),e.jsx("path",{d:"M13.1081 11.3378C13.9592 11.3378 14.811 11.3338 15.6621 11.3391C16.5019 11.3444 16.9952 11.843 16.9972 12.6862C16.9998 13.6813 17.0005 14.6765 16.9972 15.6716C16.9939 16.4822 16.48 16.9968 15.6687 16.9981C13.9546 17.0014 12.2411 17.0014 10.527 16.9981C9.72831 16.9961 9.21977 16.4935 9.21446 15.6962C9.20716 14.6791 9.20716 13.6614 9.21446 12.6443C9.21977 11.837 9.71237 11.3464 10.521 11.3398C11.3834 11.3325 12.2458 11.3378 13.1081 11.3378Z"})]})}function _e(){return e.jsx("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",className:"fill-current",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8.00893 1.94301C8.25673 1.6737 8.45526 1.43535 8.67664 1.22148C10.387 -0.426805 13.0628 -0.402322 14.7246 1.27189C16.3985 2.95834 16.4356 5.68748 14.7674 7.3977C12.6907 9.52701 10.5848 11.6268 8.48882 13.7374C8.13819 14.0902 7.85825 14.0881 7.50619 13.7331C5.4188 11.6311 3.32426 9.53637 1.25187 7.42002C-0.424185 5.70837 -0.410617 2.98786 1.25258 1.29349C2.92721 -0.413123 5.62304 -0.434006 7.35265 1.24885C7.56475 1.45479 7.76042 1.67874 8.00893 1.94301Z"})})}function Me(){const{session:h,isAuthenticated:O,token:M,userInfo:_,comapny:C,userContext:m,parent:c,saveSession:F}=B(),[k,u]=a.useState([]),[g,v]=a.useState([]),[j,r]=a.useState([]),[w,d]=a.useState([]);return a.useState([]),a.useEffect(()=>{const f=async()=>{const t=await W(c.id);v(t);const n=await X(c.id);r(n);const b=await Y(c.id);d(b)};(async()=>{try{const t=await oe.getCompte(c.id);t&&(u(t),console.log(t)),console.log(t)}catch(t){console.error("Erreur lors de la récupération des données user",t)}})(),f()},[_,c]),console.log(_),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"welcome-msg w-full",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-qblack text-lg",children:["Hello ",e.jsx("span",{children:_?_.name:"Non connecté"})]}),e.jsxs("h1",{className:"font-bold text-[24px] text-qblack sm:text-[20px]",children:["Bienvenue sur l'entreprise ",c.name]})]})}),e.jsxs("div",{className:"quick-view-grid w-full flex flex-wrap  space-evenly items-center mt-3",children:[e.jsxs("div",{className:"qv-item w-full sm:w-[180px] h-[200px] bg-qblack group hover:bg-qyellow transition-all duration-300 ease-in-out p-6 mx-2 mb-4",children:[e.jsx("div",{className:"w-[62px] h-[62px] rounded bg-white flex justify-center items-center",children:e.jsx("span",{children:e.jsx(Q,{})})}),e.jsx(A,{to:"/entreprise#commandes-en-attente-de-validation",children:e.jsx("p",{className:"text-xl text-white group-hover:text-qblacktext mt-3",children:"Commandes en cours"})}),e.jsx("span",{className:"text-[40px] text-white group-hover:text-qblacktext font-bold leading-none mt-1 block",children:j&&e.jsxs(e.Fragment,{children:[" ",j.length," "]})})]}),e.jsxs("div",{className:"qv-item w-full sm:w-[180px] h-[200px] bg-qblack group hover:bg-qyellow transition-all duration-300 ease-in-out p-6 mx-2 mb-4",children:[e.jsx("div",{className:"w-[62px] h-[62px] rounded bg-white flex justify-center items-center",children:e.jsx("span",{children:e.jsx(te,{})})}),e.jsx(A,{to:"/entreprise#commandes-rejetees",children:e.jsx("p",{className:"text-xl text-white group-hover:text-qblacktext mt-2",children:"Commandes Rejetées"})}),e.jsx("span",{className:"text-[40px] text-white group-hover:text-qblacktext font-bold leading-none mt-1 block",children:w&&e.jsxs(e.Fragment,{children:[" ",w.length," "]})})]}),e.jsxs("div",{className:"qv-item w-full sm:w-[180px] h-[200px] bg-qblack group hover:bg-qyellow transition-all duration-300 ease-in-out p-6 mx-2 mb-4",children:[e.jsx("div",{className:"w-[62px] h-[62px] rounded bg-white flex justify-center items-center",children:e.jsx("span",{children:e.jsx(ge,{})})}),e.jsx(A,{to:"/entreprise#commandes-approuves",children:e.jsx("p",{className:"text-xl text-white group-hover:text-qblacktext mt-5",children:"Commandes Validées"})}),e.jsx("span",{className:"text-[40px] text-white group-hover:text-qblacktext font-bold leading-none mt-1 block",children:g&&e.jsxs(e.Fragment,{children:[" ",g.length," "]})})]})]}),e.jsxs("div",{className:"dashboard-info mt-8 flex flex-col bg-primarygray px-4 sm:px-7 py-7",children:[e.jsx("p",{className:"title text-[22px] font-semibold",children:"Informations de l'entreprise"}),e.jsxs("div",{className:"mt-5 flex flex-wrap",children:[e.jsxs("div",{className:"inline-flex mr-5 mb-5",children:[e.jsx("div",{className:"text-base text-qgraytwo w-[100px] block",children:e.jsx("div",{children:"Name:"})}),e.jsx("div",{className:"text-base text-qblack font-medium",children:c?c.name:""})]}),e.jsxs("div",{className:"inline-flex mr-5 mb-5",children:[e.jsx("div",{className:"text-base text-qgraytwo w-[100px] block",children:e.jsx("div",{children:"Email:"})}),e.jsx("div",{className:"text-base text-qblack font-medium",children:c?c.email:""})]}),e.jsxs("div",{className:"inline-flex mr-5 mb-5",children:[e.jsx("div",{className:"text-base text-qgraytwo w-[100px] block",children:e.jsx("div",{children:"Phone:"})}),e.jsx("div",{className:"text-base text-qblack font-medium",children:c?c.partner_phone:"Not found"})]})]})]})]})}const Ae=(...h)=>ae(re(h)),E=Ae;function Ee({className:h}){const{session:O,isAuthenticated:M,token:_,userInfo:C,parent:m,comapny:c,userContext:F,saveSession:k}=B(),[u,g]=a.useState([]),[v,j]=a.useState(!0);a.useState(null);const[r,w]=a.useState(""),[d,f]=a.useState(1),[i]=a.useState(5);a.useEffect(()=>{const s=async p=>{j(!0);try{let S=await W(p);g(S)}catch(S){console.error("Error fetching orders:",S)}finally{j(!1)}};C&&m.id&&s(m.id)},[C,m]);const t=u.filter(s=>s.name.toLowerCase().includes(r.toLowerCase())||s.partner_name.toLowerCase().includes(r.toLowerCase())),n=d*i,b=n-i,y=t.slice(b,n),N=s=>f(s),q=s=>{switch(s.toLowerCase()){case"sale":return e.jsx(P,{className:"w-5 h-5 text-green-500"});case"cancel":return e.jsx(L,{className:"w-5 h-5 text-red-500"});case"draft":return e.jsx(z,{className:"w-5 h-5 text-yellow-500"});default:return e.jsx(D,{className:"w-5 h-5 text-blue-500"})}},I=s=>{switch(s.toLowerCase()){case"sale":return"Confirmé";case"cancel":return"Annulé";case"draft":return"Brouillon";default:return"En cours"}},l=s=>{switch(s.toLowerCase()){case"pending":return"En cours de validation";case"validated":return"Validé";case"rejected":return"Rejeté";default:return"En cours"}},o=s=>{switch(s.toLowerCase()){case"pending":return e.jsx(L,{className:"w-5 h-5 text-yellow-500"});case"validated":return e.jsx(P,{className:"w-5 h-5 text-green-500"});case"rejected":return e.jsx(L,{className:"w-5 h-5 text-red-500"});default:return e.jsx(D,{className:"w-5 h-5 text-blue-500"})}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsx("div",{className:"flex items-center mb-6",children:e.jsx("h2",{className:"text-2xl font-bold",children:"Commandes validées"})}),v?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):u.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"Aucune commande trouvée "}):e.jsx("div",{className:"container",children:e.jsx("div",{className:"my-6 space-y-6",children:e.jsx("div",{className:"grid grid-cols-1",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4",children:e.jsx("h4",{className:"text-xl font-semibold text-gray-800 uppercase",children:"Liste des Commandes Approuvées"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex mb-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"Rechercher par numéro de commande ou nom du client...",value:r,onChange:s=>w(s.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Numéro"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Validation"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.partner_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.date_order).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[s.amount_total.toLocaleString()," FCFA"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[q(s.state),e.jsx("span",{className:"ml-2 capitalize",children:I(s.state)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[o(s.validation_rh_state),e.jsx("span",{className:"ml-2 capitalize",children:l(s.validation_rh_state)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(A,{to:`/admin/commandes/${s.id}/details`,className:"text-primary hover:text-primary-700 transition-colors duration-200",children:"Détails"})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Affichage de ",b+1," à ",Math.min(n,t.length)," sur ",t.length," entrées"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N(d-1),disabled:d===1,className:E("px-3 py-1 rounded-md",d===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"),children:e.jsx(Z,{className:"h-5 w-5"})}),Array.from({length:Math.ceil(t.length/i)}).map((s,p)=>e.jsx("button",{onClick:()=>N(p+1),className:E("px-3 py-1 rounded-md",d===p+1?"bg-primary text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:p+1},p)),e.jsx("button",{onClick:()=>N(d+1),disabled:d===Math.ceil(t.length/i),className:E("px-3 py-1 rounded-md",d===Math.ceil(t.length/i)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"),children:e.jsx(R,{className:"h-5 w-5"})})]})]})]})]})})})})]})})}function Oe({className:h}){const{session:O,isAuthenticated:M,token:_,userInfo:C,parent:m,comapny:c,userContext:F,saveSession:k}=B(),[u,g]=a.useState([]),[v,j]=a.useState(!0),[r,w]=a.useState(1),[d]=a.useState(2);a.useState(null);const[f,i]=a.useState(""),[t]=a.useState(5);a.useEffect(()=>{const x=async T=>{j(!0);try{let H=await Y(T);g(H)}catch(H){console.error("Error fetching orders:",H)}finally{j(!1)}};C&&m.id&&x(m.id)},[C,m]);const n=r*d,b=n-d;if(u.slice(b,n),v)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Chargement des commandes..."});const y=u.filter(x=>x.name.toLowerCase().includes(f.toLowerCase())||x.partner_name.toLowerCase().includes(f.toLowerCase())),N=r*t,q=N-t,I=y.slice(q,N),l=x=>w(x),o=x=>{switch(x.toLowerCase()){case"sale":return e.jsx(P,{className:"w-5 h-5 text-green-500"});case"cancel":return e.jsx(L,{className:"w-5 h-5 text-red-500"});case"draft":return e.jsx(z,{className:"w-5 h-5 text-yellow-500"});default:return e.jsx(D,{className:"w-5 h-5 text-blue-500"})}},s=x=>{switch(x.toLowerCase()){case"sale":return"Confirmé";case"cancel":return"Annulé";case"draft":return"Brouillon";default:return"En cours"}},p=x=>{switch(x.toLowerCase()){case"pending":return"En cours de validation";case"validated":return"Validé";case"rejected":return"Rejeté";default:return"En cours"}},S=x=>{switch(x.toLowerCase()){case"pending":return e.jsx(L,{className:"w-5 h-5 text-yellow-500"});case"validated":return e.jsx(P,{className:"w-5 h-5 text-green-500"});case"rejected":return e.jsx(L,{className:"w-5 h-5 text-red-500"});default:return e.jsx(D,{className:"w-5 h-5 text-blue-500"})}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsx("div",{className:"flex items-center mb-6",children:e.jsx("h2",{className:"text-2xl font-bold",children:"Commandes rejetées"})}),v?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):u.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"Aucune commande trouvée "}):e.jsx("div",{className:"container",children:e.jsx("div",{className:"my-6 space-y-6",children:e.jsx("div",{className:"grid grid-cols-1",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4",children:e.jsx("h4",{className:"text-xl font-semibold text-gray-800 uppercase",children:"Liste des Commandes Rejetées"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex mb-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"Rechercher par numéro de commande ou nom du client...",value:f,onChange:x=>i(x.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Numéro"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Validation"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map(x=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x.partner_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(x.date_order).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[x.amount_total.toLocaleString()," FCFA"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[o(x.state),e.jsx("span",{className:"ml-2 capitalize",children:s(x.state)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[S(x.validation_rh_state),e.jsx("span",{className:"ml-2 capitalize",children:p(x.validation_rh_state)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(A,{to:`/admin/commandes/${x.id}/details`,className:"text-primary hover:text-primary-700 transition-colors duration-200",children:"Détails"})})]},x.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Affichage de ",q+1," à ",Math.min(N,y.length)," sur ",y.length," entrées"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>l(r-1),disabled:r===1,className:E("px-3 py-1 rounded-md",r===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"),children:e.jsx(Z,{className:"h-5 w-5"})}),Array.from({length:Math.ceil(y.length/t)}).map((x,T)=>e.jsx("button",{onClick:()=>l(T+1),className:E("px-3 py-1 rounded-md",r===T+1?"bg-primary text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:T+1},T)),e.jsx("button",{onClick:()=>l(r+1),disabled:r===Math.ceil(y.length/t),className:E("px-3 py-1 rounded-md",r===Math.ceil(y.length/t)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"),children:e.jsx(R,{className:"h-5 w-5"})})]})]})]})]})})})})]})})}function qe({className:h}){const{session:O,isAuthenticated:M,token:_,userInfo:C,parent:m,comapny:c,userContext:F,saveSession:k}=B(),[u,g]=a.useState([]),[v,j]=a.useState(!0),[r,w]=a.useState(1);a.useState(2);const[d,f]=a.useState(""),[i]=a.useState(5);if(a.useEffect(()=>{const s=async p=>{j(!0);try{let S=await X(p);g(S)}catch(S){console.error("Error fetching orders:",S)}finally{j(!1)}};C&&m.id&&s(m.id)},[C,m]),v)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Chargement des commandes..."});const t=u.filter(s=>s.name.toLowerCase().includes(d.toLowerCase())||s.partner_name.toLowerCase().includes(d.toLowerCase())),n=r*i,b=n-i,y=t.slice(b,n),N=s=>w(s),q=s=>{switch(s.toLowerCase()){case"sale":return e.jsx(P,{className:"w-5 h-5 text-green-500"});case"cancel":return e.jsx(L,{className:"w-5 h-5 text-red-500"});case"draft":return e.jsx(z,{className:"w-5 h-5 text-yellow-500"});default:return e.jsx(D,{className:"w-5 h-5 text-blue-500"})}},I=s=>{switch(s.toLowerCase()){case"sale":return"Confirmé";case"cancel":return"Annulé";case"draft":return"Brouillon";default:return"En cours"}},l=s=>{switch(s.toLowerCase()){case"pending":return"En cours de validation";case"validated":return"Validé";case"rejected":return"Rejeté";default:return"En cours"}},o=s=>{switch(s.toLowerCase()){case"pending":return e.jsx(L,{className:"w-5 h-5 text-yellow-500"});case"validated":return e.jsx(P,{className:"w-5 h-5 text-green-500"});case"rejected":return e.jsx(L,{className:"w-5 h-5 text-red-500"});default:return e.jsx(D,{className:"w-5 h-5 text-blue-500"})}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsx("div",{className:"flex items-center mb-6",children:e.jsx("h2",{className:"text-2xl font-bold",children:"Commandes en cours de validation"})}),v?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):u.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"Aucune commande trouvée "}):e.jsx("div",{className:"container",children:e.jsx("div",{className:"my-6 space-y-6",children:e.jsx("div",{className:"grid grid-cols-1",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4",children:e.jsx("h4",{className:"text-xl font-semibold text-gray-800 uppercase",children:"Liste des Commandes en attente"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex mb-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"Rechercher par numéro de commande ou nom du client...",value:d,onChange:s=>f(s.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Numéro"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Validation"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.partner_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.date_order).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[s.amount_total.toLocaleString()," FCFA"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[q(s.state),e.jsx("span",{className:"ml-2 capitalize",children:I(s.state)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[o(s.validation_rh_state),e.jsx("span",{className:"ml-2 capitalize",children:l(s.validation_rh_state)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(A,{to:`/admin/commandes/${s.id}/details`,className:"text-primary hover:text-primary-700 transition-colors duration-200",children:"Détails"})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Affichage de ",b+1," à ",Math.min(n,t.length)," sur ",t.length," entrées"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N(r-1),disabled:r===1,className:E("px-3 py-1 rounded-md",r===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"),children:e.jsx(Z,{className:"h-5 w-5"})}),Array.from({length:Math.ceil(t.length/i)}).map((s,p)=>e.jsx("button",{onClick:()=>N(p+1),className:E("px-3 py-1 rounded-md",r===p+1?"bg-primary text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:p+1},p)),e.jsx("button",{onClick:()=>N(r+1),disabled:r===Math.ceil(t.length/i),className:E("px-3 py-1 rounded-md",r===Math.ceil(t.length/i)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"),children:e.jsx(R,{className:"h-5 w-5"})})]})]})]})]})})})})]})})}function De({onClientSelect:h,onViewOrders:O}){const{session:M,isAuthenticated:_,token:C,parent:m,userInfo:c,comapny:F,userContext:k,saveSession:u}=B();console.log(m);const[g,v]=a.useState([]),[j,r]=a.useState(1),[w]=a.useState(4),[d,f]=a.useState(!1);a.useState(!1),ie(),a.useEffect(()=>{c&&m&&i(c.id,m.id)},[m]);const i=async(l,o)=>{f(!0);try{const s=await xe({partner_id:l,parent_id:o}),p=s.filter(S=>S.id!==c.id);v(p),console.log(s),console.log("clients",g)}catch(s){console.error("Error fetching clients:",s)}finally{f(!1)}},t=l=>{console.log("client"),console.log(l),h(l)},n=(l,o)=>{l.preventDefault(),console.log("client"),console.log(o),O(o)},b=async(l,o,s)=>{l.preventDefault(),await me(o)&&(console.log(`Desable client ${o}`),s?K.success("Compte activé avec succes"):K.success("Compte desactivé avec succes"),i(c.id)),console.log(`Desable client ${o}`)},y=j*w,N=y-w,q=g.slice(N,y),I=l=>r(l);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full",children:e.jsx("h1",{className:"text-[22px] font-bold text-qblack sm:text-xl",children:"Gestion des Clients"})}),e.jsxs("div",{className:"w-full }",children:[e.jsxs("table",{className:"w-full",style:{borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f3f4f6"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"1px solid #e5e7eb"},children:"Nom"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"1px solid #e5e7eb"},children:"Email"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"1px solid #e5e7eb"},children:"Téléphone"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"1px solid #e5e7eb"},children:"Ville"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"1px solid #e5e7eb"},children:"Statut"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"1px solid #e5e7eb"},children:"Actions"})]})}),e.jsx("tbody",{children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(ne,{size:40,className:"animate-spin"})})})}):e.jsx(e.Fragment,{children:q.map(l=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{className:" whitespace-normal",children:l.name}),e.jsx("td",{className:" whitespace-normal",children:l.email}),e.jsx("td",{className:" whitespace-normal",children:l.partner_phone}),e.jsx("td",{className:" whitespace-normal",children:l.partner_city}),e.jsx("td",{className:" whitespace-normal",children:l.is_verified?e.jsxs($,{content:"Client actif",children:[" ",e.jsx(ke,{onClick:o=>b(o,l.id,!l.is_verified),className:"text-green-500"})," "]}):e.jsxs($,{content:"Client inactif",children:[" ",e.jsx(Ce,{onClick:o=>b(o,l.id,!l.is_verified),className:"text-red-500"}),"  "]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium  ",children:[e.jsx("button",{onClick:()=>t(l),className:"p-2",children:e.jsxs($,{content:"Détails Client",children:["   ",e.jsx(ve,{className:"text-blue-500"}),"  "]})}),e.jsx("button",{onClick:o=>n(o,l),className:"p-2",children:e.jsxs($,{content:"Commandes Client",children:["   ",e.jsx(Q,{className:"text-dark"}),"  "]})})]})]},l.id))})})]}),e.jsx("div",{className:"mt-4 flex justify-center",children:Array.from({length:Math.ceil(g.length/w)},(l,o)=>e.jsx("button",{onClick:()=>I(o+1),style:{margin:"0 0.25rem",padding:"0.5rem 0.75rem",backgroundColor:j===o+1?"#3b82f6":"#f3f4f6",color:j===o+1?"white":"black",border:"none",borderRadius:"0.25rem",cursor:"pointer"},children:o+1},o))})]})]})}const Pe=({client:h,onBack:O})=>e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:O,className:"mr-4 p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors",children:e.jsx(ee,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Détails du Client"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"w-5 h-5 mr-2 text-gray-500"}),e.jsx("span",{className:"font-semibold",children:"Nom:"}),e.jsx("span",{className:"ml-2",children:h.name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"w-5 h-5 mr-2 text-gray-500"}),e.jsx("span",{className:"font-semibold",children:"Email:"}),e.jsx("span",{className:"ml-2",children:h.email})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(fe,{className:"w-5 h-5 mr-2 text-gray-500"}),e.jsx("span",{className:"font-semibold",children:"Téléphone:"}),e.jsx("span",{className:"ml-2",children:h.partner_phone})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ye,{className:"w-5 h-5 mr-2 text-gray-500"}),e.jsx("span",{className:"font-semibold",children:"Ville:"}),e.jsx("span",{className:"ml-2",children:h.partner_city})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ne,{className:"w-5 h-5 mr-2 text-gray-500"}),e.jsx("span",{className:"font-semibold",children:"Entreprise:"}),e.jsx("span",{className:"ml-2",children:h.company_name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"w-5 h-5 mr-2 text-gray-500"}),e.jsx("span",{className:"font-semibold",children:"Pays:"}),e.jsx("span",{className:"ml-2",children:h.country_name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Se,{className:"w-5 h-5 mr-2 text-gray-500"}),e.jsx("span",{className:"font-semibold",children:"Statut:"}),e.jsx("span",{className:`ml-2 ${h.is_verified?"text-green-500":"text-red-500"}`,children:h.is_verified?"Actif":"Non Actif"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"w-5 h-5 mr-2 text-gray-500"}),e.jsx("span",{className:"font-semibold",children:"Rôle:"}),e.jsx("span",{className:"ml-2 capitalize",children:h.role=="main_user"?" (Utilisateur Principal)":"(Utilisateur Secondaire)"})]}),h.created_at&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(se,{className:"w-5 h-5 mr-2 text-gray-500"}),e.jsx("span",{className:"font-semibold",children:"Date d'inscription:"}),e.jsx("span",{className:"ml-2",children:new Date(h.created_at).toLocaleDateString()})]})]})]})]}),Ie=Pe,Ve=({client:h,onBack:O})=>{const[M,_]=a.useState([]),[C,m]=a.useState(!0),[c,F]=a.useState(1),[k]=a.useState(2);a.useEffect(()=>{(async()=>{m(!0);try{const n=await he(h.id);console.log(n),_(n)}catch(n){console.error("Error fetching orders:",n)}finally{m(!1)}})()},[h.id]);const u=t=>{switch(t.toLowerCase()){case"sale":return e.jsx(P,{className:"w-5 h-5 text-green-500"});case"cancel":return e.jsx(L,{className:"w-5 h-5 text-red-500"});case"draft":return e.jsx(z,{className:"w-5 h-5 text-yellow-500"});default:return e.jsx(D,{className:"w-5 h-5 text-blue-500"})}},g=t=>{switch(t.toLowerCase()){case"sale":return"Confirmé";case"cancel":return"Annulé";case"draft":return"Brouillon";default:return"En cours"}},v=t=>{switch(t.toLowerCase()){case"pending":return"En cours de validation";case"validated":return"Validé";case"rejected":return"Rejeté";default:return"En cours"}},j=t=>{switch(t.toLowerCase()){case"pending":return e.jsx(L,{className:"w-5 h-5 text-yellow-500"});case"validated":return e.jsx(P,{className:"w-5 h-5 text-green-500"});case"rejected":return e.jsx(L,{className:"w-5 h-5 text-red-500"});default:return e.jsx(D,{className:"w-5 h-5 text-blue-500"})}},r=c*k,w=r-k,d=M.slice(w,r),f=async(t,n)=>{await pe(t,n)&&K.success("Opération reussie.",{position:"top-right",autoClose:5e3,theme:"light"}),_(y=>y.map(N=>N.id===t?{...N,validation_state:n}:N))},i=t=>F(t);return e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:O,className:"mr-4 p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors",children:e.jsx(ee,{className:"w-5 h-5"})}),e.jsxs("h2",{className:"text-2xl font-bold",children:["Commandes de ",h.name]})]}),C?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):M.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"Aucune commande trouvée pour ce client."}):e.jsx("div",{className:"space-y-6",children:d.map(t=>e.jsxs("div",{className:"border rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.name}),e.jsxs("div",{className:"flex items-center",children:[u(t.state),e.jsx("span",{className:"ml-2 capitalize",children:g(t.state)})]}),e.jsxs("div",{className:"flex items-center",children:[j(t.validation_state),e.jsx("span",{className:"ml-2 capitalize",children:v(t.validation_state)})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[e.jsx("strong",{children:"Client : "})," ",t.partner_name]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[e.jsx("strong",{children:"Tél : "})," ",t.partner_phone]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[e.jsx("strong",{children:"Adresse : "})," ",t.partner_city]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("label",{className:"font-semibold",children:"Changer le statut:"}),e.jsxs("select",{className:"ml-2 p-2 border rounded",value:t.validation_state,onChange:n=>f(t.id,n.target.value),children:[e.jsx("option",{value:"pending",children:"En cours de validation"}),e.jsx("option",{value:"validated",children:"Validé"}),e.jsx("option",{value:"rejected",children:"Rejeté"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(se,{className:"w-5 h-5 mr-2 text-gray-500"}),e.jsxs("span",{children:["Date: ",new Date(t.date_order).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(we,{className:"w-5 h-5 mr-2 text-gray-500"}),e.jsxs("span",{children:["Total: ",t.amount_total," F CFA"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Articles:"}),e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 border-b-2 border-gray-300",children:"Produit"}),e.jsx("th",{className:"py-2 border-b-2 border-gray-300",children:"Quantité"}),e.jsx("th",{className:"py-2 border-b-2 border-gray-300",children:"Prix Unitaire"}),e.jsx("th",{className:"py-2 border-b-2 border-gray-300",children:"Total"})]})}),e.jsx("tbody",{children:t.order_lines.map(n=>e.jsxs("tr",{className:"text-center",children:[e.jsx("td",{className:"py-2 border-b border-gray-300",children:n.product_name}),e.jsx("td",{className:"py-2 border-b border-gray-300",children:n.product_uom_qty}),e.jsxs("td",{className:"py-2 border-b border-gray-300",children:[n.price_unit," F CFA"]}),e.jsxs("td",{className:"py-2 border-b border-gray-300",children:[n.price_total," F CFA"]})]},n.id))})]})]})]},t.id))}),!C&&M.length>k&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>i(c-1),disabled:c===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx(Z,{className:"h-5 w-5","aria-hidden":"true"})]}),Array.from({length:Math.ceil(M.length/k)}).map((t,n)=>e.jsx("button",{onClick:()=>i(n+1),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium
                  ${c===n+1?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:n+1},n)),e.jsxs("button",{onClick:()=>i(c+1),disabled:c===Math.ceil(M.length/k),className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx(R,{className:"h-5 w-5","aria-hidden":"true"})]})]})})]})},Fe=Ve;function Be({className:h}){const{session:O,isAuthenticated:M,token:_,userInfo:C,parent:m,comapny:c,userContext:F,saveSession:k}=B(),[u,g]=a.useState([]),[v,j]=a.useState(!0),[r,w]=a.useState(1);a.useState(2);const[d,f]=a.useState(""),[i]=a.useState(10);console.log(m),a.useEffect(()=>{C&&m&&(async p=>{j(!0);try{let S=await ue(p);g(S)}catch(S){console.error("Error fetching orders:",S)}finally{j(!1)}})(m.id)},[C,m]);const t=u.filter(s=>s.name.toLowerCase().includes(d.toLowerCase())||s.partner_name.toLowerCase().includes(d.toLowerCase())),n=r*i,b=n-i,y=t.slice(b,n),N=s=>w(s),q=s=>{switch(s.toLowerCase()){case"sale":return e.jsx(P,{className:"w-5 h-5 text-green-500"});case"cancel":return e.jsx(L,{className:"w-5 h-5 text-red-500"});case"draft":return e.jsx(z,{className:"w-5 h-5 text-yellow-500"});default:return e.jsx(D,{className:"w-5 h-5 text-blue-500"})}},I=s=>{switch(s.toLowerCase()){case"sale":return"Confirmé";case"cancel":return"Annulé";case"draft":return"Brouillon";default:return"En cours"}},l=s=>{switch(s.toLowerCase()){case"pending":return"En cours de validation";case"validated":return"Validé";case"rejected":return"Rejeté";default:return"En cours"}},o=s=>{switch(s.toLowerCase()){case"pending":return e.jsx(L,{className:"w-5 h-5 text-yellow-500"});case"validated":return e.jsx(P,{className:"w-5 h-5 text-green-500"});case"rejected":return e.jsx(L,{className:"w-5 h-5 text-red-500"});default:return e.jsx(D,{className:"w-5 h-5 text-blue-500"})}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsx("div",{className:"flex items-center mb-6",children:e.jsx("h2",{className:"text-2xl font-bold",children:"Commandes à crédit"})}),v?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):u.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"Aucune commande trouvée "}):e.jsx("div",{className:"container",children:e.jsx("div",{className:"my-6 space-y-6",children:e.jsx("div",{className:"grid grid-cols-1",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4",children:e.jsx("h4",{className:"text-xl font-semibold text-gray-800 uppercase",children:"Liste des Commandes"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex mb-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"Rechercher par numéro de commande ou nom du client...",value:d,onChange:s=>f(s.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Numéro"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Validation"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.partner_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.date_order).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[s.amount_total.toLocaleString()," FCFA"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[q(s.state),e.jsx("span",{className:"ml-2 capitalize",children:I(s.state)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[o(s.validation_rh_state),e.jsx("span",{className:"ml-2 capitalize",children:l(s.validation_rh_state)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(A,{to:`/admin/commandes/${s.id}/details`,className:"text-primary hover:text-primary-700 transition-colors duration-200",children:"Détails"})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Affichage de ",b+1," à ",Math.min(n,t.length)," sur ",t.length," entrées"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N(r-1),disabled:r===1,className:E("px-3 py-1 rounded-md",r===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"),children:e.jsx(Z,{className:"h-5 w-5"})}),Array.from({length:Math.ceil(t.length/i)}).map((s,p)=>e.jsx("button",{onClick:()=>N(p+1),className:E("px-3 py-1 rounded-md",r===p+1?"bg-primary text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:p+1},p)),e.jsx("button",{onClick:()=>N(r+1),disabled:r===Math.ceil(t.length/i),className:E("px-3 py-1 rounded-md",r===Math.ceil(t.length/i)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"),children:e.jsx(R,{className:"h-5 w-5"})})]})]})]})]})})})})]})})}function We(){const{session:h,isAuthenticated:O,token:M,userInfo:_,comapny:C,userContext:m,saveSession:c}=B();console.log(_,M);const k=de().hash.split("#"),[u,g]=a.useState("dashboard"),[v,j]=a.useState(!1),[r,w]=a.useState(null),[d,f]=a.useState("list"),i=()=>{j(!v)};a.useEffect(()=>{g(k&&k.length>1?k[1]:"dashboard")},[k]);const t=y=>{w(y),f("details")},n=y=>{w(y),f("orders")},b=()=>{w(null),f("list")};return e.jsx(le,{childrenClasses:"pt-0 pb-0",children:e.jsx("div",{className:"profile-page-wrapper w-full",children:e.jsx("div",{className:"container-x mx-auto",children:e.jsxs("div",{className:"w-full my-10",children:[e.jsx(ce,{paths:[{name:"Accueil",path:"/"},{name:"Entreprise",path:"/entreprise"}]}),e.jsxs("div",{className:"w-full bg-white px-4 sm:px-10 py-9",children:[e.jsxs("div",{className:"title-area w-full flex justify-between items-center",children:[e.jsx("h1",{className:"text-[22px] font-bold text-qblack sm:text-xl",children:"Gestion Entreprise"}),e.jsx("button",{className:"block sm:hidden text-qblack",onClick:i,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16m-7 6h7"})})})]}),e.jsxs("div",{className:"profile-wrapper w-full mt-8 flex space-x-10",children:[e.jsx("div",{className:`w-[236px] min-h-[600px] border-r border-[rgba(0, 0, 0, 0.1)] ${v?"block":"hidden"} sm:block`,children:e.jsxs("div",{className:"flex flex-col space-y-10",children:[e.jsx("div",{className:"item group",children:e.jsx(A,{to:"/entreprise#dashboard",onClick:()=>g("dashboard"),children:e.jsxs("div",{className:"flex space-x-3 items-center text-qgray hover:text-qblack",children:[e.jsx("span",{children:e.jsx(Le,{})}),e.jsx("span",{className:"font-normal text-base",children:"Tableau de bord"})]})})}),e.jsx("div",{className:"item group",children:e.jsx(A,{to:"/entreprise#clients",onClick:()=>g("clients"),children:e.jsxs("div",{className:"flex space-x-3 items-center text-qgray hover:text-qblack",children:[e.jsx("span",{children:e.jsx(U,{})}),e.jsx("span",{className:"font-normal text-base",children:"Clients"})]})})}),e.jsx("div",{className:"item group",children:e.jsx(A,{to:"/entreprise#commandes",onClick:()=>g("comnandes"),children:e.jsxs("div",{className:"flex space-x-3 items-center text-qgray hover:text-qblack",children:[e.jsx("span",{children:e.jsx(U,{})}),e.jsx("span",{className:"font-normal text-base",children:"Commandes"})]})})}),e.jsx("div",{className:"item group",children:e.jsx(A,{to:"/entreprise#commandes-en-attente-de-validation",onClick:()=>g("commandes-en-attente-de-validation"),children:e.jsxs("div",{className:"flex space-x-3 items-center text-qgray hover:text-qblack",children:[e.jsx("span",{children:e.jsx(U,{})}),e.jsx("span",{className:"font-normal text-base",children:"Commandes ECDV"})]})})}),e.jsx("div",{className:"item group",children:e.jsx(A,{to:"/entreprise#commandes-rejetees",onClick:()=>g("commandes-rejetees"),children:e.jsxs("div",{className:"flex space-x-3 items-center text-qgray hover:text-qblack",children:[e.jsx("span",{children:e.jsx(U,{})}),e.jsx("span",{className:"font-normal text-base",children:"Commandes Rejetées"})]})})}),e.jsx("div",{className:"item group",children:e.jsx(A,{to:"/entreprise#commandes-approuves",onClick:()=>g("commandes-approuves"),children:e.jsxs("div",{className:"flex space-x-3 items-center text-qgray hover:text-qblack",children:[e.jsx("span",{children:e.jsx(_e,{})}),e.jsx("span",{className:"font-normal text-base",children:"Commandes Approuvées"})]})})})]})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"item-body dashboard-wrapper w-full",children:u==="dashboard"?e.jsx(Me,{}):u==="clients"?d==="list"?e.jsx(De,{onClientSelect:t,onViewOrders:n}):d==="details"?e.jsx(Ie,{client:r,onBack:b,onViewOrders:()=>f("orders")}):e.jsx(Fe,{client:r,onBack:b}):u==="commandes"?e.jsx(Be,{}):u==="commandes-en-attente-de-validation"?e.jsx(qe,{}):u==="commandes-rejetees"?e.jsx(Oe,{}):u==="commandes-approuves"?e.jsx(Ee,{}):""})})]})]})]})})})})}export{We as default};

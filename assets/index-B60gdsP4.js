import{C as F,v as U,a as R,u as z,j as e,f as m,a0 as W,E as T,S as G,_ as H,b as Q,s as X,a1 as J,N as K,a2 as Y,B as Z,V as ee,l as te,m as se,p as re,L as ae}from"./index-BY5VJ1ij.js";import{u as L,b as o,L as P,c as ne}from"./vendor-Bb8_f6lk.js";import{P as ie}from"./Pagination-Ch1fRHSb.js";function oe({datas:c,type:l=3,mode:a="default"}){const d=L(),{addToCart:h,addToWishlist:g,addToPreorder:i,preorder:p,isProductInWishlist:f,addToCreditOrder:v,addToVenteCherCart:N}=o.useContext(F),{trackEvent:y}=U(),{showPopup:_,handleClosePopup:r}=R(),[n,k]=o.useState(!1),{user:S}=z(),t=c||{},V=Number(t.creditorder_price||0),w=Number(t.list_price||0),A=Number(t.promo_price||0),C=a==="vente-cher"?!1:!!t.en_promo&&A>0,u=!!t.is_creditorder&&V>0,b=s=>{Z.success(s||"Produit ajouté",{position:"top-center",autoClose:2e3})},q=s=>{s.preventDefault(),u&&(v(t,1),k(!0),console.log("Ajout au credit order :",p),b("Produit ajouté à la commande à crédit"))},B=s=>{console.log(`Subscribed with email: ${s}`)},E=s=>{s.preventDefault(),!(!t.sale_ok&&a!=="vente-cher")&&(a==="vente-cher"?(N(t,1),b("Produit ajouté au panier Vente en cher")):(h(t,1),b("Produit ajouté au panier")),k(!0))},D=s=>{s.preventDefault(),g(t,1),b("Produit ajouté aux favoris")},j=s=>{s.preventDefault(),t.id&&(a==="vente-cher"&&t.vente_cher_id?d(`/vente-cher/${t.vente_cher_id}`,{state:{produit:t}}):d(`/produits/${t.id}/details`,{state:{produit:t}}),t.name&&(Y(t.name),y("Image","image_produit",t.name,1)))},I=o.useMemo(()=>{const s=t.image_256;return{background:s?`url('data:image/png;base64,${s}')`:"url('https://www.ccbmshop.com/logo.png')",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:"#ffffff",transition:"transform 300ms ease"}},[t.image_256]),$=Array.isArray(t.tags)?t.tags:[];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"product-card-one w-full h-full bg-white relative group overflow-hidden cursor-pointer",style:{boxShadow:"0px 15px 64px 0px rgba(0, 0, 0, 0.05)"},onClick:s=>{const x=s.target,M=x.tagName==="BUTTON"||x.closest("button"),O=x.tagName==="A"||x.closest("a");!M&&!O&&j(s)},children:[e.jsx("button",{type:"button",className:"product-card-img group relative w-full h-[200px] sm:h-[300px] cursor-pointer overflow-hidden outline-none",style:I,onMouseEnter:s=>s.currentTarget.style.transform="scale(1.05)",onMouseLeave:s=>s.currentTarget.style.transform="scale(1)",onClick:s=>{s.stopPropagation(),j(s)},"aria-label":t.name||"Voir le détail du produit",children:e.jsxs("div",{className:"absolute left-0 right-0 flex justify-between",children:[a==="vente-cher"&&t.vente_cher_state&&e.jsx("div",{className:"product-type absolute left-[14px] top-[17px]",children:e.jsxs("span",{className:`text-[8px] font-bold leading-none py-[5px] px-2 uppercase text-white 
                      rounded-full tracking-wider ${t.vente_cher_state==="open"?"bg-green-500":t.vente_cher_state==="closed"?"bg-red-500":"bg-gray-500"}`,children:[t.vente_cher_state==="open"&&"Ouverte",t.vente_cher_state==="closed"&&"Fermée",t.vente_cher_state==="cancelled"&&"Annulée",t.vente_cher_state==="draft"&&"Brouillon"]})}),a!=="vente-cher"&&t.en_promo&&e.jsx("div",{className:"product-type absolute left-[14px] top-[17px]",children:e.jsx("span",{className:`text-[8px] font-bold leading-none py-[5px] px-2 uppercase text-white \r
                      rounded-full tracking-wider bg-bleu-logo`,children:"En promo"})}),t.categ_id&&e.jsx("div",{className:"product-type absolute right-[14px] top-[17px] hidden sm:block",children:e.jsx("span",{className:`text-[8px] font-bold leading-none py-[5px] px-2 uppercase text-white \r
                      rounded-full tracking-wider bg-qyellow`,children:t.categ_id})})]})}),e.jsxs("div",{className:"product-card-details px-[15px] sm:px-[30px] pb-[15px] sm:pb-[30px] relative",children:[t.categ_id&&e.jsx("div",{className:"block sm:hidden mb-1",children:e.jsx("span",{className:"text-[7px] font-medium py-1 px-2 bg-yellow-500 text-white rounded-md",children:t.categ_id})}),a==="vente-cher"?e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:s=>{s.stopPropagation()},children:e.jsx(P,{to:t.vente_cher_id?`/vente-cher/${t.vente_cher_id}`:"#",onClick:s=>{s.preventDefault(),s.stopPropagation(),t.vente_cher_id&&j(s)},children:e.jsx("p",{className:"title mb-2 text-[11px] sm:text-[14px] font-600 text-qblack leading-[16px] sm:leading-[24px] line-clamp-2 hover:text-bleu-logo",children:t.name||"Produit"})})}),t.vente_cher_current_price&&e.jsx("p",{className:"price mb-2",children:e.jsxs("span",{className:"offer-price text-bleu-logo font-600 text-[14px] sm:text-[16px]",children:["Prix actuel: ",m(t.vente_cher_current_price)," ",t.vente_cher_currency||"XOF"]})}),e.jsxs("div",{className:"flex items-center gap-2 text-[12px] sm:text-[14px] text-gray-600 mb-2",children:[e.jsx(W,{className:"w-4 h-4 text-bleu-logo"}),e.jsxs("span",{className:"font-semibold",children:[t.vente_cher_bid_count||0," ",t.vente_cher_bid_count===1?"mise":"mises"]})]}),e.jsxs("button",{type:"button",onClick:s=>{s.preventDefault(),s.stopPropagation(),t.vente_cher_id&&j(s)},className:"w-full h-12 flex items-center justify-center gap-2 text-[14px] font-medium blue-logo-btn",children:[e.jsx(T,{className:"w-5 h-5"}),e.jsx("span",{children:"Voir et miser"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{to:t.id?`/produits/${t.id}/details`:"#",children:e.jsx("p",{className:"title mb-2 text-[11px] sm:text-[14px] font-600 text-qblack leading-[16px] sm:leading-[24px] line-clamp-2 hover:text-bleu-logo",children:t.name||"Produit"})}),e.jsxs("p",{className:"price",children:[C&&(u||!u)&&e.jsx("span",{className:"offer-price line-through text-qred font-600 text-[14px] sm:text-[16px]",children:m(w)}),!C&&u&&e.jsx("span",{className:"offer-price line-through text-qred font-600 text-[14px] sm:text-[16px]",children:m(V)}),e.jsx("br",{}),C?e.jsx(e.Fragment,{children:e.jsx("span",{className:"offer-price text-bleu-logo font-600 text-[14px] sm:text-[16px]",children:m(A)})}):w>0&&e.jsx(e.Fragment,{children:e.jsx("span",{className:"offer-price text-bleu-logo font-600 text-[14px] sm:text-[16px]",children:m(w)})})]}),e.jsxs("div",{className:"w-full left-0 flex flex-col gap-2 mt-2 items-center",children:[t.sale_ok&&e.jsxs("button",{type:"button",onClick:E,className:`w-full h-12 flex items-center justify-center gap-2 text-[14px] font-medium ${l===3?"blue-logo-btn":"yellow-btn"}`,children:[e.jsx(G,{className:"w-5 h-5"}),e.jsx("span",{children:"Commander"})]}),S&&u&&e.jsxs("button",{type:"button",onClick:q,className:"w-full h-12 flex items-center justify-center gap-2 text-[14px] font-medium vert-btn",children:[e.jsx(H,{className:"w-5 h-5"}),e.jsx("span",{children:"À crédit"})]})]})]})]}),a!=="vente-cher"&&e.jsxs("div",{className:"quick-access-btns flex flex-col space-y-1 sm:space-y-2 absolute group-hover:right-2 sm:group-hover:right-4 -right-10 top-20 transition-all duration-300 ease-in-out",children:[e.jsx("span",{className:"w-8 h-8 sm:w-10 sm:h-10 flex justify-center items-center bg-primarygray rounded",children:e.jsx("div",{className:"flex gap-1",children:e.jsx(P,{to:t.id?`/produits/${t.id}/details`:"#",className:"cursor-pointer hover:text-gray-500 hover:scale-150 duration-300","aria-label":"Voir le détail du produit",children:e.jsx(T,{})})})}),e.jsx("span",{className:"w-8 h-8 sm:w-10 sm:h-10 flex justify-center items-center bg-primarygray rounded",children:e.jsx("button",{type:"button",onClick:D,className:"flex items-center justify-center","aria-label":"Ajouter aux favoris",children:e.jsx(Q,{className:`${f(t)?"text-yellow-500":""} cursor-pointer hover:text-yellow-500 hover:scale-150 duration-300`})})}),$.length>0&&e.jsx("span",{className:"w-8 h-8 sm:w-10 sm:h-10 flex justify-center items-center rounded",children:e.jsx("div",{className:"flex gap-1",children:$.map(s=>e.jsx(X,{icon:J,color:"success",children:s.name},s.id))})})]})]}),n&&!S&&e.jsx(K,{onClose:r,onSubscribe:B,isVisible:_})]})}function pe(){const{currentProductsVenteCher:c,totalProductsVenteCher:l,isLoadingProductVenteCher:a,fetchProductsVenteCher:d,updateFilters:h,resetFilters:g,filters:i}=o.useContext(ee),p=ne(),f=L();o.useEffect(()=>{g();const r=new URLSearchParams(p.search),n={page:Number.parseInt(r.get("page"))||1,category:r.get("category")||"All",limit:9};h(n),window.scrollTo({top:0,left:100,behavior:"smooth"})},[p.pathname,p.search,g,h]),o.useEffect(()=>{d()},[d]);const v=(i.page-1)*i.limit+1,N=Math.min(i.page*i.limit,l),y=r=>{_({...i,page:r}),window.scrollTo({top:0,left:100,behavior:"smooth"})},_=o.useCallback(r=>{const n=new URLSearchParams;r.category&&r.category!=="All"&&n.set("category",r.category),r.page&&r.page>1&&n.set("page",r.page.toString()),f({search:n.toString()},{replace:!0})},[f]);return e.jsxs(e.Fragment,{children:[e.jsx(te,{title:"CCBM Shop | Vente en Cher - Produits à Vider",description:"Découvrez nos produits en vente en cher sur CCBM Shop. Profitez de nos meilleures offres pour vider le stock.",keywords:"vente en cher, produits à vider, électroménager, CCBM Shop, ccbme, offres spéciales"}),e.jsx(se,{children:e.jsx("div",{className:"products-page-wrapper w-full",children:e.jsxs("div",{className:"container-x mx-auto",children:[e.jsx(re,{}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-blue-900 mb-2",children:"Vente en cher : des produits en très bon état, à vider rapidement"}),e.jsxs("p",{className:"text-sm md:text-base text-blue-900 mb-2",children:["Les produits listés ici proviennent principalement de fins de séries, de retours clients contrôlés ou de modèles d’exposition. Ils sont en ",e.jsx("span",{className:"font-semibold",children:"bon état de fonctionnement"})," et ont été vérifiés par nos équipes techniques avant d’être remis en ligne."]}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm md:text-base text-blue-900",children:[e.jsxs("li",{children:["Quantités ",e.jsx("span",{className:"font-semibold",children:"très limitées"})," : premier arrivé, premier servi."]}),e.jsx("li",{children:"Prix ajustés en fonction de l’état cosmétique et des accessoires fournis."}),e.jsx("li",{children:"Photos et descriptions représentatives de l’état réel du produit."}),e.jsx("li",{children:"Les conditions de garantie et de retour sont précisées sur chaque fiche produit."})]})]}),e.jsx("div",{className:"products-sorting w-full bg-white flex flex-col md:flex-row justify-between p-[30px] mb-[40px]",children:e.jsxs("p",{className:"font-400 text-[13px]",children:[e.jsx("span",{className:"text-qgray",children:"Affichage"})," ",l>0?`${v}–${N} sur ${l} résultats`:"0 résultat"]})}),a?e.jsxs("div",{className:"flex justify-center items-center py-10",children:[e.jsx(ae,{className:"animate-spin mr-2"})," Chargement..."]}):c&&c.length>0?e.jsx("div",{className:"grid xl:grid-cols-2 grid-cols-1 gap-[30px]",children:c.map((r,n)=>e.jsx(oe,{datas:r,mode:"vente-cher"},r.vente_cher_id||`vente-cher-${r.id}-${n}`))}):e.jsx("div",{className:"flex justify-center items-center py-10 text-gray-500",children:"Pas de produits en vente en cher disponible pour le moment"}),e.jsx(ie,{currentPage:i.page,totalPages:Math.ceil(l/i.limit),onPageChange:y})]})]})})})]})}export{pe as default};
